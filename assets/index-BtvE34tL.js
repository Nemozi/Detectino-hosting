function Su(t,e){for(var s=0;s<e.length;s++){const n=e[s];if(typeof n!="string"&&!Array.isArray(n)){for(const r in n)if(r!=="default"&&!(r in t)){const i=Object.getOwnPropertyDescriptor(n,r);i&&Object.defineProperty(t,r,i.get?i:{enumerable:!0,get:()=>n[r]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))n(r);new MutationObserver(r=>{for(const i of r)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function s(r){const i={};return r.integrity&&(i.integrity=r.integrity),r.referrerPolicy&&(i.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?i.credentials="include":r.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(r){if(r.ep)return;r.ep=!0;const i=s(r);fetch(r.href,i)}})();function qi(t){const e=Object.create(null);for(const s of t.split(","))e[s]=1;return s=>s in e}const Se={},Vs=[],Nt=()=>{},el=()=>!1,Tr=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&(t.charCodeAt(2)>122||t.charCodeAt(2)<97),Hi=t=>t.startsWith("onUpdate:"),Me=Object.assign,Vi=(t,e)=>{const s=t.indexOf(e);s>-1&&t.splice(s,1)},Eu=Object.prototype.hasOwnProperty,ye=(t,e)=>Eu.call(t,e),ie=Array.isArray,Ks=t=>Un(t)==="[object Map]",tl=t=>Un(t)==="[object Set]",yo=t=>Un(t)==="[object Date]",ae=t=>typeof t=="function",Pe=t=>typeof t=="string",Dt=t=>typeof t=="symbol",ke=t=>t!==null&&typeof t=="object",sl=t=>(ke(t)||ae(t))&&ae(t.then)&&ae(t.catch),nl=Object.prototype.toString,Un=t=>nl.call(t),Iu=t=>Un(t).slice(8,-1),rl=t=>Un(t)==="[object Object]",Ki=t=>Pe(t)&&t!=="NaN"&&t[0]!=="-"&&""+parseInt(t,10)===t,vn=qi(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),xr=t=>{const e=Object.create(null);return(s=>e[s]||(e[s]=t(s)))},Tu=/-\w/g,yt=xr(t=>t.replace(Tu,e=>e.slice(1).toUpperCase())),xu=/\B([A-Z])/g,Os=xr(t=>t.replace(xu,"-$1").toLowerCase()),Ar=xr(t=>t.charAt(0).toUpperCase()+t.slice(1)),qr=xr(t=>t?`on${Ar(t)}`:""),ls=(t,e)=>!Object.is(t,e),rr=(t,...e)=>{for(let s=0;s<t.length;s++)t[s](...e)},il=(t,e,s,n=!1)=>{Object.defineProperty(t,e,{configurable:!0,enumerable:!1,writable:n,value:s})},Wi=t=>{const e=parseFloat(t);return isNaN(e)?t:e},Au=t=>{const e=Pe(t)?Number(t):NaN;return isNaN(e)?t:e};let bo;const Or=()=>bo||(bo=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function Ge(t){if(ie(t)){const e={};for(let s=0;s<t.length;s++){const n=t[s],r=Pe(n)?$u(n):Ge(n);if(r)for(const i in r)e[i]=r[i]}return e}else if(Pe(t)||ke(t))return t}const Ou=/;(?![^(]*\))/g,Cu=/:([^]+)/,Ru=/\/\*[^]*?\*\//g;function $u(t){const e={};return t.replace(Ru,"").split(Ou).forEach(s=>{if(s){const n=s.split(Cu);n.length>1&&(e[n[0].trim()]=n[1].trim())}}),e}function Ae(t){let e="";if(Pe(t))e=t;else if(ie(t))for(let s=0;s<t.length;s++){const n=Ae(t[s]);n&&(e+=n+" ")}else if(ke(t))for(const s in t)t[s]&&(e+=s+" ");return e.trim()}const Pu="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",ju=qi(Pu);function ol(t){return!!t||t===""}function Nu(t,e){if(t.length!==e.length)return!1;let s=!0;for(let n=0;s&&n<t.length;n++)s=ur(t[n],e[n]);return s}function ur(t,e){if(t===e)return!0;let s=yo(t),n=yo(e);if(s||n)return s&&n?t.getTime()===e.getTime():!1;if(s=Dt(t),n=Dt(e),s||n)return t===e;if(s=ie(t),n=ie(e),s||n)return s&&n?Nu(t,e):!1;if(s=ke(t),n=ke(e),s||n){if(!s||!n)return!1;const r=Object.keys(t).length,i=Object.keys(e).length;if(r!==i)return!1;for(const o in t){const a=t.hasOwnProperty(o),l=e.hasOwnProperty(o);if(a&&!l||!a&&l||!ur(t[o],e[o]))return!1}}return String(t)===String(e)}const al=t=>!!(t&&t.__v_isRef===!0),R=t=>Pe(t)?t:t==null?"":ie(t)||ke(t)&&(t.toString===nl||!ae(t.toString))?al(t)?R(t.value):JSON.stringify(t,ll,2):String(t),ll=(t,e)=>al(e)?ll(t,e.value):Ks(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((s,[n,r],i)=>(s[Hr(n,i)+" =>"]=r,s),{})}:tl(e)?{[`Set(${e.size})`]:[...e.values()].map(s=>Hr(s))}:Dt(e)?Hr(e):ke(e)&&!ie(e)&&!rl(e)?String(e):e,Hr=(t,e="")=>{var s;return Dt(t)?`Symbol(${(s=t.description)!=null?s:e})`:t};let nt;class Lu{constructor(e=!1){this.detached=e,this._active=!0,this._on=0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=nt,!e&&nt&&(this.index=(nt.scopes||(nt.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let e,s;if(this.scopes)for(e=0,s=this.scopes.length;e<s;e++)this.scopes[e].pause();for(e=0,s=this.effects.length;e<s;e++)this.effects[e].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let e,s;if(this.scopes)for(e=0,s=this.scopes.length;e<s;e++)this.scopes[e].resume();for(e=0,s=this.effects.length;e<s;e++)this.effects[e].resume()}}run(e){if(this._active){const s=nt;try{return nt=this,e()}finally{nt=s}}}on(){++this._on===1&&(this.prevScope=nt,nt=this)}off(){this._on>0&&--this._on===0&&(nt=this.prevScope,this.prevScope=void 0)}stop(e){if(this._active){this._active=!1;let s,n;for(s=0,n=this.effects.length;s<n;s++)this.effects[s].stop();for(this.effects.length=0,s=0,n=this.cleanups.length;s<n;s++)this.cleanups[s]();if(this.cleanups.length=0,this.scopes){for(s=0,n=this.scopes.length;s<n;s++)this.scopes[s].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!e){const r=this.parent.scopes.pop();r&&r!==this&&(this.parent.scopes[this.index]=r,r.index=this.index)}this.parent=void 0}}}function Du(){return nt}let Te;const Vr=new WeakSet;class cl{constructor(e){this.fn=e,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,nt&&nt.active&&nt.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,Vr.has(this)&&(Vr.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||dl(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,wo(this),hl(this);const e=Te,s=St;Te=this,St=!0;try{return this.fn()}finally{fl(this),Te=e,St=s,this.flags&=-3}}stop(){if(this.flags&1){for(let e=this.deps;e;e=e.nextDep)Ji(e);this.deps=this.depsTail=void 0,wo(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?Vr.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){fi(this)&&this.run()}get dirty(){return fi(this)}}let ul=0,mn,_n;function dl(t,e=!1){if(t.flags|=8,e){t.next=_n,_n=t;return}t.next=mn,mn=t}function zi(){ul++}function Gi(){if(--ul>0)return;if(_n){let e=_n;for(_n=void 0;e;){const s=e.next;e.next=void 0,e.flags&=-9,e=s}}let t;for(;mn;){let e=mn;for(mn=void 0;e;){const s=e.next;if(e.next=void 0,e.flags&=-9,e.flags&1)try{e.trigger()}catch(n){t||(t=n)}e=s}}if(t)throw t}function hl(t){for(let e=t.deps;e;e=e.nextDep)e.version=-1,e.prevActiveLink=e.dep.activeLink,e.dep.activeLink=e}function fl(t){let e,s=t.depsTail,n=s;for(;n;){const r=n.prevDep;n.version===-1?(n===s&&(s=r),Ji(n),Uu(n)):e=n,n.dep.activeLink=n.prevActiveLink,n.prevActiveLink=void 0,n=r}t.deps=e,t.depsTail=s}function fi(t){for(let e=t.deps;e;e=e.nextDep)if(e.dep.version!==e.version||e.dep.computed&&(pl(e.dep.computed)||e.dep.version!==e.version))return!0;return!!t._dirty}function pl(t){if(t.flags&4&&!(t.flags&16)||(t.flags&=-17,t.globalVersion===Tn)||(t.globalVersion=Tn,!t.isSSR&&t.flags&128&&(!t.deps&&!t._dirty||!fi(t))))return;t.flags|=2;const e=t.dep,s=Te,n=St;Te=t,St=!0;try{hl(t);const r=t.fn(t._value);(e.version===0||ls(r,t._value))&&(t.flags|=128,t._value=r,e.version++)}catch(r){throw e.version++,r}finally{Te=s,St=n,fl(t),t.flags&=-3}}function Ji(t,e=!1){const{dep:s,prevSub:n,nextSub:r}=t;if(n&&(n.nextSub=r,t.prevSub=void 0),r&&(r.prevSub=n,t.nextSub=void 0),s.subs===t&&(s.subs=n,!n&&s.computed)){s.computed.flags&=-5;for(let i=s.computed.deps;i;i=i.nextDep)Ji(i,!0)}!e&&!--s.sc&&s.map&&s.map.delete(s.key)}function Uu(t){const{prevDep:e,nextDep:s}=t;e&&(e.nextDep=s,t.prevDep=void 0),s&&(s.prevDep=e,t.nextDep=void 0)}let St=!0;const gl=[];function Wt(){gl.push(St),St=!1}function zt(){const t=gl.pop();St=t===void 0?!0:t}function wo(t){const{cleanup:e}=t;if(t.cleanup=void 0,e){const s=Te;Te=void 0;try{e()}finally{Te=s}}}let Tn=0;class Bu{constructor(e,s){this.sub=e,this.dep=s,this.version=s.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class Zi{constructor(e){this.computed=e,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0,this.__v_skip=!0}track(e){if(!Te||!St||Te===this.computed)return;let s=this.activeLink;if(s===void 0||s.sub!==Te)s=this.activeLink=new Bu(Te,this),Te.deps?(s.prevDep=Te.depsTail,Te.depsTail.nextDep=s,Te.depsTail=s):Te.deps=Te.depsTail=s,vl(s);else if(s.version===-1&&(s.version=this.version,s.nextDep)){const n=s.nextDep;n.prevDep=s.prevDep,s.prevDep&&(s.prevDep.nextDep=n),s.prevDep=Te.depsTail,s.nextDep=void 0,Te.depsTail.nextDep=s,Te.depsTail=s,Te.deps===s&&(Te.deps=n)}return s}trigger(e){this.version++,Tn++,this.notify(e)}notify(e){zi();try{for(let s=this.subs;s;s=s.prevSub)s.sub.notify()&&s.sub.dep.notify()}finally{Gi()}}}function vl(t){if(t.dep.sc++,t.sub.flags&4){const e=t.dep.computed;if(e&&!t.dep.subs){e.flags|=20;for(let n=e.deps;n;n=n.nextDep)vl(n)}const s=t.dep.subs;s!==t&&(t.prevSub=s,s&&(s.nextSub=t)),t.dep.subs=t}}const pi=new WeakMap,xs=Symbol(""),gi=Symbol(""),xn=Symbol("");function Ve(t,e,s){if(St&&Te){let n=pi.get(t);n||pi.set(t,n=new Map);let r=n.get(s);r||(n.set(s,r=new Zi),r.map=n,r.key=s),r.track()}}function Vt(t,e,s,n,r,i){const o=pi.get(t);if(!o){Tn++;return}const a=l=>{l&&l.trigger()};if(zi(),e==="clear")o.forEach(a);else{const l=ie(t),c=l&&Ki(s);if(l&&s==="length"){const u=Number(n);o.forEach((d,f)=>{(f==="length"||f===xn||!Dt(f)&&f>=u)&&a(d)})}else switch((s!==void 0||o.has(void 0))&&a(o.get(s)),c&&a(o.get(xn)),e){case"add":l?c&&a(o.get("length")):(a(o.get(xs)),Ks(t)&&a(o.get(gi)));break;case"delete":l||(a(o.get(xs)),Ks(t)&&a(o.get(gi)));break;case"set":Ks(t)&&a(o.get(xs));break}}Gi()}function Ps(t){const e=me(t);return e===t?e:(Ve(e,"iterate",xn),_t(t)?e:e.map(Et))}function Cr(t){return Ve(t=me(t),"iterate",xn),t}function ss(t,e){return Gt(t)?As(t)?Qs(Et(e)):Qs(e):Et(e)}const Mu={__proto__:null,[Symbol.iterator](){return Kr(this,Symbol.iterator,t=>ss(this,t))},concat(...t){return Ps(this).concat(...t.map(e=>ie(e)?Ps(e):e))},entries(){return Kr(this,"entries",t=>(t[1]=ss(this,t[1]),t))},every(t,e){return Ut(this,"every",t,e,void 0,arguments)},filter(t,e){return Ut(this,"filter",t,e,s=>s.map(n=>ss(this,n)),arguments)},find(t,e){return Ut(this,"find",t,e,s=>ss(this,s),arguments)},findIndex(t,e){return Ut(this,"findIndex",t,e,void 0,arguments)},findLast(t,e){return Ut(this,"findLast",t,e,s=>ss(this,s),arguments)},findLastIndex(t,e){return Ut(this,"findLastIndex",t,e,void 0,arguments)},forEach(t,e){return Ut(this,"forEach",t,e,void 0,arguments)},includes(...t){return Wr(this,"includes",t)},indexOf(...t){return Wr(this,"indexOf",t)},join(t){return Ps(this).join(t)},lastIndexOf(...t){return Wr(this,"lastIndexOf",t)},map(t,e){return Ut(this,"map",t,e,void 0,arguments)},pop(){return an(this,"pop")},push(...t){return an(this,"push",t)},reduce(t,...e){return ko(this,"reduce",t,e)},reduceRight(t,...e){return ko(this,"reduceRight",t,e)},shift(){return an(this,"shift")},some(t,e){return Ut(this,"some",t,e,void 0,arguments)},splice(...t){return an(this,"splice",t)},toReversed(){return Ps(this).toReversed()},toSorted(t){return Ps(this).toSorted(t)},toSpliced(...t){return Ps(this).toSpliced(...t)},unshift(...t){return an(this,"unshift",t)},values(){return Kr(this,"values",t=>ss(this,t))}};function Kr(t,e,s){const n=Cr(t),r=n[e]();return n!==t&&!_t(t)&&(r._next=r.next,r.next=()=>{const i=r._next();return i.done||(i.value=s(i.value)),i}),r}const Fu=Array.prototype;function Ut(t,e,s,n,r,i){const o=Cr(t),a=o!==t&&!_t(t),l=o[e];if(l!==Fu[e]){const d=l.apply(t,i);return a?Et(d):d}let c=s;o!==t&&(a?c=function(d,f){return s.call(this,ss(t,d),f,t)}:s.length>2&&(c=function(d,f){return s.call(this,d,f,t)}));const u=l.call(o,c,n);return a&&r?r(u):u}function ko(t,e,s,n){const r=Cr(t);let i=s;return r!==t&&(_t(t)?s.length>3&&(i=function(o,a,l){return s.call(this,o,a,l,t)}):i=function(o,a,l){return s.call(this,o,ss(t,a),l,t)}),r[e](i,...n)}function Wr(t,e,s){const n=me(t);Ve(n,"iterate",xn);const r=n[e](...s);return(r===-1||r===!1)&&Xi(s[0])?(s[0]=me(s[0]),n[e](...s)):r}function an(t,e,s=[]){Wt(),zi();const n=me(t)[e].apply(t,s);return Gi(),zt(),n}const qu=qi("__proto__,__v_isRef,__isVue"),ml=new Set(Object.getOwnPropertyNames(Symbol).filter(t=>t!=="arguments"&&t!=="caller").map(t=>Symbol[t]).filter(Dt));function Hu(t){Dt(t)||(t=String(t));const e=me(this);return Ve(e,"has",t),e.hasOwnProperty(t)}class _l{constructor(e=!1,s=!1){this._isReadonly=e,this._isShallow=s}get(e,s,n){if(s==="__v_skip")return e.__v_skip;const r=this._isReadonly,i=this._isShallow;if(s==="__v_isReactive")return!r;if(s==="__v_isReadonly")return r;if(s==="__v_isShallow")return i;if(s==="__v_raw")return n===(r?i?Xu:kl:i?wl:bl).get(e)||Object.getPrototypeOf(e)===Object.getPrototypeOf(n)?e:void 0;const o=ie(e);if(!r){let l;if(o&&(l=Mu[s]))return l;if(s==="hasOwnProperty")return Hu}const a=Reflect.get(e,s,ze(e)?e:n);if((Dt(s)?ml.has(s):qu(s))||(r||Ve(e,"get",s),i))return a;if(ze(a)){const l=o&&Ki(s)?a:a.value;return r&&ke(l)?mi(l):l}return ke(a)?r?mi(a):sn(a):a}}class yl extends _l{constructor(e=!1){super(!1,e)}set(e,s,n,r){let i=e[s];const o=ie(e)&&Ki(s);if(!this._isShallow){const c=Gt(i);if(!_t(n)&&!Gt(n)&&(i=me(i),n=me(n)),!o&&ze(i)&&!ze(n))return c||(i.value=n),!0}const a=o?Number(s)<e.length:ye(e,s),l=Reflect.set(e,s,n,ze(e)?e:r);return e===me(r)&&(a?ls(n,i)&&Vt(e,"set",s,n):Vt(e,"add",s,n)),l}deleteProperty(e,s){const n=ye(e,s);e[s];const r=Reflect.deleteProperty(e,s);return r&&n&&Vt(e,"delete",s,void 0),r}has(e,s){const n=Reflect.has(e,s);return(!Dt(s)||!ml.has(s))&&Ve(e,"has",s),n}ownKeys(e){return Ve(e,"iterate",ie(e)?"length":xs),Reflect.ownKeys(e)}}class Vu extends _l{constructor(e=!1){super(!0,e)}set(e,s){return!0}deleteProperty(e,s){return!0}}const Ku=new yl,Wu=new Vu,zu=new yl(!0);const vi=t=>t,qn=t=>Reflect.getPrototypeOf(t);function Gu(t,e,s){return function(...n){const r=this.__v_raw,i=me(r),o=Ks(i),a=t==="entries"||t===Symbol.iterator&&o,l=t==="keys"&&o,c=r[t](...n),u=s?vi:e?Qs:Et;return!e&&Ve(i,"iterate",l?gi:xs),{next(){const{value:d,done:f}=c.next();return f?{value:d,done:f}:{value:a?[u(d[0]),u(d[1])]:u(d),done:f}},[Symbol.iterator](){return this}}}}function Hn(t){return function(...e){return t==="delete"?!1:t==="clear"?void 0:this}}function Ju(t,e){const s={get(r){const i=this.__v_raw,o=me(i),a=me(r);t||(ls(r,a)&&Ve(o,"get",r),Ve(o,"get",a));const{has:l}=qn(o),c=e?vi:t?Qs:Et;if(l.call(o,r))return c(i.get(r));if(l.call(o,a))return c(i.get(a));i!==o&&i.get(r)},get size(){const r=this.__v_raw;return!t&&Ve(me(r),"iterate",xs),r.size},has(r){const i=this.__v_raw,o=me(i),a=me(r);return t||(ls(r,a)&&Ve(o,"has",r),Ve(o,"has",a)),r===a?i.has(r):i.has(r)||i.has(a)},forEach(r,i){const o=this,a=o.__v_raw,l=me(a),c=e?vi:t?Qs:Et;return!t&&Ve(l,"iterate",xs),a.forEach((u,d)=>r.call(i,c(u),c(d),o))}};return Me(s,t?{add:Hn("add"),set:Hn("set"),delete:Hn("delete"),clear:Hn("clear")}:{add(r){!e&&!_t(r)&&!Gt(r)&&(r=me(r));const i=me(this);return qn(i).has.call(i,r)||(i.add(r),Vt(i,"add",r,r)),this},set(r,i){!e&&!_t(i)&&!Gt(i)&&(i=me(i));const o=me(this),{has:a,get:l}=qn(o);let c=a.call(o,r);c||(r=me(r),c=a.call(o,r));const u=l.call(o,r);return o.set(r,i),c?ls(i,u)&&Vt(o,"set",r,i):Vt(o,"add",r,i),this},delete(r){const i=me(this),{has:o,get:a}=qn(i);let l=o.call(i,r);l||(r=me(r),l=o.call(i,r)),a&&a.call(i,r);const c=i.delete(r);return l&&Vt(i,"delete",r,void 0),c},clear(){const r=me(this),i=r.size!==0,o=r.clear();return i&&Vt(r,"clear",void 0,void 0),o}}),["keys","values","entries",Symbol.iterator].forEach(r=>{s[r]=Gu(r,t,e)}),s}function Qi(t,e){const s=Ju(t,e);return(n,r,i)=>r==="__v_isReactive"?!t:r==="__v_isReadonly"?t:r==="__v_raw"?n:Reflect.get(ye(s,r)&&r in n?s:n,r,i)}const Zu={get:Qi(!1,!1)},Qu={get:Qi(!1,!0)},Yu={get:Qi(!0,!1)};const bl=new WeakMap,wl=new WeakMap,kl=new WeakMap,Xu=new WeakMap;function ed(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function td(t){return t.__v_skip||!Object.isExtensible(t)?0:ed(Iu(t))}function sn(t){return Gt(t)?t:Yi(t,!1,Ku,Zu,bl)}function Sl(t){return Yi(t,!1,zu,Qu,wl)}function mi(t){return Yi(t,!0,Wu,Yu,kl)}function Yi(t,e,s,n,r){if(!ke(t)||t.__v_raw&&!(e&&t.__v_isReactive))return t;const i=td(t);if(i===0)return t;const o=r.get(t);if(o)return o;const a=new Proxy(t,i===2?n:s);return r.set(t,a),a}function As(t){return Gt(t)?As(t.__v_raw):!!(t&&t.__v_isReactive)}function Gt(t){return!!(t&&t.__v_isReadonly)}function _t(t){return!!(t&&t.__v_isShallow)}function Xi(t){return t?!!t.__v_raw:!1}function me(t){const e=t&&t.__v_raw;return e?me(e):t}function sd(t){return!ye(t,"__v_skip")&&Object.isExtensible(t)&&il(t,"__v_skip",!0),t}const Et=t=>ke(t)?sn(t):t,Qs=t=>ke(t)?mi(t):t;function ze(t){return t?t.__v_isRef===!0:!1}function O(t){return El(t,!1)}function nd(t){return El(t,!0)}function El(t,e){return ze(t)?t:new rd(t,e)}class rd{constructor(e,s){this.dep=new Zi,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=s?e:me(e),this._value=s?e:Et(e),this.__v_isShallow=s}get value(){return this.dep.track(),this._value}set value(e){const s=this._rawValue,n=this.__v_isShallow||_t(e)||Gt(e);e=n?e:me(e),ls(e,s)&&(this._rawValue=e,this._value=n?e:Et(e),this.dep.trigger())}}function x(t){return ze(t)?t.value:t}const id={get:(t,e,s)=>e==="__v_raw"?t:x(Reflect.get(t,e,s)),set:(t,e,s,n)=>{const r=t[e];return ze(r)&&!ze(s)?(r.value=s,!0):Reflect.set(t,e,s,n)}};function Il(t){return As(t)?t:new Proxy(t,id)}class od{constructor(e,s,n){this.fn=e,this.setter=s,this._value=void 0,this.dep=new Zi(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=Tn-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!s,this.isSSR=n}notify(){if(this.flags|=16,!(this.flags&8)&&Te!==this)return dl(this,!0),!0}get value(){const e=this.dep.track();return pl(this),e&&(e.version=this.dep.version),this._value}set value(e){this.setter&&this.setter(e)}}function ad(t,e,s=!1){let n,r;return ae(t)?n=t:(n=t.get,r=t.set),new od(n,r,s)}const Vn={},dr=new WeakMap;let _s;function ld(t,e=!1,s=_s){if(s){let n=dr.get(s);n||dr.set(s,n=[]),n.push(t)}}function cd(t,e,s=Se){const{immediate:n,deep:r,once:i,scheduler:o,augmentJob:a,call:l}=s,c=k=>r?k:_t(k)||r===!1||r===0?Kt(k,1):Kt(k);let u,d,f,h,v=!1,y=!1;if(ze(t)?(d=()=>t.value,v=_t(t)):As(t)?(d=()=>c(t),v=!0):ie(t)?(y=!0,v=t.some(k=>As(k)||_t(k)),d=()=>t.map(k=>{if(ze(k))return k.value;if(As(k))return c(k);if(ae(k))return l?l(k,2):k()})):ae(t)?e?d=l?()=>l(t,2):t:d=()=>{if(f){Wt();try{f()}finally{zt()}}const k=_s;_s=u;try{return l?l(t,3,[h]):t(h)}finally{_s=k}}:d=Nt,e&&r){const k=d,A=r===!0?1/0:r;d=()=>Kt(k(),A)}const E=Du(),S=()=>{u.stop(),E&&E.active&&Vi(E.effects,u)};if(i&&e){const k=e;e=(...A)=>{k(...A),S()}}let m=y?new Array(t.length).fill(Vn):Vn;const g=k=>{if(!(!(u.flags&1)||!u.dirty&&!k))if(e){const A=u.run();if(r||v||(y?A.some((U,z)=>ls(U,m[z])):ls(A,m))){f&&f();const U=_s;_s=u;try{const z=[A,m===Vn?void 0:y&&m[0]===Vn?[]:m,h];m=A,l?l(e,3,z):e(...z)}finally{_s=U}}}else u.run()};return a&&a(g),u=new cl(d),u.scheduler=o?()=>o(g,!1):g,h=k=>ld(k,!1,u),f=u.onStop=()=>{const k=dr.get(u);if(k){if(l)l(k,4);else for(const A of k)A();dr.delete(u)}},e?n?g(!0):m=u.run():o?o(g.bind(null,!0),!0):u.run(),S.pause=u.pause.bind(u),S.resume=u.resume.bind(u),S.stop=S,S}function Kt(t,e=1/0,s){if(e<=0||!ke(t)||t.__v_skip||(s=s||new Map,(s.get(t)||0)>=e))return t;if(s.set(t,e),e--,ze(t))Kt(t.value,e,s);else if(ie(t))for(let n=0;n<t.length;n++)Kt(t[n],e,s);else if(tl(t)||Ks(t))t.forEach(n=>{Kt(n,e,s)});else if(rl(t)){for(const n in t)Kt(t[n],e,s);for(const n of Object.getOwnPropertySymbols(t))Object.prototype.propertyIsEnumerable.call(t,n)&&Kt(t[n],e,s)}return t}function Bn(t,e,s,n){try{return n?t(...n):t()}catch(r){Rr(r,e,s)}}function It(t,e,s,n){if(ae(t)){const r=Bn(t,e,s,n);return r&&sl(r)&&r.catch(i=>{Rr(i,e,s)}),r}if(ie(t)){const r=[];for(let i=0;i<t.length;i++)r.push(It(t[i],e,s,n));return r}}function Rr(t,e,s,n=!0){const r=e?e.vnode:null,{errorHandler:i,throwUnhandledErrorInProduction:o}=e&&e.appContext.config||Se;if(e){let a=e.parent;const l=e.proxy,c=`https://vuejs.org/error-reference/#runtime-${s}`;for(;a;){const u=a.ec;if(u){for(let d=0;d<u.length;d++)if(u[d](t,l,c)===!1)return}a=a.parent}if(i){Wt(),Bn(i,null,10,[t,l,c]),zt();return}}ud(t,s,r,n,o)}function ud(t,e,s,n=!0,r=!1){if(r)throw t;console.error(t)}const Qe=[];let $t=-1;const Ws=[];let ns=null,Ms=0;const Tl=Promise.resolve();let hr=null;function xl(t){const e=hr||Tl;return t?e.then(this?t.bind(this):t):e}function dd(t){let e=$t+1,s=Qe.length;for(;e<s;){const n=e+s>>>1,r=Qe[n],i=An(r);i<t||i===t&&r.flags&2?e=n+1:s=n}return e}function eo(t){if(!(t.flags&1)){const e=An(t),s=Qe[Qe.length-1];!s||!(t.flags&2)&&e>=An(s)?Qe.push(t):Qe.splice(dd(e),0,t),t.flags|=1,Al()}}function Al(){hr||(hr=Tl.then(Cl))}function hd(t){ie(t)?Ws.push(...t):ns&&t.id===-1?ns.splice(Ms+1,0,t):t.flags&1||(Ws.push(t),t.flags|=1),Al()}function So(t,e,s=$t+1){for(;s<Qe.length;s++){const n=Qe[s];if(n&&n.flags&2){if(t&&n.id!==t.uid)continue;Qe.splice(s,1),s--,n.flags&4&&(n.flags&=-2),n(),n.flags&4||(n.flags&=-2)}}}function Ol(t){if(Ws.length){const e=[...new Set(Ws)].sort((s,n)=>An(s)-An(n));if(Ws.length=0,ns){ns.push(...e);return}for(ns=e,Ms=0;Ms<ns.length;Ms++){const s=ns[Ms];s.flags&4&&(s.flags&=-2),s.flags&8||s(),s.flags&=-2}ns=null,Ms=0}}const An=t=>t.id==null?t.flags&2?-1:1/0:t.id;function Cl(t){try{for($t=0;$t<Qe.length;$t++){const e=Qe[$t];e&&!(e.flags&8)&&(e.flags&4&&(e.flags&=-2),Bn(e,e.i,e.i?15:14),e.flags&4||(e.flags&=-2))}}finally{for(;$t<Qe.length;$t++){const e=Qe[$t];e&&(e.flags&=-2)}$t=-1,Qe.length=0,Ol(),hr=null,(Qe.length||Ws.length)&&Cl()}}let dt=null,Rl=null;function fr(t){const e=dt;return dt=t,Rl=t&&t.type.__scopeId||null,e}function Be(t,e=dt,s){if(!e||t._n)return t;const n=(...r)=>{n._d&&vr(-1);const i=fr(e);let o;try{o=t(...r)}finally{fr(i),n._d&&vr(1)}return o};return n._n=!0,n._c=!0,n._d=!0,n}function lt(t,e){if(dt===null)return t;const s=Lr(dt),n=t.dirs||(t.dirs=[]);for(let r=0;r<e.length;r++){let[i,o,a,l=Se]=e[r];i&&(ae(i)&&(i={mounted:i,updated:i}),i.deep&&Kt(o),n.push({dir:i,instance:s,value:o,oldValue:void 0,arg:a,modifiers:l}))}return t}function hs(t,e,s,n){const r=t.dirs,i=e&&e.dirs;for(let o=0;o<r.length;o++){const a=r[o];i&&(a.oldValue=i[o].value);let l=a.dir[n];l&&(Wt(),It(l,s,8,[t.el,a,t,e]),zt())}}const fd=Symbol("_vte"),$l=t=>t.__isTeleport,Ht=Symbol("_leaveCb"),Kn=Symbol("_enterCb");function pd(){const t={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return Ce(()=>{t.isMounted=!0}),Fl(()=>{t.isUnmounting=!0}),t}const vt=[Function,Array],Pl={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:vt,onEnter:vt,onAfterEnter:vt,onEnterCancelled:vt,onBeforeLeave:vt,onLeave:vt,onAfterLeave:vt,onLeaveCancelled:vt,onBeforeAppear:vt,onAppear:vt,onAfterAppear:vt,onAppearCancelled:vt},jl=t=>{const e=t.subTree;return e.component?jl(e.component):e},gd={name:"BaseTransition",props:Pl,setup(t,{slots:e}){const s=ac(),n=pd();return()=>{const r=e.default&&Dl(e.default(),!0);if(!r||!r.length)return;const i=Nl(r),o=me(t),{mode:a}=o;if(n.isLeaving)return zr(i);const l=Eo(i);if(!l)return zr(i);let c=_i(l,o,n,s,d=>c=d);l.type!==Ye&&On(l,c);let u=s.subTree&&Eo(s.subTree);if(u&&u.type!==Ye&&!bs(u,l)&&jl(s).type!==Ye){let d=_i(u,o,n,s);if(On(u,d),a==="out-in"&&l.type!==Ye)return n.isLeaving=!0,d.afterLeave=()=>{n.isLeaving=!1,s.job.flags&8||s.update(),delete d.afterLeave,u=void 0},zr(i);a==="in-out"&&l.type!==Ye?d.delayLeave=(f,h,v)=>{const y=Ll(n,u);y[String(u.key)]=u,f[Ht]=()=>{h(),f[Ht]=void 0,delete c.delayedLeave,u=void 0},c.delayedLeave=()=>{v(),delete c.delayedLeave,u=void 0}}:u=void 0}else u&&(u=void 0);return i}}};function Nl(t){let e=t[0];if(t.length>1){for(const s of t)if(s.type!==Ye){e=s;break}}return e}const vd=gd;function Ll(t,e){const{leavingVNodes:s}=t;let n=s.get(e.type);return n||(n=Object.create(null),s.set(e.type,n)),n}function _i(t,e,s,n,r){const{appear:i,mode:o,persisted:a=!1,onBeforeEnter:l,onEnter:c,onAfterEnter:u,onEnterCancelled:d,onBeforeLeave:f,onLeave:h,onAfterLeave:v,onLeaveCancelled:y,onBeforeAppear:E,onAppear:S,onAfterAppear:m,onAppearCancelled:g}=e,k=String(t.key),A=Ll(s,t),U=(q,Z)=>{q&&It(q,n,9,Z)},z=(q,Z)=>{const D=Z[1];U(q,Z),ie(q)?q.every(j=>j.length<=1)&&D():q.length<=1&&D()},Y={mode:o,persisted:a,beforeEnter(q){let Z=l;if(!s.isMounted)if(i)Z=E||l;else return;q[Ht]&&q[Ht](!0);const D=A[k];D&&bs(t,D)&&D.el[Ht]&&D.el[Ht](),U(Z,[q])},enter(q){let Z=c,D=u,j=d;if(!s.isMounted)if(i)Z=S||c,D=m||u,j=g||d;else return;let X=!1;const ce=q[Kn]=le=>{X||(X=!0,le?U(j,[q]):U(D,[q]),Y.delayedLeave&&Y.delayedLeave(),q[Kn]=void 0)};Z?z(Z,[q,ce]):ce()},leave(q,Z){const D=String(t.key);if(q[Kn]&&q[Kn](!0),s.isUnmounting)return Z();U(f,[q]);let j=!1;const X=q[Ht]=ce=>{j||(j=!0,Z(),ce?U(y,[q]):U(v,[q]),q[Ht]=void 0,A[D]===t&&delete A[D])};A[D]=t,h?z(h,[q,X]):X()},clone(q){const Z=_i(q,e,s,n,r);return r&&r(Z),Z}};return Y}function zr(t){if($r(t))return t=cs(t),t.children=null,t}function Eo(t){if(!$r(t))return $l(t.type)&&t.children?Nl(t.children):t;if(t.component)return t.component.subTree;const{shapeFlag:e,children:s}=t;if(s){if(e&16)return s[0];if(e&32&&ae(s.default))return s.default()}}function On(t,e){t.shapeFlag&6&&t.component?(t.transition=e,On(t.component.subTree,e)):t.shapeFlag&128?(t.ssContent.transition=e.clone(t.ssContent),t.ssFallback.transition=e.clone(t.ssFallback)):t.transition=e}function Dl(t,e=!1,s){let n=[],r=0;for(let i=0;i<t.length;i++){let o=t[i];const a=s==null?o.key:String(s)+String(o.key!=null?o.key:i);o.type===de?(o.patchFlag&128&&r++,n=n.concat(Dl(o.children,e,a))):(e||o.type!==Ye)&&n.push(a!=null?cs(o,{key:a}):o)}if(r>1)for(let i=0;i<n.length;i++)n[i].patchFlag=-2;return n}function Ul(t,e){return ae(t)?Me({name:t.name},e,{setup:t}):t}function Bl(t){t.ids=[t.ids[0]+t.ids[2]+++"-",0,0]}const pr=new WeakMap;function yn(t,e,s,n,r=!1){if(ie(t)){t.forEach((v,y)=>yn(v,e&&(ie(e)?e[y]:e),s,n,r));return}if(bn(n)&&!r){n.shapeFlag&512&&n.type.__asyncResolved&&n.component.subTree.component&&yn(t,e,s,n.component.subTree);return}const i=n.shapeFlag&4?Lr(n.component):n.el,o=r?null:i,{i:a,r:l}=t,c=e&&e.r,u=a.refs===Se?a.refs={}:a.refs,d=a.setupState,f=me(d),h=d===Se?el:v=>ye(f,v);if(c!=null&&c!==l){if(Io(e),Pe(c))u[c]=null,h(c)&&(d[c]=null);else if(ze(c)){c.value=null;const v=e;v.k&&(u[v.k]=null)}}if(ae(l))Bn(l,a,12,[o,u]);else{const v=Pe(l),y=ze(l);if(v||y){const E=()=>{if(t.f){const S=v?h(l)?d[l]:u[l]:l.value;if(r)ie(S)&&Vi(S,i);else if(ie(S))S.includes(i)||S.push(i);else if(v)u[l]=[i],h(l)&&(d[l]=u[l]);else{const m=[i];l.value=m,t.k&&(u[t.k]=m)}}else v?(u[l]=o,h(l)&&(d[l]=o)):y&&(l.value=o,t.k&&(u[t.k]=o))};if(o){const S=()=>{E(),pr.delete(t)};S.id=-1,pr.set(t,S),at(S,s)}else Io(t),E()}}}function Io(t){const e=pr.get(t);e&&(e.flags|=8,pr.delete(t))}Or().requestIdleCallback;Or().cancelIdleCallback;const bn=t=>!!t.type.__asyncLoader,$r=t=>t.type.__isKeepAlive;function md(t,e){Ml(t,"a",e)}function _d(t,e){Ml(t,"da",e)}function Ml(t,e,s=Ke){const n=t.__wdc||(t.__wdc=()=>{let r=s;for(;r;){if(r.isDeactivated)return;r=r.parent}return t()});if(Pr(e,n,s),s){let r=s.parent;for(;r&&r.parent;)$r(r.parent.vnode)&&yd(n,e,s,r),r=r.parent}}function yd(t,e,s,n){const r=Pr(e,t,n,!0);Zt(()=>{Vi(n[e],r)},s)}function Pr(t,e,s=Ke,n=!1){if(s){const r=s[t]||(s[t]=[]),i=e.__weh||(e.__weh=(...o)=>{Wt();const a=Mn(s),l=It(e,s,t,o);return a(),zt(),l});return n?r.unshift(i):r.push(i),i}}const Jt=t=>(e,s=Ke)=>{(!Rn||t==="sp")&&Pr(t,(...n)=>e(...n),s)},bd=Jt("bm"),Ce=Jt("m"),wd=Jt("bu"),kd=Jt("u"),Fl=Jt("bum"),Zt=Jt("um"),Sd=Jt("sp"),Ed=Jt("rtg"),Id=Jt("rtc");function Td(t,e=Ke){Pr("ec",t,e)}const xd="components";function Cs(t,e){return Od(xd,t,!0,e)||t}const Ad=Symbol.for("v-ndc");function Od(t,e,s=!0,n=!1){const r=dt||Ke;if(r){const i=r.type;{const a=mh(i,!1);if(a&&(a===e||a===yt(e)||a===Ar(yt(e))))return i}const o=To(r[t]||i[t],e)||To(r.appContext[t],e);return!o&&n?i:o}}function To(t,e){return t&&(t[e]||t[yt(e)]||t[Ar(yt(e))])}function We(t,e,s,n){let r;const i=s,o=ie(t);if(o||Pe(t)){const a=o&&As(t);let l=!1,c=!1;a&&(l=!_t(t),c=Gt(t),t=Cr(t)),r=new Array(t.length);for(let u=0,d=t.length;u<d;u++)r[u]=e(l?c?Qs(Et(t[u])):Et(t[u]):t[u],u,void 0,i)}else if(typeof t=="number"){r=new Array(t);for(let a=0;a<t;a++)r[a]=e(a+1,a,void 0,i)}else if(ke(t))if(t[Symbol.iterator])r=Array.from(t,(a,l)=>e(a,l,void 0,i));else{const a=Object.keys(t);r=new Array(a.length);for(let l=0,c=a.length;l<c;l++){const u=a[l];r[l]=e(t[u],u,l,i)}}else r=[];return r}const yi=t=>t?lc(t)?Lr(t):yi(t.parent):null,wn=Me(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>yi(t.parent),$root:t=>yi(t.root),$host:t=>t.ce,$emit:t=>t.emit,$options:t=>Hl(t),$forceUpdate:t=>t.f||(t.f=()=>{eo(t.update)}),$nextTick:t=>t.n||(t.n=xl.bind(t.proxy)),$watch:t=>Md.bind(t)}),Gr=(t,e)=>t!==Se&&!t.__isScriptSetup&&ye(t,e),Cd={get({_:t},e){if(e==="__v_skip")return!0;const{ctx:s,setupState:n,data:r,props:i,accessCache:o,type:a,appContext:l}=t;if(e[0]!=="$"){const f=o[e];if(f!==void 0)switch(f){case 1:return n[e];case 2:return r[e];case 4:return s[e];case 3:return i[e]}else{if(Gr(n,e))return o[e]=1,n[e];if(r!==Se&&ye(r,e))return o[e]=2,r[e];if(ye(i,e))return o[e]=3,i[e];if(s!==Se&&ye(s,e))return o[e]=4,s[e];bi&&(o[e]=0)}}const c=wn[e];let u,d;if(c)return e==="$attrs"&&Ve(t.attrs,"get",""),c(t);if((u=a.__cssModules)&&(u=u[e]))return u;if(s!==Se&&ye(s,e))return o[e]=4,s[e];if(d=l.config.globalProperties,ye(d,e))return d[e]},set({_:t},e,s){const{data:n,setupState:r,ctx:i}=t;return Gr(r,e)?(r[e]=s,!0):n!==Se&&ye(n,e)?(n[e]=s,!0):ye(t.props,e)||e[0]==="$"&&e.slice(1)in t?!1:(i[e]=s,!0)},has({_:{data:t,setupState:e,accessCache:s,ctx:n,appContext:r,props:i,type:o}},a){let l;return!!(s[a]||t!==Se&&a[0]!=="$"&&ye(t,a)||Gr(e,a)||ye(i,a)||ye(n,a)||ye(wn,a)||ye(r.config.globalProperties,a)||(l=o.__cssModules)&&l[a])},defineProperty(t,e,s){return s.get!=null?t._.accessCache[e]=0:ye(s,"value")&&this.set(t,e,s.value,null),Reflect.defineProperty(t,e,s)}};function xo(t){return ie(t)?t.reduce((e,s)=>(e[s]=null,e),{}):t}let bi=!0;function Rd(t){const e=Hl(t),s=t.proxy,n=t.ctx;bi=!1,e.beforeCreate&&Ao(e.beforeCreate,t,"bc");const{data:r,computed:i,methods:o,watch:a,provide:l,inject:c,created:u,beforeMount:d,mounted:f,beforeUpdate:h,updated:v,activated:y,deactivated:E,beforeDestroy:S,beforeUnmount:m,destroyed:g,unmounted:k,render:A,renderTracked:U,renderTriggered:z,errorCaptured:Y,serverPrefetch:q,expose:Z,inheritAttrs:D,components:j,directives:X,filters:ce}=e;if(c&&$d(c,n,null),o)for(const he in o){const fe=o[he];ae(fe)&&(n[he]=fe.bind(s))}if(r){const he=r.call(s,s);ke(he)&&(t.data=sn(he))}if(bi=!0,i)for(const he in i){const fe=i[he],Ue=ae(fe)?fe.bind(s,s):ae(fe.get)?fe.get.bind(s,s):Nt,rt=!ae(fe)&&ae(fe.set)?fe.set.bind(s):Nt,pt=Ne({get:Ue,set:rt});Object.defineProperty(n,he,{enumerable:!0,configurable:!0,get:()=>pt.value,set:Fe=>pt.value=Fe})}if(a)for(const he in a)ql(a[he],n,s,he);if(l){const he=ae(l)?l.call(s):l;Reflect.ownKeys(he).forEach(fe=>{ir(fe,he[fe])})}u&&Ao(u,t,"c");function ue(he,fe){ie(fe)?fe.forEach(Ue=>he(Ue.bind(s))):fe&&he(fe.bind(s))}if(ue(bd,d),ue(Ce,f),ue(wd,h),ue(kd,v),ue(md,y),ue(_d,E),ue(Td,Y),ue(Id,U),ue(Ed,z),ue(Fl,m),ue(Zt,k),ue(Sd,q),ie(Z))if(Z.length){const he=t.exposed||(t.exposed={});Z.forEach(fe=>{Object.defineProperty(he,fe,{get:()=>s[fe],set:Ue=>s[fe]=Ue,enumerable:!0})})}else t.exposed||(t.exposed={});A&&t.render===Nt&&(t.render=A),D!=null&&(t.inheritAttrs=D),j&&(t.components=j),X&&(t.directives=X),q&&Bl(t)}function $d(t,e,s=Nt){ie(t)&&(t=wi(t));for(const n in t){const r=t[n];let i;ke(r)?"default"in r?i=Lt(r.from||n,r.default,!0):i=Lt(r.from||n):i=Lt(r),ze(i)?Object.defineProperty(e,n,{enumerable:!0,configurable:!0,get:()=>i.value,set:o=>i.value=o}):e[n]=i}}function Ao(t,e,s){It(ie(t)?t.map(n=>n.bind(e.proxy)):t.bind(e.proxy),e,s)}function ql(t,e,s,n){let r=n.includes(".")?Wl(s,n):()=>s[n];if(Pe(t)){const i=e[t];ae(i)&&Gs(r,i)}else if(ae(t))Gs(r,t.bind(s));else if(ke(t))if(ie(t))t.forEach(i=>ql(i,e,s,n));else{const i=ae(t.handler)?t.handler.bind(s):e[t.handler];ae(i)&&Gs(r,i,t)}}function Hl(t){const e=t.type,{mixins:s,extends:n}=e,{mixins:r,optionsCache:i,config:{optionMergeStrategies:o}}=t.appContext,a=i.get(e);let l;return a?l=a:!r.length&&!s&&!n?l=e:(l={},r.length&&r.forEach(c=>gr(l,c,o,!0)),gr(l,e,o)),ke(e)&&i.set(e,l),l}function gr(t,e,s,n=!1){const{mixins:r,extends:i}=e;i&&gr(t,i,s,!0),r&&r.forEach(o=>gr(t,o,s,!0));for(const o in e)if(!(n&&o==="expose")){const a=Pd[o]||s&&s[o];t[o]=a?a(t[o],e[o]):e[o]}return t}const Pd={data:Oo,props:Co,emits:Co,methods:pn,computed:pn,beforeCreate:Je,created:Je,beforeMount:Je,mounted:Je,beforeUpdate:Je,updated:Je,beforeDestroy:Je,beforeUnmount:Je,destroyed:Je,unmounted:Je,activated:Je,deactivated:Je,errorCaptured:Je,serverPrefetch:Je,components:pn,directives:pn,watch:Nd,provide:Oo,inject:jd};function Oo(t,e){return e?t?function(){return Me(ae(t)?t.call(this,this):t,ae(e)?e.call(this,this):e)}:e:t}function jd(t,e){return pn(wi(t),wi(e))}function wi(t){if(ie(t)){const e={};for(let s=0;s<t.length;s++)e[t[s]]=t[s];return e}return t}function Je(t,e){return t?[...new Set([].concat(t,e))]:e}function pn(t,e){return t?Me(Object.create(null),t,e):e}function Co(t,e){return t?ie(t)&&ie(e)?[...new Set([...t,...e])]:Me(Object.create(null),xo(t),xo(e??{})):e}function Nd(t,e){if(!t)return e;if(!e)return t;const s=Me(Object.create(null),t);for(const n in e)s[n]=Je(t[n],e[n]);return s}function Vl(){return{app:null,config:{isNativeTag:el,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let Ld=0;function Dd(t,e){return function(n,r=null){ae(n)||(n=Me({},n)),r!=null&&!ke(r)&&(r=null);const i=Vl(),o=new WeakSet,a=[];let l=!1;const c=i.app={_uid:Ld++,_component:n,_props:r,_container:null,_context:i,_instance:null,version:yh,get config(){return i.config},set config(u){},use(u,...d){return o.has(u)||(u&&ae(u.install)?(o.add(u),u.install(c,...d)):ae(u)&&(o.add(u),u(c,...d))),c},mixin(u){return i.mixins.includes(u)||i.mixins.push(u),c},component(u,d){return d?(i.components[u]=d,c):i.components[u]},directive(u,d){return d?(i.directives[u]=d,c):i.directives[u]},mount(u,d,f){if(!l){const h=c._ceVNode||ve(n,r);return h.appContext=i,f===!0?f="svg":f===!1&&(f=void 0),t(h,u,f),l=!0,c._container=u,u.__vue_app__=c,Lr(h.component)}},onUnmount(u){a.push(u)},unmount(){l&&(It(a,c._instance,16),t(null,c._container),delete c._container.__vue_app__)},provide(u,d){return i.provides[u]=d,c},runWithContext(u){const d=zs;zs=c;try{return u()}finally{zs=d}}};return c}}let zs=null;function ir(t,e){if(Ke){let s=Ke.provides;const n=Ke.parent&&Ke.parent.provides;n===s&&(s=Ke.provides=Object.create(n)),s[t]=e}}function Lt(t,e,s=!1){const n=ac();if(n||zs){let r=zs?zs._context.provides:n?n.parent==null||n.ce?n.vnode.appContext&&n.vnode.appContext.provides:n.parent.provides:void 0;if(r&&t in r)return r[t];if(arguments.length>1)return s&&ae(e)?e.call(n&&n.proxy):e}}const Ud=Symbol.for("v-scx"),Bd=()=>Lt(Ud);function Gs(t,e,s){return Kl(t,e,s)}function Kl(t,e,s=Se){const{immediate:n,deep:r,flush:i,once:o}=s,a=Me({},s),l=e&&n||!e&&i!=="post";let c;if(Rn){if(i==="sync"){const h=Bd();c=h.__watcherHandles||(h.__watcherHandles=[])}else if(!l){const h=()=>{};return h.stop=Nt,h.resume=Nt,h.pause=Nt,h}}const u=Ke;a.call=(h,v,y)=>It(h,u,v,y);let d=!1;i==="post"?a.scheduler=h=>{at(h,u&&u.suspense)}:i!=="sync"&&(d=!0,a.scheduler=(h,v)=>{v?h():eo(h)}),a.augmentJob=h=>{e&&(h.flags|=4),d&&(h.flags|=2,u&&(h.id=u.uid,h.i=u))};const f=cd(t,e,a);return Rn&&(c?c.push(f):l&&f()),f}function Md(t,e,s){const n=this.proxy,r=Pe(t)?t.includes(".")?Wl(n,t):()=>n[t]:t.bind(n,n);let i;ae(e)?i=e:(i=e.handler,s=e);const o=Mn(this),a=Kl(r,i.bind(n),s);return o(),a}function Wl(t,e){const s=e.split(".");return()=>{let n=t;for(let r=0;r<s.length&&n;r++)n=n[s[r]];return n}}const Fd=(t,e)=>e==="modelValue"||e==="model-value"?t.modelModifiers:t[`${e}Modifiers`]||t[`${yt(e)}Modifiers`]||t[`${Os(e)}Modifiers`];function qd(t,e,...s){if(t.isUnmounted)return;const n=t.vnode.props||Se;let r=s;const i=e.startsWith("update:"),o=i&&Fd(n,e.slice(7));o&&(o.trim&&(r=s.map(u=>Pe(u)?u.trim():u)),o.number&&(r=s.map(Wi)));let a,l=n[a=qr(e)]||n[a=qr(yt(e))];!l&&i&&(l=n[a=qr(Os(e))]),l&&It(l,t,6,r);const c=n[a+"Once"];if(c){if(!t.emitted)t.emitted={};else if(t.emitted[a])return;t.emitted[a]=!0,It(c,t,6,r)}}const Hd=new WeakMap;function zl(t,e,s=!1){const n=s?Hd:e.emitsCache,r=n.get(t);if(r!==void 0)return r;const i=t.emits;let o={},a=!1;if(!ae(t)){const l=c=>{const u=zl(c,e,!0);u&&(a=!0,Me(o,u))};!s&&e.mixins.length&&e.mixins.forEach(l),t.extends&&l(t.extends),t.mixins&&t.mixins.forEach(l)}return!i&&!a?(ke(t)&&n.set(t,null),null):(ie(i)?i.forEach(l=>o[l]=null):Me(o,i),ke(t)&&n.set(t,o),o)}function jr(t,e){return!t||!Tr(e)?!1:(e=e.slice(2).replace(/Once$/,""),ye(t,e[0].toLowerCase()+e.slice(1))||ye(t,Os(e))||ye(t,e))}function Ro(t){const{type:e,vnode:s,proxy:n,withProxy:r,propsOptions:[i],slots:o,attrs:a,emit:l,render:c,renderCache:u,props:d,data:f,setupState:h,ctx:v,inheritAttrs:y}=t,E=fr(t);let S,m;try{if(s.shapeFlag&4){const k=r||n,A=k;S=Pt(c.call(A,k,u,d,h,f,v)),m=a}else{const k=e;S=Pt(k.length>1?k(d,{attrs:a,slots:o,emit:l}):k(d,null)),m=e.props?a:Vd(a)}}catch(k){kn.length=0,Rr(k,t,1),S=ve(Ye)}let g=S;if(m&&y!==!1){const k=Object.keys(m),{shapeFlag:A}=g;k.length&&A&7&&(i&&k.some(Hi)&&(m=Kd(m,i)),g=cs(g,m,!1,!0))}return s.dirs&&(g=cs(g,null,!1,!0),g.dirs=g.dirs?g.dirs.concat(s.dirs):s.dirs),s.transition&&On(g,s.transition),S=g,fr(E),S}const Vd=t=>{let e;for(const s in t)(s==="class"||s==="style"||Tr(s))&&((e||(e={}))[s]=t[s]);return e},Kd=(t,e)=>{const s={};for(const n in t)(!Hi(n)||!(n.slice(9)in e))&&(s[n]=t[n]);return s};function Wd(t,e,s){const{props:n,children:r,component:i}=t,{props:o,children:a,patchFlag:l}=e,c=i.emitsOptions;if(e.dirs||e.transition)return!0;if(s&&l>=0){if(l&1024)return!0;if(l&16)return n?$o(n,o,c):!!o;if(l&8){const u=e.dynamicProps;for(let d=0;d<u.length;d++){const f=u[d];if(o[f]!==n[f]&&!jr(c,f))return!0}}}else return(r||a)&&(!a||!a.$stable)?!0:n===o?!1:n?o?$o(n,o,c):!0:!!o;return!1}function $o(t,e,s){const n=Object.keys(e);if(n.length!==Object.keys(t).length)return!0;for(let r=0;r<n.length;r++){const i=n[r];if(e[i]!==t[i]&&!jr(s,i))return!0}return!1}function zd({vnode:t,parent:e},s){for(;e;){const n=e.subTree;if(n.suspense&&n.suspense.activeBranch===t&&(n.el=t.el),n===t)(t=e.vnode).el=s,e=e.parent;else break}}const Gl={},Jl=()=>Object.create(Gl),Zl=t=>Object.getPrototypeOf(t)===Gl;function Gd(t,e,s,n=!1){const r={},i=Jl();t.propsDefaults=Object.create(null),Ql(t,e,r,i);for(const o in t.propsOptions[0])o in r||(r[o]=void 0);s?t.props=n?r:Sl(r):t.type.props?t.props=r:t.props=i,t.attrs=i}function Jd(t,e,s,n){const{props:r,attrs:i,vnode:{patchFlag:o}}=t,a=me(r),[l]=t.propsOptions;let c=!1;if((n||o>0)&&!(o&16)){if(o&8){const u=t.vnode.dynamicProps;for(let d=0;d<u.length;d++){let f=u[d];if(jr(t.emitsOptions,f))continue;const h=e[f];if(l)if(ye(i,f))h!==i[f]&&(i[f]=h,c=!0);else{const v=yt(f);r[v]=ki(l,a,v,h,t,!1)}else h!==i[f]&&(i[f]=h,c=!0)}}}else{Ql(t,e,r,i)&&(c=!0);let u;for(const d in a)(!e||!ye(e,d)&&((u=Os(d))===d||!ye(e,u)))&&(l?s&&(s[d]!==void 0||s[u]!==void 0)&&(r[d]=ki(l,a,d,void 0,t,!0)):delete r[d]);if(i!==a)for(const d in i)(!e||!ye(e,d))&&(delete i[d],c=!0)}c&&Vt(t.attrs,"set","")}function Ql(t,e,s,n){const[r,i]=t.propsOptions;let o=!1,a;if(e)for(let l in e){if(vn(l))continue;const c=e[l];let u;r&&ye(r,u=yt(l))?!i||!i.includes(u)?s[u]=c:(a||(a={}))[u]=c:jr(t.emitsOptions,l)||(!(l in n)||c!==n[l])&&(n[l]=c,o=!0)}if(i){const l=me(s),c=a||Se;for(let u=0;u<i.length;u++){const d=i[u];s[d]=ki(r,l,d,c[d],t,!ye(c,d))}}return o}function ki(t,e,s,n,r,i){const o=t[s];if(o!=null){const a=ye(o,"default");if(a&&n===void 0){const l=o.default;if(o.type!==Function&&!o.skipFactory&&ae(l)){const{propsDefaults:c}=r;if(s in c)n=c[s];else{const u=Mn(r);n=c[s]=l.call(null,e),u()}}else n=l;r.ce&&r.ce._setProp(s,n)}o[0]&&(i&&!a?n=!1:o[1]&&(n===""||n===Os(s))&&(n=!0))}return n}const Zd=new WeakMap;function Yl(t,e,s=!1){const n=s?Zd:e.propsCache,r=n.get(t);if(r)return r;const i=t.props,o={},a=[];let l=!1;if(!ae(t)){const u=d=>{l=!0;const[f,h]=Yl(d,e,!0);Me(o,f),h&&a.push(...h)};!s&&e.mixins.length&&e.mixins.forEach(u),t.extends&&u(t.extends),t.mixins&&t.mixins.forEach(u)}if(!i&&!l)return ke(t)&&n.set(t,Vs),Vs;if(ie(i))for(let u=0;u<i.length;u++){const d=yt(i[u]);Po(d)&&(o[d]=Se)}else if(i)for(const u in i){const d=yt(u);if(Po(d)){const f=i[u],h=o[d]=ie(f)||ae(f)?{type:f}:Me({},f),v=h.type;let y=!1,E=!0;if(ie(v))for(let S=0;S<v.length;++S){const m=v[S],g=ae(m)&&m.name;if(g==="Boolean"){y=!0;break}else g==="String"&&(E=!1)}else y=ae(v)&&v.name==="Boolean";h[0]=y,h[1]=E,(y||ye(h,"default"))&&a.push(d)}}const c=[o,a];return ke(t)&&n.set(t,c),c}function Po(t){return t[0]!=="$"&&!vn(t)}const to=t=>t==="_"||t==="_ctx"||t==="$stable",so=t=>ie(t)?t.map(Pt):[Pt(t)],Qd=(t,e,s)=>{if(e._n)return e;const n=Be((...r)=>so(e(...r)),s);return n._c=!1,n},Xl=(t,e,s)=>{const n=t._ctx;for(const r in t){if(to(r))continue;const i=t[r];if(ae(i))e[r]=Qd(r,i,n);else if(i!=null){const o=so(i);e[r]=()=>o}}},ec=(t,e)=>{const s=so(e);t.slots.default=()=>s},tc=(t,e,s)=>{for(const n in e)(s||!to(n))&&(t[n]=e[n])},Yd=(t,e,s)=>{const n=t.slots=Jl();if(t.vnode.shapeFlag&32){const r=e._;r?(tc(n,e,s),s&&il(n,"_",r,!0)):Xl(e,n)}else e&&ec(t,e)},Xd=(t,e,s)=>{const{vnode:n,slots:r}=t;let i=!0,o=Se;if(n.shapeFlag&32){const a=e._;a?s&&a===1?i=!1:tc(r,e,s):(i=!e.$stable,Xl(e,r)),o=e}else e&&(ec(t,e),o={default:1});if(i)for(const a in r)!to(a)&&o[a]==null&&delete r[a]},at=rh;function eh(t){return th(t)}function th(t,e){const s=Or();s.__VUE__=!0;const{insert:n,remove:r,patchProp:i,createElement:o,createText:a,createComment:l,setText:c,setElementText:u,parentNode:d,nextSibling:f,setScopeId:h=Nt,insertStaticContent:v}=t,y=(_,w,T,$=null,N=null,C=null,V=void 0,H=null,F=!!w.dynamicChildren)=>{if(_===w)return;_&&!bs(_,w)&&($=P(_),Fe(_,N,C,!0),_=null),w.patchFlag===-2&&(F=!1,w.dynamicChildren=null);const{type:L,ref:ne,shapeFlag:W}=w;switch(L){case Nr:E(_,w,T,$);break;case Ye:S(_,w,T,$);break;case or:_==null&&m(w,T,$,V);break;case de:j(_,w,T,$,N,C,V,H,F);break;default:W&1?A(_,w,T,$,N,C,V,H,F):W&6?X(_,w,T,$,N,C,V,H,F):(W&64||W&128)&&L.process(_,w,T,$,N,C,V,H,F,ee)}ne!=null&&N?yn(ne,_&&_.ref,C,w||_,!w):ne==null&&_&&_.ref!=null&&yn(_.ref,null,C,_,!0)},E=(_,w,T,$)=>{if(_==null)n(w.el=a(w.children),T,$);else{const N=w.el=_.el;w.children!==_.children&&c(N,w.children)}},S=(_,w,T,$)=>{_==null?n(w.el=l(w.children||""),T,$):w.el=_.el},m=(_,w,T,$)=>{[_.el,_.anchor]=v(_.children,w,T,$,_.el,_.anchor)},g=({el:_,anchor:w},T,$)=>{let N;for(;_&&_!==w;)N=f(_),n(_,T,$),_=N;n(w,T,$)},k=({el:_,anchor:w})=>{let T;for(;_&&_!==w;)T=f(_),r(_),_=T;r(w)},A=(_,w,T,$,N,C,V,H,F)=>{if(w.type==="svg"?V="svg":w.type==="math"&&(V="mathml"),_==null)U(w,T,$,N,C,V,H,F);else{const L=_.el&&_.el._isVueCE?_.el:null;try{L&&L._beginPatch(),q(_,w,N,C,V,H,F)}finally{L&&L._endPatch()}}},U=(_,w,T,$,N,C,V,H)=>{let F,L;const{props:ne,shapeFlag:W,transition:te,dirs:oe}=_;if(F=_.el=o(_.type,C,ne&&ne.is,ne),W&8?u(F,_.children):W&16&&Y(_.children,F,null,$,N,Jr(_,C),V,H),oe&&hs(_,null,$,"created"),z(F,_,_.scopeId,V,$),ne){for(const Ee in ne)Ee!=="value"&&!vn(Ee)&&i(F,Ee,null,ne[Ee],C,$);"value"in ne&&i(F,"value",null,ne.value,C),(L=ne.onVnodeBeforeMount)&&Rt(L,$,_)}oe&&hs(_,null,$,"beforeMount");const ge=sh(N,te);ge&&te.beforeEnter(F),n(F,w,T),((L=ne&&ne.onVnodeMounted)||ge||oe)&&at(()=>{L&&Rt(L,$,_),ge&&te.enter(F),oe&&hs(_,null,$,"mounted")},N)},z=(_,w,T,$,N)=>{if(T&&h(_,T),$)for(let C=0;C<$.length;C++)h(_,$[C]);if(N){let C=N.subTree;if(w===C||rc(C.type)&&(C.ssContent===w||C.ssFallback===w)){const V=N.vnode;z(_,V,V.scopeId,V.slotScopeIds,N.parent)}}},Y=(_,w,T,$,N,C,V,H,F=0)=>{for(let L=F;L<_.length;L++){const ne=_[L]=H?rs(_[L]):Pt(_[L]);y(null,ne,w,T,$,N,C,V,H)}},q=(_,w,T,$,N,C,V)=>{const H=w.el=_.el;let{patchFlag:F,dynamicChildren:L,dirs:ne}=w;F|=_.patchFlag&16;const W=_.props||Se,te=w.props||Se;let oe;if(T&&fs(T,!1),(oe=te.onVnodeBeforeUpdate)&&Rt(oe,T,w,_),ne&&hs(w,_,T,"beforeUpdate"),T&&fs(T,!0),(W.innerHTML&&te.innerHTML==null||W.textContent&&te.textContent==null)&&u(H,""),L?Z(_.dynamicChildren,L,H,T,$,Jr(w,N),C):V||fe(_,w,H,null,T,$,Jr(w,N),C,!1),F>0){if(F&16)D(H,W,te,T,N);else if(F&2&&W.class!==te.class&&i(H,"class",null,te.class,N),F&4&&i(H,"style",W.style,te.style,N),F&8){const ge=w.dynamicProps;for(let Ee=0;Ee<ge.length;Ee++){const be=ge[Ee],tt=W[be],st=te[be];(st!==tt||be==="value")&&i(H,be,tt,st,N,T)}}F&1&&_.children!==w.children&&u(H,w.children)}else!V&&L==null&&D(H,W,te,T,N);((oe=te.onVnodeUpdated)||ne)&&at(()=>{oe&&Rt(oe,T,w,_),ne&&hs(w,_,T,"updated")},$)},Z=(_,w,T,$,N,C,V)=>{for(let H=0;H<w.length;H++){const F=_[H],L=w[H],ne=F.el&&(F.type===de||!bs(F,L)||F.shapeFlag&198)?d(F.el):T;y(F,L,ne,null,$,N,C,V,!0)}},D=(_,w,T,$,N)=>{if(w!==T){if(w!==Se)for(const C in w)!vn(C)&&!(C in T)&&i(_,C,w[C],null,N,$);for(const C in T){if(vn(C))continue;const V=T[C],H=w[C];V!==H&&C!=="value"&&i(_,C,H,V,N,$)}"value"in T&&i(_,"value",w.value,T.value,N)}},j=(_,w,T,$,N,C,V,H,F)=>{const L=w.el=_?_.el:a(""),ne=w.anchor=_?_.anchor:a("");let{patchFlag:W,dynamicChildren:te,slotScopeIds:oe}=w;oe&&(H=H?H.concat(oe):oe),_==null?(n(L,T,$),n(ne,T,$),Y(w.children||[],T,ne,N,C,V,H,F)):W>0&&W&64&&te&&_.dynamicChildren?(Z(_.dynamicChildren,te,T,N,C,V,H),(w.key!=null||N&&w===N.subTree)&&sc(_,w,!0)):fe(_,w,T,ne,N,C,V,H,F)},X=(_,w,T,$,N,C,V,H,F)=>{w.slotScopeIds=H,_==null?w.shapeFlag&512?N.ctx.activate(w,T,$,V,F):ce(w,T,$,N,C,V,F):le(_,w,F)},ce=(_,w,T,$,N,C,V)=>{const H=_.component=hh(_,$,N);if($r(_)&&(H.ctx.renderer=ee),fh(H,!1,V),H.asyncDep){if(N&&N.registerDep(H,ue,V),!_.el){const F=H.subTree=ve(Ye);S(null,F,w,T),_.placeholder=F.el}}else ue(H,_,w,T,N,C,V)},le=(_,w,T)=>{const $=w.component=_.component;if(Wd(_,w,T))if($.asyncDep&&!$.asyncResolved){he($,w,T);return}else $.next=w,$.update();else w.el=_.el,$.vnode=w},ue=(_,w,T,$,N,C,V)=>{const H=()=>{if(_.isMounted){let{next:W,bu:te,u:oe,parent:ge,vnode:Ee}=_;{const Ot=nc(_);if(Ot){W&&(W.el=Ee.el,he(_,W,V)),Ot.asyncDep.then(()=>{_.isUnmounted||H()});return}}let be=W,tt;fs(_,!1),W?(W.el=Ee.el,he(_,W,V)):W=Ee,te&&rr(te),(tt=W.props&&W.props.onVnodeBeforeUpdate)&&Rt(tt,ge,W,Ee),fs(_,!0);const st=Ro(_),At=_.subTree;_.subTree=st,y(At,st,d(At.el),P(At),_,N,C),W.el=st.el,be===null&&zd(_,st.el),oe&&at(oe,N),(tt=W.props&&W.props.onVnodeUpdated)&&at(()=>Rt(tt,ge,W,Ee),N)}else{let W;const{el:te,props:oe}=w,{bm:ge,m:Ee,parent:be,root:tt,type:st}=_,At=bn(w);fs(_,!1),ge&&rr(ge),!At&&(W=oe&&oe.onVnodeBeforeMount)&&Rt(W,be,w),fs(_,!0);{tt.ce&&tt.ce._def.shadowRoot!==!1&&tt.ce._injectChildStyle(st);const Ot=_.subTree=Ro(_);y(null,Ot,T,$,_,N,C),w.el=Ot.el}if(Ee&&at(Ee,N),!At&&(W=oe&&oe.onVnodeMounted)){const Ot=w;at(()=>Rt(W,be,Ot),N)}(w.shapeFlag&256||be&&bn(be.vnode)&&be.vnode.shapeFlag&256)&&_.a&&at(_.a,N),_.isMounted=!0,w=T=$=null}};_.scope.on();const F=_.effect=new cl(H);_.scope.off();const L=_.update=F.run.bind(F),ne=_.job=F.runIfDirty.bind(F);ne.i=_,ne.id=_.uid,F.scheduler=()=>eo(ne),fs(_,!0),L()},he=(_,w,T)=>{w.component=_;const $=_.vnode.props;_.vnode=w,_.next=null,Jd(_,w.props,$,T),Xd(_,w.children,T),Wt(),So(_),zt()},fe=(_,w,T,$,N,C,V,H,F=!1)=>{const L=_&&_.children,ne=_?_.shapeFlag:0,W=w.children,{patchFlag:te,shapeFlag:oe}=w;if(te>0){if(te&128){rt(L,W,T,$,N,C,V,H,F);return}else if(te&256){Ue(L,W,T,$,N,C,V,H,F);return}}oe&8?(ne&16&&gt(L,N,C),W!==L&&u(T,W)):ne&16?oe&16?rt(L,W,T,$,N,C,V,H,F):gt(L,N,C,!0):(ne&8&&u(T,""),oe&16&&Y(W,T,$,N,C,V,H,F))},Ue=(_,w,T,$,N,C,V,H,F)=>{_=_||Vs,w=w||Vs;const L=_.length,ne=w.length,W=Math.min(L,ne);let te;for(te=0;te<W;te++){const oe=w[te]=F?rs(w[te]):Pt(w[te]);y(_[te],oe,T,null,N,C,V,H,F)}L>ne?gt(_,N,C,!0,!1,W):Y(w,T,$,N,C,V,H,F,W)},rt=(_,w,T,$,N,C,V,H,F)=>{let L=0;const ne=w.length;let W=_.length-1,te=ne-1;for(;L<=W&&L<=te;){const oe=_[L],ge=w[L]=F?rs(w[L]):Pt(w[L]);if(bs(oe,ge))y(oe,ge,T,null,N,C,V,H,F);else break;L++}for(;L<=W&&L<=te;){const oe=_[W],ge=w[te]=F?rs(w[te]):Pt(w[te]);if(bs(oe,ge))y(oe,ge,T,null,N,C,V,H,F);else break;W--,te--}if(L>W){if(L<=te){const oe=te+1,ge=oe<ne?w[oe].el:$;for(;L<=te;)y(null,w[L]=F?rs(w[L]):Pt(w[L]),T,ge,N,C,V,H,F),L++}}else if(L>te)for(;L<=W;)Fe(_[L],N,C,!0),L++;else{const oe=L,ge=L,Ee=new Map;for(L=ge;L<=te;L++){const it=w[L]=F?rs(w[L]):Pt(w[L]);it.key!=null&&Ee.set(it.key,L)}let be,tt=0;const st=te-ge+1;let At=!1,Ot=0;const on=new Array(st);for(L=0;L<st;L++)on[L]=0;for(L=oe;L<=W;L++){const it=_[L];if(tt>=st){Fe(it,N,C,!0);continue}let Ct;if(it.key!=null)Ct=Ee.get(it.key);else for(be=ge;be<=te;be++)if(on[be-ge]===0&&bs(it,w[be])){Ct=be;break}Ct===void 0?Fe(it,N,C,!0):(on[Ct-ge]=L+1,Ct>=Ot?Ot=Ct:At=!0,y(it,w[Ct],T,null,N,C,V,H,F),tt++)}const vo=At?nh(on):Vs;for(be=vo.length-1,L=st-1;L>=0;L--){const it=ge+L,Ct=w[it],mo=w[it+1],_o=it+1<ne?mo.el||mo.placeholder:$;on[L]===0?y(null,Ct,T,_o,N,C,V,H,F):At&&(be<0||L!==vo[be]?pt(Ct,T,_o,2):be--)}}},pt=(_,w,T,$,N=null)=>{const{el:C,type:V,transition:H,children:F,shapeFlag:L}=_;if(L&6){pt(_.component.subTree,w,T,$);return}if(L&128){_.suspense.move(w,T,$);return}if(L&64){V.move(_,w,T,ee);return}if(V===de){n(C,w,T);for(let W=0;W<F.length;W++)pt(F[W],w,T,$);n(_.anchor,w,T);return}if(V===or){g(_,w,T);return}if($!==2&&L&1&&H)if($===0)H.beforeEnter(C),n(C,w,T),at(()=>H.enter(C),N);else{const{leave:W,delayLeave:te,afterLeave:oe}=H,ge=()=>{_.ctx.isUnmounted?r(C):n(C,w,T)},Ee=()=>{C._isLeaving&&C[Ht](!0),W(C,()=>{ge(),oe&&oe()})};te?te(C,ge,Ee):Ee()}else n(C,w,T)},Fe=(_,w,T,$=!1,N=!1)=>{const{type:C,props:V,ref:H,children:F,dynamicChildren:L,shapeFlag:ne,patchFlag:W,dirs:te,cacheIndex:oe}=_;if(W===-2&&(N=!1),H!=null&&(Wt(),yn(H,null,T,_,!0),zt()),oe!=null&&(w.renderCache[oe]=void 0),ne&256){w.ctx.deactivate(_);return}const ge=ne&1&&te,Ee=!bn(_);let be;if(Ee&&(be=V&&V.onVnodeBeforeUnmount)&&Rt(be,w,_),ne&6)ds(_.component,T,$);else{if(ne&128){_.suspense.unmount(T,$);return}ge&&hs(_,null,w,"beforeUnmount"),ne&64?_.type.remove(_,w,T,ee,$):L&&!L.hasOnce&&(C!==de||W>0&&W&64)?gt(L,w,T,!1,!0):(C===de&&W&384||!N&&ne&16)&&gt(F,w,T),$&&Yt(_)}(Ee&&(be=V&&V.onVnodeUnmounted)||ge)&&at(()=>{be&&Rt(be,w,_),ge&&hs(_,null,w,"unmounted")},T)},Yt=_=>{const{type:w,el:T,anchor:$,transition:N}=_;if(w===de){$s(T,$);return}if(w===or){k(_);return}const C=()=>{r(T),N&&!N.persisted&&N.afterLeave&&N.afterLeave()};if(_.shapeFlag&1&&N&&!N.persisted){const{leave:V,delayLeave:H}=N,F=()=>V(T,C);H?H(_.el,C,F):F()}else C()},$s=(_,w)=>{let T;for(;_!==w;)T=f(_),r(_),_=T;r(w)},ds=(_,w,T)=>{const{bum:$,scope:N,job:C,subTree:V,um:H,m:F,a:L}=_;jo(F),jo(L),$&&rr($),N.stop(),C&&(C.flags|=8,Fe(V,_,w,T)),H&&at(H,w),at(()=>{_.isUnmounted=!0},w)},gt=(_,w,T,$=!1,N=!1,C=0)=>{for(let V=C;V<_.length;V++)Fe(_[V],w,T,$,N)},P=_=>{if(_.shapeFlag&6)return P(_.component.subTree);if(_.shapeFlag&128)return _.suspense.next();const w=f(_.anchor||_.el),T=w&&w[fd];return T?f(T):w};let J=!1;const K=(_,w,T)=>{_==null?w._vnode&&Fe(w._vnode,null,null,!0):y(w._vnode||null,_,w,null,null,null,T),w._vnode=_,J||(J=!0,So(),Ol(),J=!1)},ee={p:y,um:Fe,m:pt,r:Yt,mt:ce,mc:Y,pc:fe,pbc:Z,n:P,o:t};return{render:K,hydrate:void 0,createApp:Dd(K)}}function Jr({type:t,props:e},s){return s==="svg"&&t==="foreignObject"||s==="mathml"&&t==="annotation-xml"&&e&&e.encoding&&e.encoding.includes("html")?void 0:s}function fs({effect:t,job:e},s){s?(t.flags|=32,e.flags|=4):(t.flags&=-33,e.flags&=-5)}function sh(t,e){return(!t||t&&!t.pendingBranch)&&e&&!e.persisted}function sc(t,e,s=!1){const n=t.children,r=e.children;if(ie(n)&&ie(r))for(let i=0;i<n.length;i++){const o=n[i];let a=r[i];a.shapeFlag&1&&!a.dynamicChildren&&((a.patchFlag<=0||a.patchFlag===32)&&(a=r[i]=rs(r[i]),a.el=o.el),!s&&a.patchFlag!==-2&&sc(o,a)),a.type===Nr&&a.patchFlag!==-1&&(a.el=o.el),a.type===Ye&&!a.el&&(a.el=o.el)}}function nh(t){const e=t.slice(),s=[0];let n,r,i,o,a;const l=t.length;for(n=0;n<l;n++){const c=t[n];if(c!==0){if(r=s[s.length-1],t[r]<c){e[n]=r,s.push(n);continue}for(i=0,o=s.length-1;i<o;)a=i+o>>1,t[s[a]]<c?i=a+1:o=a;c<t[s[i]]&&(i>0&&(e[n]=s[i-1]),s[i]=n)}}for(i=s.length,o=s[i-1];i-- >0;)s[i]=o,o=e[o];return s}function nc(t){const e=t.subTree.component;if(e)return e.asyncDep&&!e.asyncResolved?e:nc(e)}function jo(t){if(t)for(let e=0;e<t.length;e++)t[e].flags|=8}const rc=t=>t.__isSuspense;function rh(t,e){e&&e.pendingBranch?ie(t)?e.effects.push(...t):e.effects.push(t):hd(t)}const de=Symbol.for("v-fgt"),Nr=Symbol.for("v-txt"),Ye=Symbol.for("v-cmt"),or=Symbol.for("v-stc"),kn=[];let ht=null;function b(t=!1){kn.push(ht=t?null:[])}function ih(){kn.pop(),ht=kn[kn.length-1]||null}let Cn=1;function vr(t,e=!1){Cn+=t,t<0&&ht&&e&&(ht.hasOnce=!0)}function ic(t){return t.dynamicChildren=Cn>0?ht||Vs:null,ih(),Cn>0&&ht&&ht.push(t),t}function I(t,e,s,n,r,i){return ic(p(t,e,s,n,r,i,!0))}function se(t,e,s,n,r){return ic(ve(t,e,s,n,r,!0))}function mr(t){return t?t.__v_isVNode===!0:!1}function bs(t,e){return t.type===e.type&&t.key===e.key}const oc=({key:t})=>t??null,ar=({ref:t,ref_key:e,ref_for:s})=>(typeof t=="number"&&(t=""+t),t!=null?Pe(t)||ze(t)||ae(t)?{i:dt,r:t,k:e,f:!!s}:t:null);function p(t,e=null,s=null,n=0,r=null,i=t===de?0:1,o=!1,a=!1){const l={__v_isVNode:!0,__v_skip:!0,type:t,props:e,key:e&&oc(e),ref:e&&ar(e),scopeId:Rl,slotScopeIds:null,children:s,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:i,patchFlag:n,dynamicProps:r,dynamicChildren:null,appContext:null,ctx:dt};return a?(no(l,s),i&128&&t.normalize(l)):s&&(l.shapeFlag|=Pe(s)?8:16),Cn>0&&!o&&ht&&(l.patchFlag>0||i&6)&&l.patchFlag!==32&&ht.push(l),l}const ve=oh;function oh(t,e=null,s=null,n=0,r=null,i=!1){if((!t||t===Ad)&&(t=Ye),mr(t)){const a=cs(t,e,!0);return s&&no(a,s),Cn>0&&!i&&ht&&(a.shapeFlag&6?ht[ht.indexOf(t)]=a:ht.push(a)),a.patchFlag=-2,a}if(_h(t)&&(t=t.__vccOpts),e){e=ah(e);let{class:a,style:l}=e;a&&!Pe(a)&&(e.class=Ae(a)),ke(l)&&(Xi(l)&&!ie(l)&&(l=Me({},l)),e.style=Ge(l))}const o=Pe(t)?1:rc(t)?128:$l(t)?64:ke(t)?4:ae(t)?2:0;return p(t,e,s,n,r,o,i,!0)}function ah(t){return t?Xi(t)||Zl(t)?Me({},t):t:null}function cs(t,e,s=!1,n=!1){const{props:r,ref:i,patchFlag:o,children:a,transition:l}=t,c=e?ch(r||{},e):r,u={__v_isVNode:!0,__v_skip:!0,type:t.type,props:c,key:c&&oc(c),ref:e&&e.ref?s&&i?ie(i)?i.concat(ar(e)):[i,ar(e)]:ar(e):i,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:a,target:t.target,targetStart:t.targetStart,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:e&&t.type!==de?o===-1?16:o|16:o,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:l,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&cs(t.ssContent),ssFallback:t.ssFallback&&cs(t.ssFallback),placeholder:t.placeholder,el:t.el,anchor:t.anchor,ctx:t.ctx,ce:t.ce};return l&&n&&On(u,l.clone(u)),u}function we(t=" ",e=0){return ve(Nr,null,t,e)}function lh(t,e){const s=ve(or,null,t);return s.staticCount=e,s}function M(t="",e=!1){return e?(b(),se(Ye,null,t)):ve(Ye,null,t)}function Pt(t){return t==null||typeof t=="boolean"?ve(Ye):ie(t)?ve(de,null,t.slice()):mr(t)?rs(t):ve(Nr,null,String(t))}function rs(t){return t.el===null&&t.patchFlag!==-1||t.memo?t:cs(t)}function no(t,e){let s=0;const{shapeFlag:n}=t;if(e==null)e=null;else if(ie(e))s=16;else if(typeof e=="object")if(n&65){const r=e.default;r&&(r._c&&(r._d=!1),no(t,r()),r._c&&(r._d=!0));return}else{s=32;const r=e._;!r&&!Zl(e)?e._ctx=dt:r===3&&dt&&(dt.slots._===1?e._=1:(e._=2,t.patchFlag|=1024))}else ae(e)?(e={default:e,_ctx:dt},s=32):(e=String(e),n&64?(s=16,e=[we(e)]):s=8);t.children=e,t.shapeFlag|=s}function ch(...t){const e={};for(let s=0;s<t.length;s++){const n=t[s];for(const r in n)if(r==="class")e.class!==n.class&&(e.class=Ae([e.class,n.class]));else if(r==="style")e.style=Ge([e.style,n.style]);else if(Tr(r)){const i=e[r],o=n[r];o&&i!==o&&!(ie(i)&&i.includes(o))&&(e[r]=i?[].concat(i,o):o)}else r!==""&&(e[r]=n[r])}return e}function Rt(t,e,s,n=null){It(t,e,7,[s,n])}const uh=Vl();let dh=0;function hh(t,e,s){const n=t.type,r=(e?e.appContext:t.appContext)||uh,i={uid:dh++,vnode:t,type:n,parent:e,appContext:r,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new Lu(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(r.provides),ids:e?e.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:Yl(n,r),emitsOptions:zl(n,r),emit:null,emitted:null,propsDefaults:Se,inheritAttrs:n.inheritAttrs,ctx:Se,data:Se,props:Se,attrs:Se,slots:Se,refs:Se,setupState:Se,setupContext:null,suspense:s,suspenseId:s?s.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return i.ctx={_:i},i.root=e?e.root:i,i.emit=qd.bind(null,i),t.ce&&t.ce(i),i}let Ke=null;const ac=()=>Ke||dt;let _r,Si;{const t=Or(),e=(s,n)=>{let r;return(r=t[s])||(r=t[s]=[]),r.push(n),i=>{r.length>1?r.forEach(o=>o(i)):r[0](i)}};_r=e("__VUE_INSTANCE_SETTERS__",s=>Ke=s),Si=e("__VUE_SSR_SETTERS__",s=>Rn=s)}const Mn=t=>{const e=Ke;return _r(t),t.scope.on(),()=>{t.scope.off(),_r(e)}},No=()=>{Ke&&Ke.scope.off(),_r(null)};function lc(t){return t.vnode.shapeFlag&4}let Rn=!1;function fh(t,e=!1,s=!1){e&&Si(e);const{props:n,children:r}=t.vnode,i=lc(t);Gd(t,n,i,e),Yd(t,r,s||e);const o=i?ph(t,e):void 0;return e&&Si(!1),o}function ph(t,e){const s=t.type;t.accessCache=Object.create(null),t.proxy=new Proxy(t.ctx,Cd);const{setup:n}=s;if(n){Wt();const r=t.setupContext=n.length>1?vh(t):null,i=Mn(t),o=Bn(n,t,0,[t.props,r]),a=sl(o);if(zt(),i(),(a||t.sp)&&!bn(t)&&Bl(t),a){if(o.then(No,No),e)return o.then(l=>{Lo(t,l)}).catch(l=>{Rr(l,t,0)});t.asyncDep=o}else Lo(t,o)}else cc(t)}function Lo(t,e,s){ae(e)?t.type.__ssrInlineRender?t.ssrRender=e:t.render=e:ke(e)&&(t.setupState=Il(e)),cc(t)}function cc(t,e,s){const n=t.type;t.render||(t.render=n.render||Nt);{const r=Mn(t);Wt();try{Rd(t)}finally{zt(),r()}}}const gh={get(t,e){return Ve(t,"get",""),t[e]}};function vh(t){const e=s=>{t.exposed=s||{}};return{attrs:new Proxy(t.attrs,gh),slots:t.slots,emit:t.emit,expose:e}}function Lr(t){return t.exposed?t.exposeProxy||(t.exposeProxy=new Proxy(Il(sd(t.exposed)),{get(e,s){if(s in e)return e[s];if(s in wn)return wn[s](t)},has(e,s){return s in e||s in wn}})):t.proxy}function mh(t,e=!0){return ae(t)?t.displayName||t.name:t.name||e&&t.__name}function _h(t){return ae(t)&&"__vccOpts"in t}const Ne=(t,e)=>ad(t,e,Rn);function ro(t,e,s){try{vr(-1);const n=arguments.length;return n===2?ke(e)&&!ie(e)?mr(e)?ve(t,null,[e]):ve(t,e):ve(t,null,e):(n>3?s=Array.prototype.slice.call(arguments,2):n===3&&mr(s)&&(s=[s]),ve(t,e,s))}finally{vr(1)}}const yh="3.5.25";let Ei;const Do=typeof window<"u"&&window.trustedTypes;if(Do)try{Ei=Do.createPolicy("vue",{createHTML:t=>t})}catch{}const uc=Ei?t=>Ei.createHTML(t):t=>t,bh="http://www.w3.org/2000/svg",wh="http://www.w3.org/1998/Math/MathML",Ft=typeof document<"u"?document:null,Uo=Ft&&Ft.createElement("template"),kh={insert:(t,e,s)=>{e.insertBefore(t,s||null)},remove:t=>{const e=t.parentNode;e&&e.removeChild(t)},createElement:(t,e,s,n)=>{const r=e==="svg"?Ft.createElementNS(bh,t):e==="mathml"?Ft.createElementNS(wh,t):s?Ft.createElement(t,{is:s}):Ft.createElement(t);return t==="select"&&n&&n.multiple!=null&&r.setAttribute("multiple",n.multiple),r},createText:t=>Ft.createTextNode(t),createComment:t=>Ft.createComment(t),setText:(t,e)=>{t.nodeValue=e},setElementText:(t,e)=>{t.textContent=e},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>Ft.querySelector(t),setScopeId(t,e){t.setAttribute(e,"")},insertStaticContent(t,e,s,n,r,i){const o=s?s.previousSibling:e.lastChild;if(r&&(r===i||r.nextSibling))for(;e.insertBefore(r.cloneNode(!0),s),!(r===i||!(r=r.nextSibling)););else{Uo.innerHTML=uc(n==="svg"?`<svg>${t}</svg>`:n==="mathml"?`<math>${t}</math>`:t);const a=Uo.content;if(n==="svg"||n==="mathml"){const l=a.firstChild;for(;l.firstChild;)a.appendChild(l.firstChild);a.removeChild(l)}e.insertBefore(a,s)}return[o?o.nextSibling:e.firstChild,s?s.previousSibling:e.lastChild]}},Xt="transition",ln="animation",$n=Symbol("_vtc"),dc={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},Sh=Me({},Pl,dc),Eh=t=>(t.displayName="Transition",t.props=Sh,t),Ys=Eh((t,{slots:e})=>ro(vd,Ih(t),e)),ps=(t,e=[])=>{ie(t)?t.forEach(s=>s(...e)):t&&t(...e)},Bo=t=>t?ie(t)?t.some(e=>e.length>1):t.length>1:!1;function Ih(t){const e={};for(const j in t)j in dc||(e[j]=t[j]);if(t.css===!1)return e;const{name:s="v",type:n,duration:r,enterFromClass:i=`${s}-enter-from`,enterActiveClass:o=`${s}-enter-active`,enterToClass:a=`${s}-enter-to`,appearFromClass:l=i,appearActiveClass:c=o,appearToClass:u=a,leaveFromClass:d=`${s}-leave-from`,leaveActiveClass:f=`${s}-leave-active`,leaveToClass:h=`${s}-leave-to`}=t,v=Th(r),y=v&&v[0],E=v&&v[1],{onBeforeEnter:S,onEnter:m,onEnterCancelled:g,onLeave:k,onLeaveCancelled:A,onBeforeAppear:U=S,onAppear:z=m,onAppearCancelled:Y=g}=e,q=(j,X,ce,le)=>{j._enterCancelled=le,gs(j,X?u:a),gs(j,X?c:o),ce&&ce()},Z=(j,X)=>{j._isLeaving=!1,gs(j,d),gs(j,h),gs(j,f),X&&X()},D=j=>(X,ce)=>{const le=j?z:m,ue=()=>q(X,j,ce);ps(le,[X,ue]),Mo(()=>{gs(X,j?l:i),Bt(X,j?u:a),Bo(le)||Fo(X,n,y,ue)})};return Me(e,{onBeforeEnter(j){ps(S,[j]),Bt(j,i),Bt(j,o)},onBeforeAppear(j){ps(U,[j]),Bt(j,l),Bt(j,c)},onEnter:D(!1),onAppear:D(!0),onLeave(j,X){j._isLeaving=!0;const ce=()=>Z(j,X);Bt(j,d),j._enterCancelled?(Bt(j,f),Vo(j)):(Vo(j),Bt(j,f)),Mo(()=>{j._isLeaving&&(gs(j,d),Bt(j,h),Bo(k)||Fo(j,n,E,ce))}),ps(k,[j,ce])},onEnterCancelled(j){q(j,!1,void 0,!0),ps(g,[j])},onAppearCancelled(j){q(j,!0,void 0,!0),ps(Y,[j])},onLeaveCancelled(j){Z(j),ps(A,[j])}})}function Th(t){if(t==null)return null;if(ke(t))return[Zr(t.enter),Zr(t.leave)];{const e=Zr(t);return[e,e]}}function Zr(t){return Au(t)}function Bt(t,e){e.split(/\s+/).forEach(s=>s&&t.classList.add(s)),(t[$n]||(t[$n]=new Set)).add(e)}function gs(t,e){e.split(/\s+/).forEach(n=>n&&t.classList.remove(n));const s=t[$n];s&&(s.delete(e),s.size||(t[$n]=void 0))}function Mo(t){requestAnimationFrame(()=>{requestAnimationFrame(t)})}let xh=0;function Fo(t,e,s,n){const r=t._endId=++xh,i=()=>{r===t._endId&&n()};if(s!=null)return setTimeout(i,s);const{type:o,timeout:a,propCount:l}=Ah(t,e);if(!o)return n();const c=o+"end";let u=0;const d=()=>{t.removeEventListener(c,f),i()},f=h=>{h.target===t&&++u>=l&&d()};setTimeout(()=>{u<l&&d()},a+1),t.addEventListener(c,f)}function Ah(t,e){const s=window.getComputedStyle(t),n=v=>(s[v]||"").split(", "),r=n(`${Xt}Delay`),i=n(`${Xt}Duration`),o=qo(r,i),a=n(`${ln}Delay`),l=n(`${ln}Duration`),c=qo(a,l);let u=null,d=0,f=0;e===Xt?o>0&&(u=Xt,d=o,f=i.length):e===ln?c>0&&(u=ln,d=c,f=l.length):(d=Math.max(o,c),u=d>0?o>c?Xt:ln:null,f=u?u===Xt?i.length:l.length:0);const h=u===Xt&&/\b(?:transform|all)(?:,|$)/.test(n(`${Xt}Property`).toString());return{type:u,timeout:d,propCount:f,hasTransform:h}}function qo(t,e){for(;t.length<e.length;)t=t.concat(t);return Math.max(...e.map((s,n)=>Ho(s)+Ho(t[n])))}function Ho(t){return t==="auto"?0:Number(t.slice(0,-1).replace(",","."))*1e3}function Vo(t){return(t?t.ownerDocument:document).body.offsetHeight}function Oh(t,e,s){const n=t[$n];n&&(e=(e?[e,...n]:[...n]).join(" ")),e==null?t.removeAttribute("class"):s?t.setAttribute("class",e):t.className=e}const yr=Symbol("_vod"),hc=Symbol("_vsh"),Ch={name:"show",beforeMount(t,{value:e},{transition:s}){t[yr]=t.style.display==="none"?"":t.style.display,s&&e?s.beforeEnter(t):cn(t,e)},mounted(t,{value:e},{transition:s}){s&&e&&s.enter(t)},updated(t,{value:e,oldValue:s},{transition:n}){!e!=!s&&(n?e?(n.beforeEnter(t),cn(t,!0),n.enter(t)):n.leave(t,()=>{cn(t,!1)}):cn(t,e))},beforeUnmount(t,{value:e}){cn(t,e)}};function cn(t,e){t.style.display=e?t[yr]:"none",t[hc]=!e}const Rh=Symbol(""),$h=/(?:^|;)\s*display\s*:/;function Ph(t,e,s){const n=t.style,r=Pe(s);let i=!1;if(s&&!r){if(e)if(Pe(e))for(const o of e.split(";")){const a=o.slice(0,o.indexOf(":")).trim();s[a]==null&&lr(n,a,"")}else for(const o in e)s[o]==null&&lr(n,o,"");for(const o in s)o==="display"&&(i=!0),lr(n,o,s[o])}else if(r){if(e!==s){const o=n[Rh];o&&(s+=";"+o),n.cssText=s,i=$h.test(s)}}else e&&t.removeAttribute("style");yr in t&&(t[yr]=i?n.display:"",t[hc]&&(n.display="none"))}const Ko=/\s*!important$/;function lr(t,e,s){if(ie(s))s.forEach(n=>lr(t,e,n));else if(s==null&&(s=""),e.startsWith("--"))t.setProperty(e,s);else{const n=jh(t,e);Ko.test(s)?t.setProperty(Os(n),s.replace(Ko,""),"important"):t[n]=s}}const Wo=["Webkit","Moz","ms"],Qr={};function jh(t,e){const s=Qr[e];if(s)return s;let n=yt(e);if(n!=="filter"&&n in t)return Qr[e]=n;n=Ar(n);for(let r=0;r<Wo.length;r++){const i=Wo[r]+n;if(i in t)return Qr[e]=i}return e}const zo="http://www.w3.org/1999/xlink";function Go(t,e,s,n,r,i=ju(e)){n&&e.startsWith("xlink:")?s==null?t.removeAttributeNS(zo,e.slice(6,e.length)):t.setAttributeNS(zo,e,s):s==null||i&&!ol(s)?t.removeAttribute(e):t.setAttribute(e,i?"":Dt(s)?String(s):s)}function Jo(t,e,s,n,r){if(e==="innerHTML"||e==="textContent"){s!=null&&(t[e]=e==="innerHTML"?uc(s):s);return}const i=t.tagName;if(e==="value"&&i!=="PROGRESS"&&!i.includes("-")){const a=i==="OPTION"?t.getAttribute("value")||"":t.value,l=s==null?t.type==="checkbox"?"on":"":String(s);(a!==l||!("_value"in t))&&(t.value=l),s==null&&t.removeAttribute(e),t._value=s;return}let o=!1;if(s===""||s==null){const a=typeof t[e];a==="boolean"?s=ol(s):s==null&&a==="string"?(s="",o=!0):a==="number"&&(s=0,o=!0)}try{t[e]=s}catch{}o&&t.removeAttribute(r||e)}function ws(t,e,s,n){t.addEventListener(e,s,n)}function Nh(t,e,s,n){t.removeEventListener(e,s,n)}const Zo=Symbol("_vei");function Lh(t,e,s,n,r=null){const i=t[Zo]||(t[Zo]={}),o=i[e];if(n&&o)o.value=n;else{const[a,l]=Dh(e);if(n){const c=i[e]=Mh(n,r);ws(t,a,c,l)}else o&&(Nh(t,a,o,l),i[e]=void 0)}}const Qo=/(?:Once|Passive|Capture)$/;function Dh(t){let e;if(Qo.test(t)){e={};let n;for(;n=t.match(Qo);)t=t.slice(0,t.length-n[0].length),e[n[0].toLowerCase()]=!0}return[t[2]===":"?t.slice(3):Os(t.slice(2)),e]}let Yr=0;const Uh=Promise.resolve(),Bh=()=>Yr||(Uh.then(()=>Yr=0),Yr=Date.now());function Mh(t,e){const s=n=>{if(!n._vts)n._vts=Date.now();else if(n._vts<=s.attached)return;It(Fh(n,s.value),e,5,[n])};return s.value=t,s.attached=Bh(),s}function Fh(t,e){if(ie(e)){const s=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{s.call(t),t._stopped=!0},e.map(n=>r=>!r._stopped&&n&&n(r))}else return e}const Yo=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&t.charCodeAt(2)>96&&t.charCodeAt(2)<123,qh=(t,e,s,n,r,i)=>{const o=r==="svg";e==="class"?Oh(t,n,o):e==="style"?Ph(t,s,n):Tr(e)?Hi(e)||Lh(t,e,s,n,i):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):Hh(t,e,n,o))?(Jo(t,e,n),!t.tagName.includes("-")&&(e==="value"||e==="checked"||e==="selected")&&Go(t,e,n,o,i,e!=="value")):t._isVueCE&&(/[A-Z]/.test(e)||!Pe(n))?Jo(t,yt(e),n,i,e):(e==="true-value"?t._trueValue=n:e==="false-value"&&(t._falseValue=n),Go(t,e,n,o))};function Hh(t,e,s,n){if(n)return!!(e==="innerHTML"||e==="textContent"||e in t&&Yo(e)&&ae(s));if(e==="spellcheck"||e==="draggable"||e==="translate"||e==="autocorrect"||e==="sandbox"&&t.tagName==="IFRAME"||e==="form"||e==="list"&&t.tagName==="INPUT"||e==="type"&&t.tagName==="TEXTAREA")return!1;if(e==="width"||e==="height"){const r=t.tagName;if(r==="IMG"||r==="VIDEO"||r==="CANVAS"||r==="SOURCE")return!1}return Yo(e)&&Pe(s)?!1:e in t}const br=t=>{const e=t.props["onUpdate:modelValue"]||!1;return ie(e)?s=>rr(e,s):e};function Vh(t){t.target.composing=!0}function Xo(t){const e=t.target;e.composing&&(e.composing=!1,e.dispatchEvent(new Event("input")))}const Js=Symbol("_assign");function ea(t,e,s){return e&&(t=t.trim()),s&&(t=Wi(t)),t}const is={created(t,{modifiers:{lazy:e,trim:s,number:n}},r){t[Js]=br(r);const i=n||r.props&&r.props.type==="number";ws(t,e?"change":"input",o=>{o.target.composing||t[Js](ea(t.value,s,i))}),(s||i)&&ws(t,"change",()=>{t.value=ea(t.value,s,i)}),e||(ws(t,"compositionstart",Vh),ws(t,"compositionend",Xo),ws(t,"change",Xo))},mounted(t,{value:e}){t.value=e??""},beforeUpdate(t,{value:e,oldValue:s,modifiers:{lazy:n,trim:r,number:i}},o){if(t[Js]=br(o),t.composing)return;const a=(i||t.type==="number")&&!/^0\d/.test(t.value)?Wi(t.value):t.value,l=e??"";a!==l&&(document.activeElement===t&&t.type!=="range"&&(n&&e===s||r&&t.value.trim()===l)||(t.value=l))}},cr={created(t,{value:e},s){t.checked=ur(e,s.props.value),t[Js]=br(s),ws(t,"change",()=>{t[Js](Kh(t))})},beforeUpdate(t,{value:e,oldValue:s},n){t[Js]=br(n),e!==s&&(t.checked=ur(e,n.props.value))}};function Kh(t){return"_value"in t?t._value:t.value}const Wh=["ctrl","shift","alt","meta"],zh={stop:t=>t.stopPropagation(),prevent:t=>t.preventDefault(),self:t=>t.target!==t.currentTarget,ctrl:t=>!t.ctrlKey,shift:t=>!t.shiftKey,alt:t=>!t.altKey,meta:t=>!t.metaKey,left:t=>"button"in t&&t.button!==0,middle:t=>"button"in t&&t.button!==1,right:t=>"button"in t&&t.button!==2,exact:(t,e)=>Wh.some(s=>t[`${s}Key`]&&!e.includes(s))},Qt=(t,e)=>{const s=t._withMods||(t._withMods={}),n=e.join(".");return s[n]||(s[n]=((r,...i)=>{for(let o=0;o<e.length;o++){const a=zh[e[o]];if(a&&a(r,e))return}return t(r,...i)}))},Gh=Me({patchProp:qh},kh);let ta;function Jh(){return ta||(ta=eh(Gh))}const Zh=((...t)=>{const e=Jh().createApp(...t),{mount:s}=e;return e.mount=n=>{const r=Yh(n);if(!r)return;const i=e._component;!ae(i)&&!i.render&&!i.template&&(i.template=r.innerHTML),r.nodeType===1&&(r.textContent="");const o=s(r,!1,Qh(r));return r instanceof Element&&(r.removeAttribute("v-cloak"),r.setAttribute("data-v-app","")),o},e});function Qh(t){if(t instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&t instanceof MathMLElement)return"mathml"}function Yh(t){return Pe(t)?document.querySelector(t):t}const Xh="/Detectino.png";const Fs=typeof document<"u";function fc(t){return typeof t=="object"||"displayName"in t||"props"in t||"__vccOpts"in t}function ef(t){return t.__esModule||t[Symbol.toStringTag]==="Module"||t.default&&fc(t.default)}const _e=Object.assign;function Xr(t,e){const s={};for(const n in e){const r=e[n];s[n]=Tt(r)?r.map(t):t(r)}return s}const Sn=()=>{},Tt=Array.isArray;function sa(t,e){const s={};for(const n in t)s[n]=n in e?e[n]:t[n];return s}const pc=/#/g,tf=/&/g,sf=/\//g,nf=/=/g,rf=/\?/g,gc=/\+/g,of=/%5B/g,af=/%5D/g,vc=/%5E/g,lf=/%60/g,mc=/%7B/g,cf=/%7C/g,_c=/%7D/g,uf=/%20/g;function io(t){return t==null?"":encodeURI(""+t).replace(cf,"|").replace(of,"[").replace(af,"]")}function df(t){return io(t).replace(mc,"{").replace(_c,"}").replace(vc,"^")}function Ii(t){return io(t).replace(gc,"%2B").replace(uf,"+").replace(pc,"%23").replace(tf,"%26").replace(lf,"`").replace(mc,"{").replace(_c,"}").replace(vc,"^")}function hf(t){return Ii(t).replace(nf,"%3D")}function ff(t){return io(t).replace(pc,"%23").replace(rf,"%3F")}function pf(t){return ff(t).replace(sf,"%2F")}function Pn(t){if(t==null)return null;try{return decodeURIComponent(""+t)}catch{}return""+t}const gf=/\/$/,vf=t=>t.replace(gf,"");function ei(t,e,s="/"){let n,r={},i="",o="";const a=e.indexOf("#");let l=e.indexOf("?");return l=a>=0&&l>a?-1:l,l>=0&&(n=e.slice(0,l),i=e.slice(l,a>0?a:e.length),r=t(i.slice(1))),a>=0&&(n=n||e.slice(0,a),o=e.slice(a,e.length)),n=bf(n??e,s),{fullPath:n+i+o,path:n,query:r,hash:Pn(o)}}function mf(t,e){const s=e.query?t(e.query):"";return e.path+(s&&"?")+s+(e.hash||"")}function na(t,e){return!e||!t.toLowerCase().startsWith(e.toLowerCase())?t:t.slice(e.length)||"/"}function _f(t,e,s){const n=e.matched.length-1,r=s.matched.length-1;return n>-1&&n===r&&Xs(e.matched[n],s.matched[r])&&yc(e.params,s.params)&&t(e.query)===t(s.query)&&e.hash===s.hash}function Xs(t,e){return(t.aliasOf||t)===(e.aliasOf||e)}function yc(t,e){if(Object.keys(t).length!==Object.keys(e).length)return!1;for(const s in t)if(!yf(t[s],e[s]))return!1;return!0}function yf(t,e){return Tt(t)?ra(t,e):Tt(e)?ra(e,t):t===e}function ra(t,e){return Tt(e)?t.length===e.length&&t.every((s,n)=>s===e[n]):t.length===1&&t[0]===e}function bf(t,e){if(t.startsWith("/"))return t;if(!t)return e;const s=e.split("/"),n=t.split("/"),r=n[n.length-1];(r===".."||r===".")&&n.push("");let i=s.length-1,o,a;for(o=0;o<n.length;o++)if(a=n[o],a!==".")if(a==="..")i>1&&i--;else break;return s.slice(0,i).join("/")+"/"+n.slice(o).join("/")}const es={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0};let Ti=(function(t){return t.pop="pop",t.push="push",t})({}),ti=(function(t){return t.back="back",t.forward="forward",t.unknown="",t})({});function wf(t){if(!t)if(Fs){const e=document.querySelector("base");t=e&&e.getAttribute("href")||"/",t=t.replace(/^\w+:\/\/[^\/]+/,"")}else t="/";return t[0]!=="/"&&t[0]!=="#"&&(t="/"+t),vf(t)}const kf=/^[^#]+#/;function Sf(t,e){return t.replace(kf,"#")+e}function Ef(t,e){const s=document.documentElement.getBoundingClientRect(),n=t.getBoundingClientRect();return{behavior:e.behavior,left:n.left-s.left-(e.left||0),top:n.top-s.top-(e.top||0)}}const Dr=()=>({left:window.scrollX,top:window.scrollY});function If(t){let e;if("el"in t){const s=t.el,n=typeof s=="string"&&s.startsWith("#"),r=typeof s=="string"?n?document.getElementById(s.slice(1)):document.querySelector(s):s;if(!r)return;e=Ef(r,t)}else e=t;"scrollBehavior"in document.documentElement.style?window.scrollTo(e):window.scrollTo(e.left!=null?e.left:window.scrollX,e.top!=null?e.top:window.scrollY)}function ia(t,e){return(history.state?history.state.position-e:-1)+t}const xi=new Map;function Tf(t,e){xi.set(t,e)}function xf(t){const e=xi.get(t);return xi.delete(t),e}function Af(t){return typeof t=="string"||t&&typeof t=="object"}function bc(t){return typeof t=="string"||typeof t=="symbol"}let Re=(function(t){return t[t.MATCHER_NOT_FOUND=1]="MATCHER_NOT_FOUND",t[t.NAVIGATION_GUARD_REDIRECT=2]="NAVIGATION_GUARD_REDIRECT",t[t.NAVIGATION_ABORTED=4]="NAVIGATION_ABORTED",t[t.NAVIGATION_CANCELLED=8]="NAVIGATION_CANCELLED",t[t.NAVIGATION_DUPLICATED=16]="NAVIGATION_DUPLICATED",t})({});const wc=Symbol("");Re.MATCHER_NOT_FOUND+"",Re.NAVIGATION_GUARD_REDIRECT+"",Re.NAVIGATION_ABORTED+"",Re.NAVIGATION_CANCELLED+"",Re.NAVIGATION_DUPLICATED+"";function en(t,e){return _e(new Error,{type:t,[wc]:!0},e)}function Mt(t,e){return t instanceof Error&&wc in t&&(e==null||!!(t.type&e))}const Of=["params","query","hash"];function Cf(t){if(typeof t=="string")return t;if(t.path!=null)return t.path;const e={};for(const s of Of)s in t&&(e[s]=t[s]);return JSON.stringify(e,null,2)}function Rf(t){const e={};if(t===""||t==="?")return e;const s=(t[0]==="?"?t.slice(1):t).split("&");for(let n=0;n<s.length;++n){const r=s[n].replace(gc," "),i=r.indexOf("="),o=Pn(i<0?r:r.slice(0,i)),a=i<0?null:Pn(r.slice(i+1));if(o in e){let l=e[o];Tt(l)||(l=e[o]=[l]),l.push(a)}else e[o]=a}return e}function oa(t){let e="";for(let s in t){const n=t[s];if(s=hf(s),n==null){n!==void 0&&(e+=(e.length?"&":"")+s);continue}(Tt(n)?n.map(r=>r&&Ii(r)):[n&&Ii(n)]).forEach(r=>{r!==void 0&&(e+=(e.length?"&":"")+s,r!=null&&(e+="="+r))})}return e}function $f(t){const e={};for(const s in t){const n=t[s];n!==void 0&&(e[s]=Tt(n)?n.map(r=>r==null?null:""+r):n==null?n:""+n)}return e}const Pf=Symbol(""),aa=Symbol(""),Ur=Symbol(""),kc=Symbol(""),Ai=Symbol("");function un(){let t=[];function e(n){return t.push(n),()=>{const r=t.indexOf(n);r>-1&&t.splice(r,1)}}function s(){t=[]}return{add:e,list:()=>t.slice(),reset:s}}function os(t,e,s,n,r,i=o=>o()){const o=n&&(n.enterCallbacks[r]=n.enterCallbacks[r]||[]);return()=>new Promise((a,l)=>{const c=f=>{f===!1?l(en(Re.NAVIGATION_ABORTED,{from:s,to:e})):f instanceof Error?l(f):Af(f)?l(en(Re.NAVIGATION_GUARD_REDIRECT,{from:e,to:f})):(o&&n.enterCallbacks[r]===o&&typeof f=="function"&&o.push(f),a())},u=i(()=>t.call(n&&n.instances[r],e,s,c));let d=Promise.resolve(u);t.length<3&&(d=d.then(c)),d.catch(f=>l(f))})}function si(t,e,s,n,r=i=>i()){const i=[];for(const o of t)for(const a in o.components){let l=o.components[a];if(!(e!=="beforeRouteEnter"&&!o.instances[a]))if(fc(l)){const c=(l.__vccOpts||l)[e];c&&i.push(os(c,s,n,o,a,r))}else{let c=l();i.push(()=>c.then(u=>{if(!u)throw new Error(`Couldn't resolve component "${a}" at "${o.path}"`);const d=ef(u)?u.default:u;o.mods[a]=u,o.components[a]=d;const f=(d.__vccOpts||d)[e];return f&&os(f,s,n,o,a,r)()}))}}return i}function jf(t,e){const s=[],n=[],r=[],i=Math.max(e.matched.length,t.matched.length);for(let o=0;o<i;o++){const a=e.matched[o];a&&(t.matched.find(c=>Xs(c,a))?n.push(a):s.push(a));const l=t.matched[o];l&&(e.matched.find(c=>Xs(c,l))||r.push(l))}return[s,n,r]}let Nf=()=>location.protocol+"//"+location.host;function Sc(t,e){const{pathname:s,search:n,hash:r}=e,i=t.indexOf("#");if(i>-1){let o=r.includes(t.slice(i))?t.slice(i).length:1,a=r.slice(o);return a[0]!=="/"&&(a="/"+a),na(a,"")}return na(s,t)+n+r}function Lf(t,e,s,n){let r=[],i=[],o=null;const a=({state:f})=>{const h=Sc(t,location),v=s.value,y=e.value;let E=0;if(f){if(s.value=h,e.value=f,o&&o===v){o=null;return}E=y?f.position-y.position:0}else n(h);r.forEach(S=>{S(s.value,v,{delta:E,type:Ti.pop,direction:E?E>0?ti.forward:ti.back:ti.unknown})})};function l(){o=s.value}function c(f){r.push(f);const h=()=>{const v=r.indexOf(f);v>-1&&r.splice(v,1)};return i.push(h),h}function u(){if(document.visibilityState==="hidden"){const{history:f}=window;if(!f.state)return;f.replaceState(_e({},f.state,{scroll:Dr()}),"")}}function d(){for(const f of i)f();i=[],window.removeEventListener("popstate",a),window.removeEventListener("pagehide",u),document.removeEventListener("visibilitychange",u)}return window.addEventListener("popstate",a),window.addEventListener("pagehide",u),document.addEventListener("visibilitychange",u),{pauseListeners:l,listen:c,destroy:d}}function la(t,e,s,n=!1,r=!1){return{back:t,current:e,forward:s,replaced:n,position:window.history.length,scroll:r?Dr():null}}function Df(t){const{history:e,location:s}=window,n={value:Sc(t,s)},r={value:e.state};r.value||i(n.value,{back:null,current:n.value,forward:null,position:e.length-1,replaced:!0,scroll:null},!0);function i(l,c,u){const d=t.indexOf("#"),f=d>-1?(s.host&&document.querySelector("base")?t:t.slice(d))+l:Nf()+t+l;try{e[u?"replaceState":"pushState"](c,"",f),r.value=c}catch(h){console.error(h),s[u?"replace":"assign"](f)}}function o(l,c){i(l,_e({},e.state,la(r.value.back,l,r.value.forward,!0),c,{position:r.value.position}),!0),n.value=l}function a(l,c){const u=_e({},r.value,e.state,{forward:l,scroll:Dr()});i(u.current,u,!0),i(l,_e({},la(n.value,l,null),{position:u.position+1},c),!1),n.value=l}return{location:n,state:r,push:a,replace:o}}function Uf(t){t=wf(t);const e=Df(t),s=Lf(t,e.state,e.location,e.replace);function n(i,o=!0){o||s.pauseListeners(),history.go(i)}const r=_e({location:"",base:t,go:n,createHref:Sf.bind(null,t)},e,s);return Object.defineProperty(r,"location",{enumerable:!0,get:()=>e.location.value}),Object.defineProperty(r,"state",{enumerable:!0,get:()=>e.state.value}),r}let Is=(function(t){return t[t.Static=0]="Static",t[t.Param=1]="Param",t[t.Group=2]="Group",t})({});var Le=(function(t){return t[t.Static=0]="Static",t[t.Param=1]="Param",t[t.ParamRegExp=2]="ParamRegExp",t[t.ParamRegExpEnd=3]="ParamRegExpEnd",t[t.EscapeNext=4]="EscapeNext",t})(Le||{});const Bf={type:Is.Static,value:""},Mf=/[a-zA-Z0-9_]/;function Ff(t){if(!t)return[[]];if(t==="/")return[[Bf]];if(!t.startsWith("/"))throw new Error(`Invalid path "${t}"`);function e(h){throw new Error(`ERR (${s})/"${c}": ${h}`)}let s=Le.Static,n=s;const r=[];let i;function o(){i&&r.push(i),i=[]}let a=0,l,c="",u="";function d(){c&&(s===Le.Static?i.push({type:Is.Static,value:c}):s===Le.Param||s===Le.ParamRegExp||s===Le.ParamRegExpEnd?(i.length>1&&(l==="*"||l==="+")&&e(`A repeatable param (${c}) must be alone in its segment. eg: '/:ids+.`),i.push({type:Is.Param,value:c,regexp:u,repeatable:l==="*"||l==="+",optional:l==="*"||l==="?"})):e("Invalid state to consume buffer"),c="")}function f(){c+=l}for(;a<t.length;){if(l=t[a++],l==="\\"&&s!==Le.ParamRegExp){n=s,s=Le.EscapeNext;continue}switch(s){case Le.Static:l==="/"?(c&&d(),o()):l===":"?(d(),s=Le.Param):f();break;case Le.EscapeNext:f(),s=n;break;case Le.Param:l==="("?s=Le.ParamRegExp:Mf.test(l)?f():(d(),s=Le.Static,l!=="*"&&l!=="?"&&l!=="+"&&a--);break;case Le.ParamRegExp:l===")"?u[u.length-1]=="\\"?u=u.slice(0,-1)+l:s=Le.ParamRegExpEnd:u+=l;break;case Le.ParamRegExpEnd:d(),s=Le.Static,l!=="*"&&l!=="?"&&l!=="+"&&a--,u="";break;default:e("Unknown state");break}}return s===Le.ParamRegExp&&e(`Unfinished custom RegExp for param "${c}"`),d(),o(),r}const ca="[^/]+?",qf={sensitive:!1,strict:!1,start:!0,end:!0};var Ze=(function(t){return t[t._multiplier=10]="_multiplier",t[t.Root=90]="Root",t[t.Segment=40]="Segment",t[t.SubSegment=30]="SubSegment",t[t.Static=40]="Static",t[t.Dynamic=20]="Dynamic",t[t.BonusCustomRegExp=10]="BonusCustomRegExp",t[t.BonusWildcard=-50]="BonusWildcard",t[t.BonusRepeatable=-20]="BonusRepeatable",t[t.BonusOptional=-8]="BonusOptional",t[t.BonusStrict=.7000000000000001]="BonusStrict",t[t.BonusCaseSensitive=.25]="BonusCaseSensitive",t})(Ze||{});const Hf=/[.+*?^${}()[\]/\\]/g;function Vf(t,e){const s=_e({},qf,e),n=[];let r=s.start?"^":"";const i=[];for(const c of t){const u=c.length?[]:[Ze.Root];s.strict&&!c.length&&(r+="/");for(let d=0;d<c.length;d++){const f=c[d];let h=Ze.Segment+(s.sensitive?Ze.BonusCaseSensitive:0);if(f.type===Is.Static)d||(r+="/"),r+=f.value.replace(Hf,"\\$&"),h+=Ze.Static;else if(f.type===Is.Param){const{value:v,repeatable:y,optional:E,regexp:S}=f;i.push({name:v,repeatable:y,optional:E});const m=S||ca;if(m!==ca){h+=Ze.BonusCustomRegExp;try{`${m}`}catch(k){throw new Error(`Invalid custom RegExp for param "${v}" (${m}): `+k.message)}}let g=y?`((?:${m})(?:/(?:${m}))*)`:`(${m})`;d||(g=E&&c.length<2?`(?:/${g})`:"/"+g),E&&(g+="?"),r+=g,h+=Ze.Dynamic,E&&(h+=Ze.BonusOptional),y&&(h+=Ze.BonusRepeatable),m===".*"&&(h+=Ze.BonusWildcard)}u.push(h)}n.push(u)}if(s.strict&&s.end){const c=n.length-1;n[c][n[c].length-1]+=Ze.BonusStrict}s.strict||(r+="/?"),s.end?r+="$":s.strict&&!r.endsWith("/")&&(r+="(?:/|$)");const o=new RegExp(r,s.sensitive?"":"i");function a(c){const u=c.match(o),d={};if(!u)return null;for(let f=1;f<u.length;f++){const h=u[f]||"",v=i[f-1];d[v.name]=h&&v.repeatable?h.split("/"):h}return d}function l(c){let u="",d=!1;for(const f of t){(!d||!u.endsWith("/"))&&(u+="/"),d=!1;for(const h of f)if(h.type===Is.Static)u+=h.value;else if(h.type===Is.Param){const{value:v,repeatable:y,optional:E}=h,S=v in c?c[v]:"";if(Tt(S)&&!y)throw new Error(`Provided param "${v}" is an array but it is not repeatable (* or + modifiers)`);const m=Tt(S)?S.join("/"):S;if(!m)if(E)f.length<2&&(u.endsWith("/")?u=u.slice(0,-1):d=!0);else throw new Error(`Missing required param "${v}"`);u+=m}}return u||"/"}return{re:o,score:n,keys:i,parse:a,stringify:l}}function Kf(t,e){let s=0;for(;s<t.length&&s<e.length;){const n=e[s]-t[s];if(n)return n;s++}return t.length<e.length?t.length===1&&t[0]===Ze.Static+Ze.Segment?-1:1:t.length>e.length?e.length===1&&e[0]===Ze.Static+Ze.Segment?1:-1:0}function Ec(t,e){let s=0;const n=t.score,r=e.score;for(;s<n.length&&s<r.length;){const i=Kf(n[s],r[s]);if(i)return i;s++}if(Math.abs(r.length-n.length)===1){if(ua(n))return 1;if(ua(r))return-1}return r.length-n.length}function ua(t){const e=t[t.length-1];return t.length>0&&e[e.length-1]<0}const Wf={strict:!1,end:!0,sensitive:!1};function zf(t,e,s){const n=Vf(Ff(t.path),s),r=_e(n,{record:t,parent:e,children:[],alias:[]});return e&&!r.record.aliasOf==!e.record.aliasOf&&e.children.push(r),r}function Gf(t,e){const s=[],n=new Map;e=sa(Wf,e);function r(d){return n.get(d)}function i(d,f,h){const v=!h,y=ha(d);y.aliasOf=h&&h.record;const E=sa(e,d),S=[y];if("alias"in d){const k=typeof d.alias=="string"?[d.alias]:d.alias;for(const A of k)S.push(ha(_e({},y,{components:h?h.record.components:y.components,path:A,aliasOf:h?h.record:y})))}let m,g;for(const k of S){const{path:A}=k;if(f&&A[0]!=="/"){const U=f.record.path,z=U[U.length-1]==="/"?"":"/";k.path=f.record.path+(A&&z+A)}if(m=zf(k,f,E),h?h.alias.push(m):(g=g||m,g!==m&&g.alias.push(m),v&&d.name&&!fa(m)&&o(d.name)),Ic(m)&&l(m),y.children){const U=y.children;for(let z=0;z<U.length;z++)i(U[z],m,h&&h.children[z])}h=h||m}return g?()=>{o(g)}:Sn}function o(d){if(bc(d)){const f=n.get(d);f&&(n.delete(d),s.splice(s.indexOf(f),1),f.children.forEach(o),f.alias.forEach(o))}else{const f=s.indexOf(d);f>-1&&(s.splice(f,1),d.record.name&&n.delete(d.record.name),d.children.forEach(o),d.alias.forEach(o))}}function a(){return s}function l(d){const f=Qf(d,s);s.splice(f,0,d),d.record.name&&!fa(d)&&n.set(d.record.name,d)}function c(d,f){let h,v={},y,E;if("name"in d&&d.name){if(h=n.get(d.name),!h)throw en(Re.MATCHER_NOT_FOUND,{location:d});E=h.record.name,v=_e(da(f.params,h.keys.filter(g=>!g.optional).concat(h.parent?h.parent.keys.filter(g=>g.optional):[]).map(g=>g.name)),d.params&&da(d.params,h.keys.map(g=>g.name))),y=h.stringify(v)}else if(d.path!=null)y=d.path,h=s.find(g=>g.re.test(y)),h&&(v=h.parse(y),E=h.record.name);else{if(h=f.name?n.get(f.name):s.find(g=>g.re.test(f.path)),!h)throw en(Re.MATCHER_NOT_FOUND,{location:d,currentLocation:f});E=h.record.name,v=_e({},f.params,d.params),y=h.stringify(v)}const S=[];let m=h;for(;m;)S.unshift(m.record),m=m.parent;return{name:E,path:y,params:v,matched:S,meta:Zf(S)}}t.forEach(d=>i(d));function u(){s.length=0,n.clear()}return{addRoute:i,resolve:c,removeRoute:o,clearRoutes:u,getRoutes:a,getRecordMatcher:r}}function da(t,e){const s={};for(const n of e)n in t&&(s[n]=t[n]);return s}function ha(t){const e={path:t.path,redirect:t.redirect,name:t.name,meta:t.meta||{},aliasOf:t.aliasOf,beforeEnter:t.beforeEnter,props:Jf(t),children:t.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in t?t.components||null:t.component&&{default:t.component}};return Object.defineProperty(e,"mods",{value:{}}),e}function Jf(t){const e={},s=t.props||!1;if("component"in t)e.default=s;else for(const n in t.components)e[n]=typeof s=="object"?s[n]:s;return e}function fa(t){for(;t;){if(t.record.aliasOf)return!0;t=t.parent}return!1}function Zf(t){return t.reduce((e,s)=>_e(e,s.meta),{})}function Qf(t,e){let s=0,n=e.length;for(;s!==n;){const i=s+n>>1;Ec(t,e[i])<0?n=i:s=i+1}const r=Yf(t);return r&&(n=e.lastIndexOf(r,n-1)),n}function Yf(t){let e=t;for(;e=e.parent;)if(Ic(e)&&Ec(t,e)===0)return e}function Ic({record:t}){return!!(t.name||t.components&&Object.keys(t.components).length||t.redirect)}function pa(t){const e=Lt(Ur),s=Lt(kc),n=Ne(()=>{const l=x(t.to);return e.resolve(l)}),r=Ne(()=>{const{matched:l}=n.value,{length:c}=l,u=l[c-1],d=s.matched;if(!u||!d.length)return-1;const f=d.findIndex(Xs.bind(null,u));if(f>-1)return f;const h=ga(l[c-2]);return c>1&&ga(u)===h&&d[d.length-1].path!==h?d.findIndex(Xs.bind(null,l[c-2])):f}),i=Ne(()=>r.value>-1&&np(s.params,n.value.params)),o=Ne(()=>r.value>-1&&r.value===s.matched.length-1&&yc(s.params,n.value.params));function a(l={}){if(sp(l)){const c=e[x(t.replace)?"replace":"push"](x(t.to)).catch(Sn);return t.viewTransition&&typeof document<"u"&&"startViewTransition"in document&&document.startViewTransition(()=>c),c}return Promise.resolve()}return{route:n,href:Ne(()=>n.value.href),isActive:i,isExactActive:o,navigate:a}}function Xf(t){return t.length===1?t[0]:t}const ep=Ul({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"},viewTransition:Boolean},useLink:pa,setup(t,{slots:e}){const s=sn(pa(t)),{options:n}=Lt(Ur),r=Ne(()=>({[va(t.activeClass,n.linkActiveClass,"router-link-active")]:s.isActive,[va(t.exactActiveClass,n.linkExactActiveClass,"router-link-exact-active")]:s.isExactActive}));return()=>{const i=e.default&&Xf(e.default(s));return t.custom?i:ro("a",{"aria-current":s.isExactActive?t.ariaCurrentValue:null,href:s.href,onClick:s.navigate,class:r.value},i)}}}),tp=ep;function sp(t){if(!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)&&!t.defaultPrevented&&!(t.button!==void 0&&t.button!==0)){if(t.currentTarget&&t.currentTarget.getAttribute){const e=t.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(e))return}return t.preventDefault&&t.preventDefault(),!0}}function np(t,e){for(const s in e){const n=e[s],r=t[s];if(typeof n=="string"){if(n!==r)return!1}else if(!Tt(r)||r.length!==n.length||n.some((i,o)=>i!==r[o]))return!1}return!0}function ga(t){return t?t.aliasOf?t.aliasOf.path:t.path:""}const va=(t,e,s)=>t??e??s,rp=Ul({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(t,{attrs:e,slots:s}){const n=Lt(Ai),r=Ne(()=>t.route||n.value),i=Lt(aa,0),o=Ne(()=>{let c=x(i);const{matched:u}=r.value;let d;for(;(d=u[c])&&!d.components;)c++;return c}),a=Ne(()=>r.value.matched[o.value]);ir(aa,Ne(()=>o.value+1)),ir(Pf,a),ir(Ai,r);const l=O();return Gs(()=>[l.value,a.value,t.name],([c,u,d],[f,h,v])=>{u&&(u.instances[d]=c,h&&h!==u&&c&&c===f&&(u.leaveGuards.size||(u.leaveGuards=h.leaveGuards),u.updateGuards.size||(u.updateGuards=h.updateGuards))),c&&u&&(!h||!Xs(u,h)||!f)&&(u.enterCallbacks[d]||[]).forEach(y=>y(c))},{flush:"post"}),()=>{const c=r.value,u=t.name,d=a.value,f=d&&d.components[u];if(!f)return ma(s.default,{Component:f,route:c});const h=d.props[u],v=h?h===!0?c.params:typeof h=="function"?h(c):h:null,E=ro(f,_e({},v,e,{onVnodeUnmounted:S=>{S.component.isUnmounted&&(d.instances[u]=null)},ref:l}));return ma(s.default,{Component:E,route:c})||E}}});function ma(t,e){if(!t)return null;const s=t(e);return s.length===1?s[0]:s}const ip=rp;function op(t){const e=Gf(t.routes,t),s=t.parseQuery||Rf,n=t.stringifyQuery||oa,r=t.history,i=un(),o=un(),a=un(),l=nd(es);let c=es;Fs&&t.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const u=Xr.bind(null,P=>""+P),d=Xr.bind(null,pf),f=Xr.bind(null,Pn);function h(P,J){let K,ee;return bc(P)?(K=e.getRecordMatcher(P),ee=J):ee=P,e.addRoute(ee,K)}function v(P){const J=e.getRecordMatcher(P);J&&e.removeRoute(J)}function y(){return e.getRoutes().map(P=>P.record)}function E(P){return!!e.getRecordMatcher(P)}function S(P,J){if(J=_e({},J||l.value),typeof P=="string"){const T=ei(s,P,J.path),$=e.resolve({path:T.path},J),N=r.createHref(T.fullPath);return _e(T,$,{params:f($.params),hash:Pn(T.hash),redirectedFrom:void 0,href:N})}let K;if(P.path!=null)K=_e({},P,{path:ei(s,P.path,J.path).path});else{const T=_e({},P.params);for(const $ in T)T[$]==null&&delete T[$];K=_e({},P,{params:d(T)}),J.params=d(J.params)}const ee=e.resolve(K,J),pe=P.hash||"";ee.params=u(f(ee.params));const _=mf(n,_e({},P,{hash:df(pe),path:ee.path})),w=r.createHref(_);return _e({fullPath:_,hash:pe,query:n===oa?$f(P.query):P.query||{}},ee,{redirectedFrom:void 0,href:w})}function m(P){return typeof P=="string"?ei(s,P,l.value.path):_e({},P)}function g(P,J){if(c!==P)return en(Re.NAVIGATION_CANCELLED,{from:J,to:P})}function k(P){return z(P)}function A(P){return k(_e(m(P),{replace:!0}))}function U(P,J){const K=P.matched[P.matched.length-1];if(K&&K.redirect){const{redirect:ee}=K;let pe=typeof ee=="function"?ee(P,J):ee;return typeof pe=="string"&&(pe=pe.includes("?")||pe.includes("#")?pe=m(pe):{path:pe},pe.params={}),_e({query:P.query,hash:P.hash,params:pe.path!=null?{}:P.params},pe)}}function z(P,J){const K=c=S(P),ee=l.value,pe=P.state,_=P.force,w=P.replace===!0,T=U(K,ee);if(T)return z(_e(m(T),{state:typeof T=="object"?_e({},pe,T.state):pe,force:_,replace:w}),J||K);const $=K;$.redirectedFrom=J;let N;return!_&&_f(n,ee,K)&&(N=en(Re.NAVIGATION_DUPLICATED,{to:$,from:ee}),pt(ee,ee,!0,!1)),(N?Promise.resolve(N):Z($,ee)).catch(C=>Mt(C)?Mt(C,Re.NAVIGATION_GUARD_REDIRECT)?C:rt(C):fe(C,$,ee)).then(C=>{if(C){if(Mt(C,Re.NAVIGATION_GUARD_REDIRECT))return z(_e({replace:w},m(C.to),{state:typeof C.to=="object"?_e({},pe,C.to.state):pe,force:_}),J||$)}else C=j($,ee,!0,w,pe);return D($,ee,C),C})}function Y(P,J){const K=g(P,J);return K?Promise.reject(K):Promise.resolve()}function q(P){const J=$s.values().next().value;return J&&typeof J.runWithContext=="function"?J.runWithContext(P):P()}function Z(P,J){let K;const[ee,pe,_]=jf(P,J);K=si(ee.reverse(),"beforeRouteLeave",P,J);for(const T of ee)T.leaveGuards.forEach($=>{K.push(os($,P,J))});const w=Y.bind(null,P,J);return K.push(w),gt(K).then(()=>{K=[];for(const T of i.list())K.push(os(T,P,J));return K.push(w),gt(K)}).then(()=>{K=si(pe,"beforeRouteUpdate",P,J);for(const T of pe)T.updateGuards.forEach($=>{K.push(os($,P,J))});return K.push(w),gt(K)}).then(()=>{K=[];for(const T of _)if(T.beforeEnter)if(Tt(T.beforeEnter))for(const $ of T.beforeEnter)K.push(os($,P,J));else K.push(os(T.beforeEnter,P,J));return K.push(w),gt(K)}).then(()=>(P.matched.forEach(T=>T.enterCallbacks={}),K=si(_,"beforeRouteEnter",P,J,q),K.push(w),gt(K))).then(()=>{K=[];for(const T of o.list())K.push(os(T,P,J));return K.push(w),gt(K)}).catch(T=>Mt(T,Re.NAVIGATION_CANCELLED)?T:Promise.reject(T))}function D(P,J,K){a.list().forEach(ee=>q(()=>ee(P,J,K)))}function j(P,J,K,ee,pe){const _=g(P,J);if(_)return _;const w=J===es,T=Fs?history.state:{};K&&(ee||w?r.replace(P.fullPath,_e({scroll:w&&T&&T.scroll},pe)):r.push(P.fullPath,pe)),l.value=P,pt(P,J,K,w),rt()}let X;function ce(){X||(X=r.listen((P,J,K)=>{if(!ds.listening)return;const ee=S(P),pe=U(ee,ds.currentRoute.value);if(pe){z(_e(pe,{replace:!0,force:!0}),ee).catch(Sn);return}c=ee;const _=l.value;Fs&&Tf(ia(_.fullPath,K.delta),Dr()),Z(ee,_).catch(w=>Mt(w,Re.NAVIGATION_ABORTED|Re.NAVIGATION_CANCELLED)?w:Mt(w,Re.NAVIGATION_GUARD_REDIRECT)?(z(_e(m(w.to),{force:!0}),ee).then(T=>{Mt(T,Re.NAVIGATION_ABORTED|Re.NAVIGATION_DUPLICATED)&&!K.delta&&K.type===Ti.pop&&r.go(-1,!1)}).catch(Sn),Promise.reject()):(K.delta&&r.go(-K.delta,!1),fe(w,ee,_))).then(w=>{w=w||j(ee,_,!1),w&&(K.delta&&!Mt(w,Re.NAVIGATION_CANCELLED)?r.go(-K.delta,!1):K.type===Ti.pop&&Mt(w,Re.NAVIGATION_ABORTED|Re.NAVIGATION_DUPLICATED)&&r.go(-1,!1)),D(ee,_,w)}).catch(Sn)}))}let le=un(),ue=un(),he;function fe(P,J,K){rt(P);const ee=ue.list();return ee.length?ee.forEach(pe=>pe(P,J,K)):console.error(P),Promise.reject(P)}function Ue(){return he&&l.value!==es?Promise.resolve():new Promise((P,J)=>{le.add([P,J])})}function rt(P){return he||(he=!P,ce(),le.list().forEach(([J,K])=>P?K(P):J()),le.reset()),P}function pt(P,J,K,ee){const{scrollBehavior:pe}=t;if(!Fs||!pe)return Promise.resolve();const _=!K&&xf(ia(P.fullPath,0))||(ee||!K)&&history.state&&history.state.scroll||null;return xl().then(()=>pe(P,J,_)).then(w=>w&&If(w)).catch(w=>fe(w,P,J))}const Fe=P=>r.go(P);let Yt;const $s=new Set,ds={currentRoute:l,listening:!0,addRoute:h,removeRoute:v,clearRoutes:e.clearRoutes,hasRoute:E,getRoutes:y,resolve:S,options:t,push:k,replace:A,go:Fe,back:()=>Fe(-1),forward:()=>Fe(1),beforeEach:i.add,beforeResolve:o.add,afterEach:a.add,onError:ue.add,isReady:Ue,install(P){P.component("RouterLink",tp),P.component("RouterView",ip),P.config.globalProperties.$router=ds,Object.defineProperty(P.config.globalProperties,"$route",{enumerable:!0,get:()=>x(l)}),Fs&&!Yt&&l.value===es&&(Yt=!0,k(r.location).catch(ee=>{}));const J={};for(const ee in es)Object.defineProperty(J,ee,{get:()=>l.value[ee],enumerable:!0});P.provide(Ur,ds),P.provide(kc,Sl(J)),P.provide(Ai,l);const K=P.unmount;$s.add(P),P.unmount=function(){$s.delete(P),$s.size<1&&(c=es,X&&X(),X=null,l.value=es,Yt=!1,he=!1),K()}}};function gt(P){return P.reduce((J,K)=>J.then(()=>q(K)),Promise.resolve())}return ds}function Xe(){return Lt(Ur)}var Oi=function(t,e){return Oi=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,n){s.__proto__=n}||function(s,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(s[r]=n[r])},Oi(t,e)};function Tc(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");Oi(t,e);function s(){this.constructor=t}t.prototype=e===null?Object.create(e):(s.prototype=e.prototype,new s)}var wr=function(){return wr=Object.assign||function(e){for(var s,n=1,r=arguments.length;n<r;n++){s=arguments[n];for(var i in s)Object.prototype.hasOwnProperty.call(s,i)&&(e[i]=s[i])}return e},wr.apply(this,arguments)};function nn(t,e){var s={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(s[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,n=Object.getOwnPropertySymbols(t);r<n.length;r++)e.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(t,n[r])&&(s[n[r]]=t[n[r]]);return s}function xc(t,e,s,n){var r=arguments.length,i=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,s):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(t,e,s,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(i=(r<3?o(i):r>3?o(e,s,i):o(e,s))||i);return r>3&&i&&Object.defineProperty(e,s,i),i}function Ac(t,e){return function(s,n){e(s,n,t)}}function Oc(t,e,s,n,r,i){function o(S){if(S!==void 0&&typeof S!="function")throw new TypeError("Function expected");return S}for(var a=n.kind,l=a==="getter"?"get":a==="setter"?"set":"value",c=!e&&t?n.static?t:t.prototype:null,u=e||(c?Object.getOwnPropertyDescriptor(c,n.name):{}),d,f=!1,h=s.length-1;h>=0;h--){var v={};for(var y in n)v[y]=y==="access"?{}:n[y];for(var y in n.access)v.access[y]=n.access[y];v.addInitializer=function(S){if(f)throw new TypeError("Cannot add initializers after decoration has completed");i.push(o(S||null))};var E=(0,s[h])(a==="accessor"?{get:u.get,set:u.set}:u[l],v);if(a==="accessor"){if(E===void 0)continue;if(E===null||typeof E!="object")throw new TypeError("Object expected");(d=o(E.get))&&(u.get=d),(d=o(E.set))&&(u.set=d),(d=o(E.init))&&r.unshift(d)}else(d=o(E))&&(a==="field"?r.unshift(d):u[l]=d)}c&&Object.defineProperty(c,n.name,u),f=!0}function Cc(t,e,s){for(var n=arguments.length>2,r=0;r<e.length;r++)s=n?e[r].call(t,s):e[r].call(t);return n?s:void 0}function Rc(t){return typeof t=="symbol"?t:"".concat(t)}function $c(t,e,s){return typeof e=="symbol"&&(e=e.description?"[".concat(e.description,"]"):""),Object.defineProperty(t,"name",{configurable:!0,value:s?"".concat(s," ",e):e})}function Pc(t,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(t,e)}function G(t,e,s,n){function r(i){return i instanceof s?i:new s(function(o){o(i)})}return new(s||(s=Promise))(function(i,o){function a(u){try{c(n.next(u))}catch(d){o(d)}}function l(u){try{c(n.throw(u))}catch(d){o(d)}}function c(u){u.done?i(u.value):r(u.value).then(a,l)}c((n=n.apply(t,e||[])).next())})}function jc(t,e){var s={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,r,i,o=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return o.next=a(0),o.throw=a(1),o.return=a(2),typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(c){return function(u){return l([c,u])}}function l(c){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,c[0]&&(s=0)),s;)try{if(n=1,r&&(i=c[0]&2?r.return:c[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,c[1])).done)return i;switch(r=0,i&&(c=[c[0]&2,i.value]),c[0]){case 0:case 1:i=c;break;case 4:return s.label++,{value:c[1],done:!1};case 5:s.label++,r=c[1],c=[0];continue;case 7:c=s.ops.pop(),s.trys.pop();continue;default:if(i=s.trys,!(i=i.length>0&&i[i.length-1])&&(c[0]===6||c[0]===2)){s=0;continue}if(c[0]===3&&(!i||c[1]>i[0]&&c[1]<i[3])){s.label=c[1];break}if(c[0]===6&&s.label<i[1]){s.label=i[1],i=c;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(c);break}i[2]&&s.ops.pop(),s.trys.pop();continue}c=e.call(t,s)}catch(u){c=[6,u],r=0}finally{n=i=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}var Br=Object.create?(function(t,e,s,n){n===void 0&&(n=s);var r=Object.getOwnPropertyDescriptor(e,s);(!r||("get"in r?!e.__esModule:r.writable||r.configurable))&&(r={enumerable:!0,get:function(){return e[s]}}),Object.defineProperty(t,n,r)}):(function(t,e,s,n){n===void 0&&(n=s),t[n]=e[s]});function Nc(t,e){for(var s in t)s!=="default"&&!Object.prototype.hasOwnProperty.call(e,s)&&Br(e,t,s)}function kr(t){var e=typeof Symbol=="function"&&Symbol.iterator,s=e&&t[e],n=0;if(s)return s.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function oo(t,e){var s=typeof Symbol=="function"&&t[Symbol.iterator];if(!s)return t;var n=s.call(t),r,i=[],o;try{for(;(e===void 0||e-- >0)&&!(r=n.next()).done;)i.push(r.value)}catch(a){o={error:a}}finally{try{r&&!r.done&&(s=n.return)&&s.call(n)}finally{if(o)throw o.error}}return i}function Lc(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(oo(arguments[e]));return t}function Dc(){for(var t=0,e=0,s=arguments.length;e<s;e++)t+=arguments[e].length;for(var n=Array(t),r=0,e=0;e<s;e++)for(var i=arguments[e],o=0,a=i.length;o<a;o++,r++)n[r]=i[o];return n}function Uc(t,e,s){if(s||arguments.length===2)for(var n=0,r=e.length,i;n<r;n++)(i||!(n in e))&&(i||(i=Array.prototype.slice.call(e,0,n)),i[n]=e[n]);return t.concat(i||Array.prototype.slice.call(e))}function tn(t){return this instanceof tn?(this.v=t,this):new tn(t)}function Bc(t,e,s){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=s.apply(t,e||[]),r,i=[];return r=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",o),r[Symbol.asyncIterator]=function(){return this},r;function o(h){return function(v){return Promise.resolve(v).then(h,d)}}function a(h,v){n[h]&&(r[h]=function(y){return new Promise(function(E,S){i.push([h,y,E,S])>1||l(h,y)})},v&&(r[h]=v(r[h])))}function l(h,v){try{c(n[h](v))}catch(y){f(i[0][3],y)}}function c(h){h.value instanceof tn?Promise.resolve(h.value.v).then(u,d):f(i[0][2],h)}function u(h){l("next",h)}function d(h){l("throw",h)}function f(h,v){h(v),i.shift(),i.length&&l(i[0][0],i[0][1])}}function Mc(t){var e,s;return e={},n("next"),n("throw",function(r){throw r}),n("return"),e[Symbol.iterator]=function(){return this},e;function n(r,i){e[r]=t[r]?function(o){return(s=!s)?{value:tn(t[r](o)),done:!1}:i?i(o):o}:i}}function Fc(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],s;return e?e.call(t):(t=typeof kr=="function"?kr(t):t[Symbol.iterator](),s={},n("next"),n("throw"),n("return"),s[Symbol.asyncIterator]=function(){return this},s);function n(i){s[i]=t[i]&&function(o){return new Promise(function(a,l){o=t[i](o),r(a,l,o.done,o.value)})}}function r(i,o,a,l){Promise.resolve(l).then(function(c){i({value:c,done:a})},o)}}function qc(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}var ap=Object.create?(function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}):function(t,e){t.default=e},Ci=function(t){return Ci=Object.getOwnPropertyNames||function(e){var s=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(s[s.length]=n);return s},Ci(t)};function Hc(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var s=Ci(t),n=0;n<s.length;n++)s[n]!=="default"&&Br(e,t,s[n]);return ap(e,t),e}function Vc(t){return t&&t.__esModule?t:{default:t}}function Kc(t,e,s,n){if(s==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return s==="m"?n:s==="a"?n.call(t):n?n.value:e.get(t)}function Wc(t,e,s,n,r){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?r.call(t,s):r?r.value=s:e.set(t,s),s}function zc(t,e){if(e===null||typeof e!="object"&&typeof e!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof t=="function"?e===t:t.has(e)}function Gc(t,e,s){if(e!=null){if(typeof e!="object"&&typeof e!="function")throw new TypeError("Object expected.");var n,r;if(s){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");n=e[Symbol.asyncDispose]}if(n===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");n=e[Symbol.dispose],s&&(r=n)}if(typeof n!="function")throw new TypeError("Object not disposable.");r&&(n=function(){try{r.call(this)}catch(i){return Promise.reject(i)}}),t.stack.push({value:e,dispose:n,async:s})}else s&&t.stack.push({async:!0});return e}var lp=typeof SuppressedError=="function"?SuppressedError:function(t,e,s){var n=new Error(s);return n.name="SuppressedError",n.error=t,n.suppressed=e,n};function Jc(t){function e(i){t.error=t.hasError?new lp(i,t.error,"An error was suppressed during disposal."):i,t.hasError=!0}var s,n=0;function r(){for(;s=t.stack.pop();)try{if(!s.async&&n===1)return n=0,t.stack.push(s),Promise.resolve().then(r);if(s.dispose){var i=s.dispose.call(s.value);if(s.async)return n|=2,Promise.resolve(i).then(r,function(o){return e(o),r()})}else n|=1}catch(o){e(o)}if(n===1)return t.hasError?Promise.reject(t.error):Promise.resolve();if(t.hasError)throw t.error}return r()}function Zc(t,e){return typeof t=="string"&&/^\.\.?\//.test(t)?t.replace(/\.(tsx)$|((?:\.d)?)((?:\.[^./]+?)?)\.([cm]?)ts$/i,function(s,n,r,i,o){return n?e?".jsx":".js":r&&(!i||!o)?s:r+i+"."+o.toLowerCase()+"js"}):t}const cp={__extends:Tc,__assign:wr,__rest:nn,__decorate:xc,__param:Ac,__esDecorate:Oc,__runInitializers:Cc,__propKey:Rc,__setFunctionName:$c,__metadata:Pc,__awaiter:G,__generator:jc,__createBinding:Br,__exportStar:Nc,__values:kr,__read:oo,__spread:Lc,__spreadArrays:Dc,__spreadArray:Uc,__await:tn,__asyncGenerator:Bc,__asyncDelegator:Mc,__asyncValues:Fc,__makeTemplateObject:qc,__importStar:Hc,__importDefault:Vc,__classPrivateFieldGet:Kc,__classPrivateFieldSet:Wc,__classPrivateFieldIn:zc,__addDisposableResource:Gc,__disposeResources:Jc,__rewriteRelativeImportExtension:Zc},up=Object.freeze(Object.defineProperty({__proto__:null,__addDisposableResource:Gc,get __assign(){return wr},__asyncDelegator:Mc,__asyncGenerator:Bc,__asyncValues:Fc,__await:tn,__awaiter:G,__classPrivateFieldGet:Kc,__classPrivateFieldIn:zc,__classPrivateFieldSet:Wc,__createBinding:Br,__decorate:xc,__disposeResources:Jc,__esDecorate:Oc,__exportStar:Nc,__extends:Tc,__generator:jc,__importDefault:Vc,__importStar:Hc,__makeTemplateObject:qc,__metadata:Pc,__param:Ac,__propKey:Rc,__read:oo,__rest:nn,__rewriteRelativeImportExtension:Zc,__runInitializers:Cc,__setFunctionName:$c,__spread:Lc,__spreadArray:Uc,__spreadArrays:Dc,__values:kr,default:cp},Symbol.toStringTag,{value:"Module"})),dp=t=>t?(...e)=>t(...e):(...e)=>fetch(...e);class ao extends Error{constructor(e,s="FunctionsError",n){super(e),this.name=s,this.context=n}}class hp extends ao{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class _a extends ao{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class ya extends ao{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var Ri;(function(t){t.Any="any",t.ApNortheast1="ap-northeast-1",t.ApNortheast2="ap-northeast-2",t.ApSouth1="ap-south-1",t.ApSoutheast1="ap-southeast-1",t.ApSoutheast2="ap-southeast-2",t.CaCentral1="ca-central-1",t.EuCentral1="eu-central-1",t.EuWest1="eu-west-1",t.EuWest2="eu-west-2",t.EuWest3="eu-west-3",t.SaEast1="sa-east-1",t.UsEast1="us-east-1",t.UsWest1="us-west-1",t.UsWest2="us-west-2"})(Ri||(Ri={}));class fp{constructor(e,{headers:s={},customFetch:n,region:r=Ri.Any}={}){this.url=e,this.headers=s,this.region=r,this.fetch=dp(n)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e){return G(this,arguments,void 0,function*(s,n={}){var r;let i,o;try{const{headers:a,method:l,body:c,signal:u,timeout:d}=n;let f={},{region:h}=n;h||(h=this.region);const v=new URL(`${this.url}/${s}`);h&&h!=="any"&&(f["x-region"]=h,v.searchParams.set("forceFunctionRegion",h));let y;c&&(a&&!Object.prototype.hasOwnProperty.call(a,"Content-Type")||!a)?typeof Blob<"u"&&c instanceof Blob||c instanceof ArrayBuffer?(f["Content-Type"]="application/octet-stream",y=c):typeof c=="string"?(f["Content-Type"]="text/plain",y=c):typeof FormData<"u"&&c instanceof FormData?y=c:(f["Content-Type"]="application/json",y=JSON.stringify(c)):y=c;let E=u;d&&(o=new AbortController,i=setTimeout(()=>o.abort(),d),u?(E=o.signal,u.addEventListener("abort",()=>o.abort())):E=o.signal);const S=yield this.fetch(v.toString(),{method:l||"POST",headers:Object.assign(Object.assign(Object.assign({},f),this.headers),a),body:y,signal:E}).catch(A=>{throw new hp(A)}),m=S.headers.get("x-relay-error");if(m&&m==="true")throw new _a(S);if(!S.ok)throw new ya(S);let g=((r=S.headers.get("Content-Type"))!==null&&r!==void 0?r:"text/plain").split(";")[0].trim(),k;return g==="application/json"?k=yield S.json():g==="application/octet-stream"||g==="application/pdf"?k=yield S.blob():g==="text/event-stream"?k=S:g==="multipart/form-data"?k=yield S.formData():k=yield S.text(),{data:k,error:null,response:S}}catch(a){return{data:null,error:a,response:a instanceof ya||a instanceof _a?a.context:void 0}}finally{i&&clearTimeout(i)}})}}function pp(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function gp(t){if(Object.prototype.hasOwnProperty.call(t,"__esModule"))return t;var e=t.default;if(typeof e=="function"){var s=function n(){var r=!1;try{r=this instanceof n}catch{}return r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};s.prototype=e.prototype}else s={};return Object.defineProperty(s,"__esModule",{value:!0}),Object.keys(t).forEach(function(n){var r=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(s,n,r.get?r:{enumerable:!0,get:function(){return t[n]}})}),s}var He={};const rn=gp(up);var Wn={},zn={},Gn={},Jn={},Zn={},Qn={},ba;function Qc(){if(ba)return Qn;ba=1,Object.defineProperty(Qn,"__esModule",{value:!0});class t extends Error{constructor(s){super(s.message),this.name="PostgrestError",this.details=s.details,this.hint=s.hint,this.code=s.code}}return Qn.default=t,Qn}var wa;function Yc(){if(wa)return Zn;wa=1,Object.defineProperty(Zn,"__esModule",{value:!0});const e=rn.__importDefault(Qc());class s{constructor(r){var i,o;this.shouldThrowOnError=!1,this.method=r.method,this.url=r.url,this.headers=new Headers(r.headers),this.schema=r.schema,this.body=r.body,this.shouldThrowOnError=(i=r.shouldThrowOnError)!==null&&i!==void 0?i:!1,this.signal=r.signal,this.isMaybeSingle=(o=r.isMaybeSingle)!==null&&o!==void 0?o:!1,r.fetch?this.fetch=r.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(r,i){return this.headers=new Headers(this.headers),this.headers.set(r,i),this}then(r,i){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const o=this.fetch;let a=o(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async l=>{var c,u,d,f;let h=null,v=null,y=null,E=l.status,S=l.statusText;if(l.ok){if(this.method!=="HEAD"){const A=await l.text();A===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((c=this.headers.get("Accept"))===null||c===void 0)&&c.includes("application/vnd.pgrst.plan+text"))?v=A:v=JSON.parse(A))}const g=(u=this.headers.get("Prefer"))===null||u===void 0?void 0:u.match(/count=(exact|planned|estimated)/),k=(d=l.headers.get("content-range"))===null||d===void 0?void 0:d.split("/");g&&k&&k.length>1&&(y=parseInt(k[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(v)&&(v.length>1?(h={code:"PGRST116",details:`Results contain ${v.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},v=null,y=null,E=406,S="Not Acceptable"):v.length===1?v=v[0]:v=null)}else{const g=await l.text();try{h=JSON.parse(g),Array.isArray(h)&&l.status===404&&(v=[],h=null,E=200,S="OK")}catch{l.status===404&&g===""?(E=204,S="No Content"):h={message:g}}if(h&&this.isMaybeSingle&&(!((f=h?.details)===null||f===void 0)&&f.includes("0 rows"))&&(h=null,E=200,S="OK"),h&&this.shouldThrowOnError)throw new e.default(h)}return{error:h,data:v,count:y,status:E,statusText:S}});return this.shouldThrowOnError||(a=a.catch(l=>{var c,u,d,f,h,v;let y="";const E=l?.cause;if(E){const S=(c=E?.message)!==null&&c!==void 0?c:"",m=(u=E?.code)!==null&&u!==void 0?u:"";y=`${(d=l?.name)!==null&&d!==void 0?d:"FetchError"}: ${l?.message}`,y+=`

Caused by: ${(f=E?.name)!==null&&f!==void 0?f:"Error"}: ${S}`,m&&(y+=` (${m})`),E?.stack&&(y+=`
${E.stack}`)}else y=(h=l?.stack)!==null&&h!==void 0?h:"";return{error:{message:`${(v=l?.name)!==null&&v!==void 0?v:"FetchError"}: ${l?.message}`,details:y,hint:"",code:""},data:null,count:null,status:0,statusText:""}})),a.then(r,i)}returns(){return this}overrideTypes(){return this}}return Zn.default=s,Zn}var ka;function Xc(){if(ka)return Jn;ka=1,Object.defineProperty(Jn,"__esModule",{value:!0});const e=rn.__importDefault(Yc());class s extends e.default{select(r){let i=!1;const o=(r??"*").split("").map(a=>/\s/.test(a)&&!i?"":(a==='"'&&(i=!i),a)).join("");return this.url.searchParams.set("select",o),this.headers.append("Prefer","return=representation"),this}order(r,{ascending:i=!0,nullsFirst:o,foreignTable:a,referencedTable:l=a}={}){const c=l?`${l}.order`:"order",u=this.url.searchParams.get(c);return this.url.searchParams.set(c,`${u?`${u},`:""}${r}.${i?"asc":"desc"}${o===void 0?"":o?".nullsfirst":".nullslast"}`),this}limit(r,{foreignTable:i,referencedTable:o=i}={}){const a=typeof o>"u"?"limit":`${o}.limit`;return this.url.searchParams.set(a,`${r}`),this}range(r,i,{foreignTable:o,referencedTable:a=o}={}){const l=typeof a>"u"?"offset":`${a}.offset`,c=typeof a>"u"?"limit":`${a}.limit`;return this.url.searchParams.set(l,`${r}`),this.url.searchParams.set(c,`${i-r+1}`),this}abortSignal(r){return this.signal=r,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:r=!1,verbose:i=!1,settings:o=!1,buffers:a=!1,wal:l=!1,format:c="text"}={}){var u;const d=[r?"analyze":null,i?"verbose":null,o?"settings":null,a?"buffers":null,l?"wal":null].filter(Boolean).join("|"),f=(u=this.headers.get("Accept"))!==null&&u!==void 0?u:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${c}; for="${f}"; options=${d};`),c==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(r){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${r}`),this}}return Jn.default=s,Jn}var Sa;function lo(){if(Sa)return Gn;Sa=1,Object.defineProperty(Gn,"__esModule",{value:!0});const e=rn.__importDefault(Xc()),s=new RegExp("[,()]");class n extends e.default{eq(i,o){return this.url.searchParams.append(i,`eq.${o}`),this}neq(i,o){return this.url.searchParams.append(i,`neq.${o}`),this}gt(i,o){return this.url.searchParams.append(i,`gt.${o}`),this}gte(i,o){return this.url.searchParams.append(i,`gte.${o}`),this}lt(i,o){return this.url.searchParams.append(i,`lt.${o}`),this}lte(i,o){return this.url.searchParams.append(i,`lte.${o}`),this}like(i,o){return this.url.searchParams.append(i,`like.${o}`),this}likeAllOf(i,o){return this.url.searchParams.append(i,`like(all).{${o.join(",")}}`),this}likeAnyOf(i,o){return this.url.searchParams.append(i,`like(any).{${o.join(",")}}`),this}ilike(i,o){return this.url.searchParams.append(i,`ilike.${o}`),this}ilikeAllOf(i,o){return this.url.searchParams.append(i,`ilike(all).{${o.join(",")}}`),this}ilikeAnyOf(i,o){return this.url.searchParams.append(i,`ilike(any).{${o.join(",")}}`),this}regexMatch(i,o){return this.url.searchParams.append(i,`match.${o}`),this}regexIMatch(i,o){return this.url.searchParams.append(i,`imatch.${o}`),this}is(i,o){return this.url.searchParams.append(i,`is.${o}`),this}isDistinct(i,o){return this.url.searchParams.append(i,`isdistinct.${o}`),this}in(i,o){const a=Array.from(new Set(o)).map(l=>typeof l=="string"&&s.test(l)?`"${l}"`:`${l}`).join(",");return this.url.searchParams.append(i,`in.(${a})`),this}contains(i,o){return typeof o=="string"?this.url.searchParams.append(i,`cs.${o}`):Array.isArray(o)?this.url.searchParams.append(i,`cs.{${o.join(",")}}`):this.url.searchParams.append(i,`cs.${JSON.stringify(o)}`),this}containedBy(i,o){return typeof o=="string"?this.url.searchParams.append(i,`cd.${o}`):Array.isArray(o)?this.url.searchParams.append(i,`cd.{${o.join(",")}}`):this.url.searchParams.append(i,`cd.${JSON.stringify(o)}`),this}rangeGt(i,o){return this.url.searchParams.append(i,`sr.${o}`),this}rangeGte(i,o){return this.url.searchParams.append(i,`nxl.${o}`),this}rangeLt(i,o){return this.url.searchParams.append(i,`sl.${o}`),this}rangeLte(i,o){return this.url.searchParams.append(i,`nxr.${o}`),this}rangeAdjacent(i,o){return this.url.searchParams.append(i,`adj.${o}`),this}overlaps(i,o){return typeof o=="string"?this.url.searchParams.append(i,`ov.${o}`):this.url.searchParams.append(i,`ov.{${o.join(",")}}`),this}textSearch(i,o,{config:a,type:l}={}){let c="";l==="plain"?c="pl":l==="phrase"?c="ph":l==="websearch"&&(c="w");const u=a===void 0?"":`(${a})`;return this.url.searchParams.append(i,`${c}fts${u}.${o}`),this}match(i){return Object.entries(i).forEach(([o,a])=>{this.url.searchParams.append(o,`eq.${a}`)}),this}not(i,o,a){return this.url.searchParams.append(i,`not.${o}.${a}`),this}or(i,{foreignTable:o,referencedTable:a=o}={}){const l=a?`${a}.or`:"or";return this.url.searchParams.append(l,`(${i})`),this}filter(i,o,a){return this.url.searchParams.append(i,`${o}.${a}`),this}}return Gn.default=n,Gn}var Ea;function eu(){if(Ea)return zn;Ea=1,Object.defineProperty(zn,"__esModule",{value:!0});const e=rn.__importDefault(lo());class s{constructor(r,{headers:i={},schema:o,fetch:a}){this.url=r,this.headers=new Headers(i),this.schema=o,this.fetch=a}select(r,i){const{head:o=!1,count:a}=i??{},l=o?"HEAD":"GET";let c=!1;const u=(r??"*").split("").map(d=>/\s/.test(d)&&!c?"":(d==='"'&&(c=!c),d)).join("");return this.url.searchParams.set("select",u),a&&this.headers.append("Prefer",`count=${a}`),new e.default({method:l,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(r,{count:i,defaultToNull:o=!0}={}){var a;const l="POST";if(i&&this.headers.append("Prefer",`count=${i}`),o||this.headers.append("Prefer","missing=default"),Array.isArray(r)){const c=r.reduce((u,d)=>u.concat(Object.keys(d)),[]);if(c.length>0){const u=[...new Set(c)].map(d=>`"${d}"`);this.url.searchParams.set("columns",u.join(","))}}return new e.default({method:l,url:this.url,headers:this.headers,schema:this.schema,body:r,fetch:(a=this.fetch)!==null&&a!==void 0?a:fetch})}upsert(r,{onConflict:i,ignoreDuplicates:o=!1,count:a,defaultToNull:l=!0}={}){var c;const u="POST";if(this.headers.append("Prefer",`resolution=${o?"ignore":"merge"}-duplicates`),i!==void 0&&this.url.searchParams.set("on_conflict",i),a&&this.headers.append("Prefer",`count=${a}`),l||this.headers.append("Prefer","missing=default"),Array.isArray(r)){const d=r.reduce((f,h)=>f.concat(Object.keys(h)),[]);if(d.length>0){const f=[...new Set(d)].map(h=>`"${h}"`);this.url.searchParams.set("columns",f.join(","))}}return new e.default({method:u,url:this.url,headers:this.headers,schema:this.schema,body:r,fetch:(c=this.fetch)!==null&&c!==void 0?c:fetch})}update(r,{count:i}={}){var o;const a="PATCH";return i&&this.headers.append("Prefer",`count=${i}`),new e.default({method:a,url:this.url,headers:this.headers,schema:this.schema,body:r,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch})}delete({count:r}={}){var i;const o="DELETE";return r&&this.headers.append("Prefer",`count=${r}`),new e.default({method:o,url:this.url,headers:this.headers,schema:this.schema,fetch:(i=this.fetch)!==null&&i!==void 0?i:fetch})}}return zn.default=s,zn}var Ia;function vp(){if(Ia)return Wn;Ia=1,Object.defineProperty(Wn,"__esModule",{value:!0});const t=rn,e=t.__importDefault(eu()),s=t.__importDefault(lo());class n{constructor(i,{headers:o={},schema:a,fetch:l}={}){this.url=i,this.headers=new Headers(o),this.schemaName=a,this.fetch=l}from(i){if(!i||typeof i!="string"||i.trim()==="")throw new Error("Invalid relation name: relation must be a non-empty string.");const o=new URL(`${this.url}/${i}`);return new e.default(o,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(i){return new n(this.url,{headers:this.headers,schema:i,fetch:this.fetch})}rpc(i,o={},{head:a=!1,get:l=!1,count:c}={}){var u;let d;const f=new URL(`${this.url}/rpc/${i}`);let h;a||l?(d=a?"HEAD":"GET",Object.entries(o).filter(([y,E])=>E!==void 0).map(([y,E])=>[y,Array.isArray(E)?`{${E.join(",")}}`:`${E}`]).forEach(([y,E])=>{f.searchParams.append(y,E)})):(d="POST",h=o);const v=new Headers(this.headers);return c&&v.set("Prefer",`count=${c}`),new s.default({method:d,url:f,headers:v,schema:this.schemaName,body:h,fetch:(u=this.fetch)!==null&&u!==void 0?u:fetch})}}return Wn.default=n,Wn}var Ta;function mp(){if(Ta)return He;Ta=1,Object.defineProperty(He,"__esModule",{value:!0}),He.PostgrestError=He.PostgrestBuilder=He.PostgrestTransformBuilder=He.PostgrestFilterBuilder=He.PostgrestQueryBuilder=He.PostgrestClient=void 0;const t=rn,e=t.__importDefault(vp());He.PostgrestClient=e.default;const s=t.__importDefault(eu());He.PostgrestQueryBuilder=s.default;const n=t.__importDefault(lo());He.PostgrestFilterBuilder=n.default;const r=t.__importDefault(Xc());He.PostgrestTransformBuilder=r.default;const i=t.__importDefault(Yc());He.PostgrestBuilder=i.default;const o=t.__importDefault(Qc());return He.PostgrestError=o.default,He.default={PostgrestClient:e.default,PostgrestQueryBuilder:s.default,PostgrestFilterBuilder:n.default,PostgrestTransformBuilder:r.default,PostgrestBuilder:i.default,PostgrestError:o.default},He}var tu=mp();const su=pp(tu),_p=Su({__proto__:null,default:su},[tu]),{PostgrestClient:yp,PostgrestQueryBuilder:Vw,PostgrestFilterBuilder:Kw,PostgrestTransformBuilder:Ww,PostgrestBuilder:zw,PostgrestError:Gw}=su||_p;class bp{constructor(){}static detectEnvironment(){var e;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((e=navigator.userAgent)===null||e===void 0)&&e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const s=process.versions;if(s&&s.node){const n=s.node,r=parseInt(n.replace(/^v/,"").split(".")[0]);return r>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${r} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${r} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let s=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(s+=`

Suggested solution: ${e.workaround}`),new Error(s)}static createWebSocket(e,s){const n=this.getWebSocketConstructor();return new n(e,s)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return e.type==="native"||e.type==="ws"}catch{return!1}}}const wp="2.86.0",kp=`realtime-js/${wp}`,nu="1.0.0",Sp="2.0.0",xa=nu,$i=1e4,Ep=1e3,Ip=100;var ks;(function(t){t[t.connecting=0]="connecting",t[t.open=1]="open",t[t.closing=2]="closing",t[t.closed=3]="closed"})(ks||(ks={}));var De;(function(t){t.closed="closed",t.errored="errored",t.joined="joined",t.joining="joining",t.leaving="leaving"})(De||(De={}));var kt;(function(t){t.close="phx_close",t.error="phx_error",t.join="phx_join",t.reply="phx_reply",t.leave="phx_leave",t.access_token="access_token"})(kt||(kt={}));var Pi;(function(t){t.websocket="websocket"})(Pi||(Pi={}));var Ss;(function(t){t.Connecting="connecting",t.Open="open",t.Closing="closing",t.Closed="closed"})(Ss||(Ss={}));class Tp{constructor(e){this.HEADER_LENGTH=1,this.USER_BROADCAST_PUSH_META_LENGTH=6,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT="broadcast",this.allowedMetadataKeys=[],this.allowedMetadataKeys=e??[]}encode(e,s){if(e.event===this.BROADCAST_EVENT&&!(e.payload instanceof ArrayBuffer)&&typeof e.payload.event=="string")return s(this._binaryEncodeUserBroadcastPush(e));let n=[e.join_ref,e.ref,e.topic,e.event,e.payload];return s(JSON.stringify(n))}_binaryEncodeUserBroadcastPush(e){var s;return this._isArrayBuffer((s=e.payload)===null||s===void 0?void 0:s.payload)?this._encodeBinaryUserBroadcastPush(e):this._encodeJsonUserBroadcastPush(e)}_encodeBinaryUserBroadcastPush(e){var s,n;const r=(n=(s=e.payload)===null||s===void 0?void 0:s.payload)!==null&&n!==void 0?n:new ArrayBuffer(0);return this._encodeUserBroadcastPush(e,this.BINARY_ENCODING,r)}_encodeJsonUserBroadcastPush(e){var s,n;const r=(n=(s=e.payload)===null||s===void 0?void 0:s.payload)!==null&&n!==void 0?n:{},o=new TextEncoder().encode(JSON.stringify(r)).buffer;return this._encodeUserBroadcastPush(e,this.JSON_ENCODING,o)}_encodeUserBroadcastPush(e,s,n){var r,i;const o=e.topic,a=(r=e.ref)!==null&&r!==void 0?r:"",l=(i=e.join_ref)!==null&&i!==void 0?i:"",c=e.payload.event,u=this.allowedMetadataKeys?this._pick(e.payload,this.allowedMetadataKeys):{},d=Object.keys(u).length===0?"":JSON.stringify(u);if(l.length>255)throw new Error(`joinRef length ${l.length} exceeds maximum of 255`);if(a.length>255)throw new Error(`ref length ${a.length} exceeds maximum of 255`);if(o.length>255)throw new Error(`topic length ${o.length} exceeds maximum of 255`);if(c.length>255)throw new Error(`userEvent length ${c.length} exceeds maximum of 255`);if(d.length>255)throw new Error(`metadata length ${d.length} exceeds maximum of 255`);const f=this.USER_BROADCAST_PUSH_META_LENGTH+l.length+a.length+o.length+c.length+d.length,h=new ArrayBuffer(this.HEADER_LENGTH+f);let v=new DataView(h),y=0;v.setUint8(y++,this.KINDS.userBroadcastPush),v.setUint8(y++,l.length),v.setUint8(y++,a.length),v.setUint8(y++,o.length),v.setUint8(y++,c.length),v.setUint8(y++,d.length),v.setUint8(y++,s),Array.from(l,S=>v.setUint8(y++,S.charCodeAt(0))),Array.from(a,S=>v.setUint8(y++,S.charCodeAt(0))),Array.from(o,S=>v.setUint8(y++,S.charCodeAt(0))),Array.from(c,S=>v.setUint8(y++,S.charCodeAt(0))),Array.from(d,S=>v.setUint8(y++,S.charCodeAt(0)));var E=new Uint8Array(h.byteLength+n.byteLength);return E.set(new Uint8Array(h),0),E.set(new Uint8Array(n),h.byteLength),E.buffer}decode(e,s){if(this._isArrayBuffer(e)){let n=this._binaryDecode(e);return s(n)}if(typeof e=="string"){const n=JSON.parse(e),[r,i,o,a,l]=n;return s({join_ref:r,ref:i,topic:o,event:a,payload:l})}return s({})}_binaryDecode(e){const s=new DataView(e),n=s.getUint8(0),r=new TextDecoder;switch(n){case this.KINDS.userBroadcast:return this._decodeUserBroadcast(e,s,r)}}_decodeUserBroadcast(e,s,n){const r=s.getUint8(1),i=s.getUint8(2),o=s.getUint8(3),a=s.getUint8(4);let l=this.HEADER_LENGTH+4;const c=n.decode(e.slice(l,l+r));l=l+r;const u=n.decode(e.slice(l,l+i));l=l+i;const d=n.decode(e.slice(l,l+o));l=l+o;const f=e.slice(l,e.byteLength),h=a===this.JSON_ENCODING?JSON.parse(n.decode(f)):f,v={type:this.BROADCAST_EVENT,event:u,payload:h};return o>0&&(v.meta=JSON.parse(d)),{join_ref:null,ref:null,topic:c,event:this.BROADCAST_EVENT,payload:v}}_isArrayBuffer(e){var s;return e instanceof ArrayBuffer||((s=e?.constructor)===null||s===void 0?void 0:s.name)==="ArrayBuffer"}_pick(e,s){return!e||typeof e!="object"?{}:Object.fromEntries(Object.entries(e).filter(([n])=>s.includes(n)))}}class ru{constructor(e,s){this.callback=e,this.timerCalc=s,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=s}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Ie;(function(t){t.abstime="abstime",t.bool="bool",t.date="date",t.daterange="daterange",t.float4="float4",t.float8="float8",t.int2="int2",t.int4="int4",t.int4range="int4range",t.int8="int8",t.int8range="int8range",t.json="json",t.jsonb="jsonb",t.money="money",t.numeric="numeric",t.oid="oid",t.reltime="reltime",t.text="text",t.time="time",t.timestamp="timestamp",t.timestamptz="timestamptz",t.timetz="timetz",t.tsrange="tsrange",t.tstzrange="tstzrange"})(Ie||(Ie={}));const Aa=(t,e,s={})=>{var n;const r=(n=s.skipTypes)!==null&&n!==void 0?n:[];return e?Object.keys(e).reduce((i,o)=>(i[o]=xp(o,t,e,r),i),{}):{}},xp=(t,e,s,n)=>{const r=e.find(a=>a.name===t),i=r?.type,o=s[t];return i&&!n.includes(i)?iu(i,o):ji(o)},iu=(t,e)=>{if(t.charAt(0)==="_"){const s=t.slice(1,t.length);return Rp(e,s)}switch(t){case Ie.bool:return Ap(e);case Ie.float4:case Ie.float8:case Ie.int2:case Ie.int4:case Ie.int8:case Ie.numeric:case Ie.oid:return Op(e);case Ie.json:case Ie.jsonb:return Cp(e);case Ie.timestamp:return $p(e);case Ie.abstime:case Ie.date:case Ie.daterange:case Ie.int4range:case Ie.int8range:case Ie.money:case Ie.reltime:case Ie.text:case Ie.time:case Ie.timestamptz:case Ie.timetz:case Ie.tsrange:case Ie.tstzrange:return ji(e);default:return ji(e)}},ji=t=>t,Ap=t=>{switch(t){case"t":return!0;case"f":return!1;default:return t}},Op=t=>{if(typeof t=="string"){const e=parseFloat(t);if(!Number.isNaN(e))return e}return t},Cp=t=>{if(typeof t=="string")try{return JSON.parse(t)}catch(e){return console.log(`JSON parse error: ${e}`),t}return t},Rp=(t,e)=>{if(typeof t!="string")return t;const s=t.length-1,n=t[s];if(t[0]==="{"&&n==="}"){let i;const o=t.slice(1,s);try{i=JSON.parse("["+o+"]")}catch{i=o?o.split(","):[]}return i.map(a=>iu(e,a))}return t},$p=t=>typeof t=="string"?t.replace(" ","T"):t,ou=t=>{const e=new URL(t);return e.protocol=e.protocol.replace(/^ws/i,"http"),e.pathname=e.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),e.pathname===""||e.pathname==="/"?e.pathname="/api/broadcast":e.pathname=e.pathname+"/api/broadcast",e.href};class ni{constructor(e,s,n={},r=$i){this.channel=e,this.event=s,this.payload=n,this.timeout=r,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,s){var n;return this._hasReceived(e)&&s((n=this.receivedResp)===null||n===void 0?void 0:n.response),this.recHooks.push({status:e,callback:s}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=s=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=s,this._matchReceive(s)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,s){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:s})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:s}){this.recHooks.filter(n=>n.status===e).forEach(n=>n.callback(s))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var Oa;(function(t){t.SYNC="sync",t.JOIN="join",t.LEAVE="leave"})(Oa||(Oa={}));class En{constructor(e,s){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const n=s?.events||{state:"presence_state",diff:"presence_diff"};this.channel._on(n.state,{},r=>{const{onJoin:i,onLeave:o,onSync:a}=this.caller;this.joinRef=this.channel._joinRef(),this.state=En.syncState(this.state,r,i,o),this.pendingDiffs.forEach(l=>{this.state=En.syncDiff(this.state,l,i,o)}),this.pendingDiffs=[],a()}),this.channel._on(n.diff,{},r=>{const{onJoin:i,onLeave:o,onSync:a}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(r):(this.state=En.syncDiff(this.state,r,i,o),a())}),this.onJoin((r,i,o)=>{this.channel._trigger("presence",{event:"join",key:r,currentPresences:i,newPresences:o})}),this.onLeave((r,i,o)=>{this.channel._trigger("presence",{event:"leave",key:r,currentPresences:i,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,s,n,r){const i=this.cloneDeep(e),o=this.transformState(s),a={},l={};return this.map(i,(c,u)=>{o[c]||(l[c]=u)}),this.map(o,(c,u)=>{const d=i[c];if(d){const f=u.map(E=>E.presence_ref),h=d.map(E=>E.presence_ref),v=u.filter(E=>h.indexOf(E.presence_ref)<0),y=d.filter(E=>f.indexOf(E.presence_ref)<0);v.length>0&&(a[c]=v),y.length>0&&(l[c]=y)}else a[c]=u}),this.syncDiff(i,{joins:a,leaves:l},n,r)}static syncDiff(e,s,n,r){const{joins:i,leaves:o}={joins:this.transformState(s.joins),leaves:this.transformState(s.leaves)};return n||(n=()=>{}),r||(r=()=>{}),this.map(i,(a,l)=>{var c;const u=(c=e[a])!==null&&c!==void 0?c:[];if(e[a]=this.cloneDeep(l),u.length>0){const d=e[a].map(h=>h.presence_ref),f=u.filter(h=>d.indexOf(h.presence_ref)<0);e[a].unshift(...f)}n(a,u,l)}),this.map(o,(a,l)=>{let c=e[a];if(!c)return;const u=l.map(d=>d.presence_ref);c=c.filter(d=>u.indexOf(d.presence_ref)<0),e[a]=c,r(a,c,l),c.length===0&&delete e[a]}),e}static map(e,s){return Object.getOwnPropertyNames(e).map(n=>s(n,e[n]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((s,n)=>{const r=e[n];return"metas"in r?s[n]=r.metas.map(i=>(i.presence_ref=i.phx_ref,delete i.phx_ref,delete i.phx_ref_prev,i)):s[n]=r,s},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var Ca;(function(t){t.ALL="*",t.INSERT="INSERT",t.UPDATE="UPDATE",t.DELETE="DELETE"})(Ca||(Ca={}));var In;(function(t){t.BROADCAST="broadcast",t.PRESENCE="presence",t.POSTGRES_CHANGES="postgres_changes",t.SYSTEM="system"})(In||(In={}));var qt;(function(t){t.SUBSCRIBED="SUBSCRIBED",t.TIMED_OUT="TIMED_OUT",t.CLOSED="CLOSED",t.CHANNEL_ERROR="CHANNEL_ERROR"})(qt||(qt={}));class co{constructor(e,s={config:{}},n){var r,i;if(this.topic=e,this.params=s,this.socket=n,this.bindings={},this.state=De.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},s.config),this.timeout=this.socket.timeout,this.joinPush=new ni(this,kt.join,this.params,this.timeout),this.rejoinTimer=new ru(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=De.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(o=>o.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=De.closed,this.socket._remove(this)}),this._onError(o=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,o),this.state=De.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=De.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",o=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,o),this.state=De.errored,this.rejoinTimer.scheduleTimeout())}),this._on(kt.reply,{},(o,a)=>{this._trigger(this._replyEventName(a),o)}),this.presence=new En(this),this.broadcastEndpointURL=ou(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((i=(r=this.params.config)===null||r===void 0?void 0:r.broadcast)===null||i===void 0)&&i.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(e,s=this.timeout){var n,r,i;if(this.socket.isConnected()||this.socket.connect(),this.state==De.closed){const{config:{broadcast:o,presence:a,private:l}}=this.params,c=(r=(n=this.bindings.postgres_changes)===null||n===void 0?void 0:n.map(h=>h.filter))!==null&&r!==void 0?r:[],u=!!this.bindings[In.PRESENCE]&&this.bindings[In.PRESENCE].length>0||((i=this.params.config.presence)===null||i===void 0?void 0:i.enabled)===!0,d={},f={broadcast:o,presence:Object.assign(Object.assign({},a),{enabled:u}),postgres_changes:c,private:l};this.socket.accessTokenValue&&(d.access_token=this.socket.accessTokenValue),this._onError(h=>e?.(qt.CHANNEL_ERROR,h)),this._onClose(()=>e?.(qt.CLOSED)),this.updateJoinPayload(Object.assign({config:f},d)),this.joinedOnce=!0,this._rejoin(s),this.joinPush.receive("ok",async({postgres_changes:h})=>{var v;if(this.socket.setAuth(),h===void 0){e?.(qt.SUBSCRIBED);return}else{const y=this.bindings.postgres_changes,E=(v=y?.length)!==null&&v!==void 0?v:0,S=[];for(let m=0;m<E;m++){const g=y[m],{filter:{event:k,schema:A,table:U,filter:z}}=g,Y=h&&h[m];if(Y&&Y.event===k&&Y.schema===A&&Y.table===U&&Y.filter===z)S.push(Object.assign(Object.assign({},g),{id:Y.id}));else{this.unsubscribe(),this.state=De.errored,e?.(qt.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=S,e&&e(qt.SUBSCRIBED);return}}).receive("error",h=>{this.state=De.errored,e?.(qt.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(h).join(", ")||"error")))}).receive("timeout",()=>{e?.(qt.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,s={}){return await this.send({type:"presence",event:"track",payload:e},s.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,s,n){return this.state===De.joined&&e===In.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(e,s,n)}async httpSend(e,s,n={}){var r;const i=this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"";if(s==null)return Promise.reject("Payload is required for httpSend()");const o={method:"POST",headers:{Authorization:i,apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:e,payload:s,private:this.private}]})},a=await this._fetchWithTimeout(this.broadcastEndpointURL,o,(r=n.timeout)!==null&&r!==void 0?r:this.timeout);if(a.status===202)return{success:!0};let l=a.statusText;try{const c=await a.json();l=c.error||c.message||l}catch{}return Promise.reject(new Error(l))}async send(e,s={}){var n,r;if(!this._canPush()&&e.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:i,payload:o}=e,l={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:o,private:this.private}]})};try{const c=await this._fetchWithTimeout(this.broadcastEndpointURL,l,(n=s.timeout)!==null&&n!==void 0?n:this.timeout);return await((r=c.body)===null||r===void 0?void 0:r.cancel()),c.ok?"ok":"error"}catch(c){return c.name==="AbortError"?"timed out":"error"}}else return new Promise(i=>{var o,a,l;const c=this._push(e.type,e,s.timeout||this.timeout);e.type==="broadcast"&&!(!((l=(a=(o=this.params)===null||o===void 0?void 0:o.config)===null||a===void 0?void 0:a.broadcast)===null||l===void 0)&&l.ack)&&i("ok"),c.receive("ok",()=>i("ok")),c.receive("error",()=>i("error")),c.receive("timeout",()=>i("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=De.leaving;const s=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(kt.close,"leave",this._joinRef())};this.joinPush.destroy();let n=null;return new Promise(r=>{n=new ni(this,kt.leave,{},e),n.receive("ok",()=>{s(),r("ok")}).receive("timeout",()=>{s(),r("timed out")}).receive("error",()=>{r("error")}),n.send(),this._canPush()||n.trigger("ok",{})}).finally(()=>{n?.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=De.closed,this.bindings={}}async _fetchWithTimeout(e,s,n){const r=new AbortController,i=setTimeout(()=>r.abort(),n),o=await this.socket.fetch(e,Object.assign(Object.assign({},s),{signal:r.signal}));return clearTimeout(i),o}_push(e,s,n=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let r=new ni(this,e,s,n);return this._canPush()?r.send():this._addToPushBuffer(r),r}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>Ip){const s=this.pushBuffer.shift();s&&(s.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${s.event}`,s.payload))}}_onMessage(e,s,n){return s}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,s,n){var r,i;const o=e.toLocaleLowerCase(),{close:a,error:l,leave:c,join:u}=kt;if(n&&[a,l,c,u].indexOf(o)>=0&&n!==this._joinRef())return;let f=this._onMessage(o,s,n);if(s&&!f)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(r=this.bindings.postgres_changes)===null||r===void 0||r.filter(h=>{var v,y,E;return((v=h.filter)===null||v===void 0?void 0:v.event)==="*"||((E=(y=h.filter)===null||y===void 0?void 0:y.event)===null||E===void 0?void 0:E.toLocaleLowerCase())===o}).map(h=>h.callback(f,n)):(i=this.bindings[o])===null||i===void 0||i.filter(h=>{var v,y,E,S,m,g;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in h){const k=h.id,A=(v=h.filter)===null||v===void 0?void 0:v.event;return k&&((y=s.ids)===null||y===void 0?void 0:y.includes(k))&&(A==="*"||A?.toLocaleLowerCase()===((E=s.data)===null||E===void 0?void 0:E.type.toLocaleLowerCase()))}else{const k=(m=(S=h?.filter)===null||S===void 0?void 0:S.event)===null||m===void 0?void 0:m.toLocaleLowerCase();return k==="*"||k===((g=s?.event)===null||g===void 0?void 0:g.toLocaleLowerCase())}else return h.type.toLocaleLowerCase()===o}).map(h=>{if(typeof f=="object"&&"ids"in f){const v=f.data,{schema:y,table:E,commit_timestamp:S,type:m,errors:g}=v;f=Object.assign(Object.assign({},{schema:y,table:E,commit_timestamp:S,eventType:m,new:{},old:{},errors:g}),this._getPayloadRecords(v))}h.callback(f,n)})}_isClosed(){return this.state===De.closed}_isJoined(){return this.state===De.joined}_isJoining(){return this.state===De.joining}_isLeaving(){return this.state===De.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,s,n){const r=e.toLocaleLowerCase(),i={type:r,filter:s,callback:n};return this.bindings[r]?this.bindings[r].push(i):this.bindings[r]=[i],this}_off(e,s){const n=e.toLocaleLowerCase();return this.bindings[n]&&(this.bindings[n]=this.bindings[n].filter(r=>{var i;return!(((i=r.type)===null||i===void 0?void 0:i.toLocaleLowerCase())===n&&co.isEqual(r.filter,s))})),this}static isEqual(e,s){if(Object.keys(e).length!==Object.keys(s).length)return!1;for(const n in e)if(e[n]!==s[n])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(kt.close,{},e)}_onError(e){this._on(kt.error,{},s=>e(s))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=De.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const s={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(s.new=Aa(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(s.old=Aa(e.columns,e.old_record)),s}}const ri=()=>{},Yn={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},Pp=[1e3,2e3,5e3,1e4],jp=1e4,Np=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class Lp{constructor(e,s){var n;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=$i,this.transport=null,this.heartbeatIntervalMs=Yn.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=ri,this.ref=0,this.reconnectTimer=null,this.vsn=xa,this.logger=ri,this.conn=null,this.sendBuffer=[],this.serializer=new Tp,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=r=>r?(...i)=>r(...i):(...i)=>fetch(...i),!(!((n=s?.params)===null||n===void 0)&&n.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=s.params.apikey,this.endPoint=`${e}/${Pi.websocket}`,this.httpEndpoint=ou(e),this._initializeOptions(s),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(s?.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=bp.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const s=e.message;throw s.includes("Node.js")?new Error(`${s}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${s}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(e,s){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const n=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(n),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(e?this.conn.close(e,s??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const s=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),s}async removeAllChannels(){const e=await Promise.all(this.channels.map(s=>s.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,s,n){this.logger(e,s,n)}connectionState(){switch(this.conn&&this.conn.readyState){case ks.connecting:return Ss.Connecting;case ks.open:return Ss.Open;case ks.closing:return Ss.Closing;default:return Ss.Closed}}isConnected(){return this.connectionState()===Ss.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(e,s={config:{}}){const n=`realtime:${e}`,r=this.getChannels().find(i=>i.topic===n);if(r)return r;{const i=new co(`realtime:${e}`,s,this);return this.channels.push(i),i}}push(e){const{topic:s,event:n,payload:r,ref:i}=e,o=()=>{this.encode(e,a=>{var l;(l=this.conn)===null||l===void 0||l.send(a)})};this.log("push",`${s} ${n} (${i})`,r),this.isConnected()?o():this.sendBuffer.push(o)}async setAuth(e=null){this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var e;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(s){this.log("error","error in heartbeat callback",s)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(s){this.log("error","error in heartbeat callback",s)}this._wasManualDisconnect=!1,(e=this.conn)===null||e===void 0||e.close(Ep,"heartbeat timeout"),setTimeout(()=>{var s;this.isConnected()||(s=this.reconnectTimer)===null||s===void 0||s.scheduleTimeout()},Yn.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(s){this.log("error","error in heartbeat callback",s)}this._setAuthSafely("heartbeat")}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let s=this.channels.find(n=>n.topic===e&&(n._isJoined()||n._isJoining()));s&&(this.log("transport",`leaving duplicate topic "${e}"`),s.unsubscribe())}_remove(e){this.channels=this.channels.filter(s=>s.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,s=>{if(s.topic==="phoenix"&&s.event==="phx_reply")try{this.heartbeatCallback(s.payload.status==="ok"?"ok":"error")}catch(c){this.log("error","error in heartbeat callback",c)}s.ref&&s.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:n,event:r,payload:i,ref:o}=s,a=o?`(${o})`:"",l=i.status||"";this.log("receive",`${l} ${n} ${r} ${a}`.trim(),i),this.channels.filter(c=>c._isMember(n)).forEach(c=>c._trigger(r,i,o)),this._triggerStateCallbacks("message",s)})}_clearTimer(e){var s;e==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):e==="reconnect"&&((s=this.reconnectTimer)===null||s===void 0||s.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_teardownConnection(){if(this.conn){if(this.conn.readyState===ks.open||this.conn.readyState===ks.connecting)try{this.conn.close()}catch(e){this.log("error","Error closing connection",e)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(s=>{this.log("error","error waiting for auth on connect",s),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=s=>{this.log("worker","worker error",s.message),this.workerRef.terminate()},this.workerRef.onmessage=s=>{s.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(e){var s;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(s=this.reconnectTimer)===null||s===void 0||s.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e)}_triggerChanError(){this.channels.forEach(e=>e._trigger(kt.error))}_appendParams(e,s){if(Object.keys(s).length===0)return e;const n=e.match(/\?/)?"&":"?",r=new URLSearchParams(s);return`${e}${n}${r}`}_workerObjectUrl(e){let s;if(e)s=e;else{const n=new Blob([Np],{type:"application/javascript"});s=URL.createObjectURL(n)}return s}_setConnectionState(e,s=!1){this._connectionState=e,e==="connecting"?this._wasManualDisconnect=!1:e==="disconnecting"&&(this._wasManualDisconnect=s)}async _performAuth(e=null){let s;e?s=e:this.accessToken?s=await this.accessToken():s=this.accessTokenValue,this.accessTokenValue!=s&&(this.accessTokenValue=s,this.channels.forEach(n=>{const r={access_token:s,version:kp};s&&n.updateJoinPayload(r),n.joinedOnce&&n._isJoined()&&n._push(kt.access_token,{access_token:s})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(e="general"){this.setAuth().catch(s=>{this.log("error",`error setting auth in ${e}`,s)})}_triggerStateCallbacks(e,s){try{this.stateChangeCallbacks[e].forEach(n=>{try{n(s)}catch(r){this.log("error",`error in ${e} callback`,r)}})}catch(n){this.log("error",`error triggering ${e} callbacks`,n)}}_setupReconnectionTimer(){this.reconnectTimer=new ru(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},Yn.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(e){var s,n,r,i,o,a,l,c,u,d,f,h;switch(this.transport=(s=e?.transport)!==null&&s!==void 0?s:null,this.timeout=(n=e?.timeout)!==null&&n!==void 0?n:$i,this.heartbeatIntervalMs=(r=e?.heartbeatIntervalMs)!==null&&r!==void 0?r:Yn.HEARTBEAT_INTERVAL,this.worker=(i=e?.worker)!==null&&i!==void 0?i:!1,this.accessToken=(o=e?.accessToken)!==null&&o!==void 0?o:null,this.heartbeatCallback=(a=e?.heartbeatCallback)!==null&&a!==void 0?a:ri,this.vsn=(l=e?.vsn)!==null&&l!==void 0?l:xa,e?.params&&(this.params=e.params),e?.logger&&(this.logger=e.logger),(e?.logLevel||e?.log_level)&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(c=e?.reconnectAfterMs)!==null&&c!==void 0?c:(v=>Pp[v-1]||jp),this.vsn){case nu:this.encode=(u=e?.encode)!==null&&u!==void 0?u:((v,y)=>y(JSON.stringify(v))),this.decode=(d=e?.decode)!==null&&d!==void 0?d:((v,y)=>y(JSON.parse(v)));break;case Sp:this.encode=(f=e?.encode)!==null&&f!==void 0?f:this.serializer.encode.bind(this.serializer),this.decode=(h=e?.decode)!==null&&h!==void 0?h:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=e?.workerUrl}}}class Mr extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function Oe(t){return typeof t=="object"&&t!==null&&"__isStorageError"in t}class Dp extends Mr{constructor(e,s,n){super(e),this.name="StorageApiError",this.status=s,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class Ni extends Mr{constructor(e,s){super(e),this.name="StorageUnknownError",this.originalError=s}}const uo=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),Up=()=>Response,Li=t=>{if(Array.isArray(t))return t.map(s=>Li(s));if(typeof t=="function"||t!==Object(t))return t;const e={};return Object.entries(t).forEach(([s,n])=>{const r=s.replace(/([-_][a-z])/gi,i=>i.toUpperCase().replace(/[-_]/g,""));e[r]=Li(n)}),e},Bp=t=>{if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},Mp=t=>!t||typeof t!="string"||t.length===0||t.length>100||t.trim()!==t||t.includes("/")||t.includes("\\")?!1:/^[\w!.\*'() &$@=;:+,?-]+$/.test(t),ii=t=>{var e;return t.msg||t.message||t.error_description||(typeof t.error=="string"?t.error:(e=t.error)===null||e===void 0?void 0:e.message)||JSON.stringify(t)},Fp=(t,e,s)=>G(void 0,void 0,void 0,function*(){const n=yield Up();t instanceof n&&!s?.noResolveJson?t.json().then(r=>{const i=t.status||500,o=r?.statusCode||i+"";e(new Dp(ii(r),i,o))}).catch(r=>{e(new Ni(ii(r),r))}):e(new Ni(ii(t),t))}),qp=(t,e,s,n)=>{const r={method:t,headers:e?.headers||{}};return t==="GET"||!n?r:(Bp(n)?(r.headers=Object.assign({"Content-Type":"application/json"},e?.headers),r.body=JSON.stringify(n)):r.body=n,e?.duplex&&(r.duplex=e.duplex),Object.assign(Object.assign({},r),s))};function Fn(t,e,s,n,r,i){return G(this,void 0,void 0,function*(){return new Promise((o,a)=>{t(s,qp(e,n,r,i)).then(l=>{if(!l.ok)throw l;return n?.noResolveJson?l:l.json()}).then(l=>o(l)).catch(l=>Fp(l,a,n))})})}function jn(t,e,s,n){return G(this,void 0,void 0,function*(){return Fn(t,"GET",e,s,n)})}function wt(t,e,s,n,r){return G(this,void 0,void 0,function*(){return Fn(t,"POST",e,n,r,s)})}function Di(t,e,s,n,r){return G(this,void 0,void 0,function*(){return Fn(t,"PUT",e,n,r,s)})}function Hp(t,e,s,n){return G(this,void 0,void 0,function*(){return Fn(t,"HEAD",e,Object.assign(Object.assign({},s),{noResolveJson:!0}),n)})}function ho(t,e,s,n,r){return G(this,void 0,void 0,function*(){return Fn(t,"DELETE",e,n,r,s)})}class Vp{constructor(e,s){this.downloadFn=e,this.shouldThrowOnError=s}then(e,s){return this.execute().then(e,s)}execute(){return G(this,void 0,void 0,function*(){try{return{data:(yield this.downloadFn()).body,error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(Oe(e))return{data:null,error:e};throw e}})}}var au;class Kp{constructor(e,s){this.downloadFn=e,this.shouldThrowOnError=s,this[au]="BlobDownloadBuilder",this.promise=null}asStream(){return new Vp(this.downloadFn,this.shouldThrowOnError)}then(e,s){return this.getPromise().then(e,s)}catch(e){return this.getPromise().catch(e)}finally(e){return this.getPromise().finally(e)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}execute(){return G(this,void 0,void 0,function*(){try{return{data:yield(yield this.downloadFn()).blob(),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(Oe(e))return{data:null,error:e};throw e}})}}au=Symbol.toStringTag;const Wp={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Ra={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class zp{constructor(e,s={},n,r){this.shouldThrowOnError=!1,this.url=e,this.headers=s,this.bucketId=n,this.fetch=uo(r)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(e,s,n,r){return G(this,void 0,void 0,function*(){try{let i;const o=Object.assign(Object.assign({},Ra),r);let a=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(o.upsert)});const l=o.metadata;typeof Blob<"u"&&n instanceof Blob?(i=new FormData,i.append("cacheControl",o.cacheControl),l&&i.append("metadata",this.encodeMetadata(l)),i.append("",n)):typeof FormData<"u"&&n instanceof FormData?(i=n,i.has("cacheControl")||i.append("cacheControl",o.cacheControl),l&&!i.has("metadata")&&i.append("metadata",this.encodeMetadata(l))):(i=n,a["cache-control"]=`max-age=${o.cacheControl}`,a["content-type"]=o.contentType,l&&(a["x-metadata"]=this.toBase64(this.encodeMetadata(l))),(typeof ReadableStream<"u"&&i instanceof ReadableStream||i&&typeof i=="object"&&"pipe"in i&&typeof i.pipe=="function")&&!o.duplex&&(o.duplex="half")),r?.headers&&(a=Object.assign(Object.assign({},a),r.headers));const c=this._removeEmptyFolders(s),u=this._getFinalPath(c),d=yield(e=="PUT"?Di:wt)(this.fetch,`${this.url}/object/${u}`,i,Object.assign({headers:a},o?.duplex?{duplex:o.duplex}:{}));return{data:{path:c,id:d.Id,fullPath:d.Key},error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Oe(i))return{data:null,error:i};throw i}})}upload(e,s,n){return G(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,s,n)})}uploadToSignedUrl(e,s,n,r){return G(this,void 0,void 0,function*(){const i=this._removeEmptyFolders(e),o=this._getFinalPath(i),a=new URL(this.url+`/object/upload/sign/${o}`);a.searchParams.set("token",s);try{let l;const c=Object.assign({upsert:Ra.upsert},r),u=Object.assign(Object.assign({},this.headers),{"x-upsert":String(c.upsert)});typeof Blob<"u"&&n instanceof Blob?(l=new FormData,l.append("cacheControl",c.cacheControl),l.append("",n)):typeof FormData<"u"&&n instanceof FormData?(l=n,l.append("cacheControl",c.cacheControl)):(l=n,u["cache-control"]=`max-age=${c.cacheControl}`,u["content-type"]=c.contentType);const d=yield Di(this.fetch,a.toString(),l,{headers:u});return{data:{path:i,fullPath:d.Key},error:null}}catch(l){if(this.shouldThrowOnError)throw l;if(Oe(l))return{data:null,error:l};throw l}})}createSignedUploadUrl(e,s){return G(this,void 0,void 0,function*(){try{let n=this._getFinalPath(e);const r=Object.assign({},this.headers);s?.upsert&&(r["x-upsert"]="true");const i=yield wt(this.fetch,`${this.url}/object/upload/sign/${n}`,{},{headers:r}),o=new URL(this.url+i.url),a=o.searchParams.get("token");if(!a)throw new Mr("No token returned by API");return{data:{signedUrl:o.toString(),path:e,token:a},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Oe(n))return{data:null,error:n};throw n}})}update(e,s,n){return G(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,s,n)})}move(e,s,n){return G(this,void 0,void 0,function*(){try{return{data:yield wt(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:s,destinationBucket:n?.destinationBucket},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Oe(r))return{data:null,error:r};throw r}})}copy(e,s,n){return G(this,void 0,void 0,function*(){try{return{data:{path:(yield wt(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:s,destinationBucket:n?.destinationBucket},{headers:this.headers})).Key},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Oe(r))return{data:null,error:r};throw r}})}createSignedUrl(e,s,n){return G(this,void 0,void 0,function*(){try{let r=this._getFinalPath(e),i=yield wt(this.fetch,`${this.url}/object/sign/${r}`,Object.assign({expiresIn:s},n?.transform?{transform:n.transform}:{}),{headers:this.headers});const o=n?.download?`&download=${n.download===!0?"":n.download}`:"";return i={signedUrl:encodeURI(`${this.url}${i.signedURL}${o}`)},{data:i,error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Oe(r))return{data:null,error:r};throw r}})}createSignedUrls(e,s,n){return G(this,void 0,void 0,function*(){try{const r=yield wt(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:s,paths:e},{headers:this.headers}),i=n?.download?`&download=${n.download===!0?"":n.download}`:"";return{data:r.map(o=>Object.assign(Object.assign({},o),{signedUrl:o.signedURL?encodeURI(`${this.url}${o.signedURL}${i}`):null})),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Oe(r))return{data:null,error:r};throw r}})}download(e,s){const r=typeof s?.transform<"u"?"render/image/authenticated":"object",i=this.transformOptsToQueryString(s?.transform||{}),o=i?`?${i}`:"",a=this._getFinalPath(e),l=()=>jn(this.fetch,`${this.url}/${r}/${a}${o}`,{headers:this.headers,noResolveJson:!0});return new Kp(l,this.shouldThrowOnError)}info(e){return G(this,void 0,void 0,function*(){const s=this._getFinalPath(e);try{const n=yield jn(this.fetch,`${this.url}/object/info/${s}`,{headers:this.headers});return{data:Li(n),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Oe(n))return{data:null,error:n};throw n}})}exists(e){return G(this,void 0,void 0,function*(){const s=this._getFinalPath(e);try{return yield Hp(this.fetch,`${this.url}/object/${s}`,{headers:this.headers}),{data:!0,error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Oe(n)&&n instanceof Ni){const r=n.originalError;if([400,404].includes(r?.status))return{data:!1,error:n}}throw n}})}getPublicUrl(e,s){const n=this._getFinalPath(e),r=[],i=s?.download?`download=${s.download===!0?"":s.download}`:"";i!==""&&r.push(i);const a=typeof s?.transform<"u"?"render/image":"object",l=this.transformOptsToQueryString(s?.transform||{});l!==""&&r.push(l);let c=r.join("&");return c!==""&&(c=`?${c}`),{data:{publicUrl:encodeURI(`${this.url}/${a}/public/${n}${c}`)}}}remove(e){return G(this,void 0,void 0,function*(){try{return{data:yield ho(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Oe(s))return{data:null,error:s};throw s}})}list(e,s,n){return G(this,void 0,void 0,function*(){try{const r=Object.assign(Object.assign(Object.assign({},Wp),s),{prefix:e||""});return{data:yield wt(this.fetch,`${this.url}/object/list/${this.bucketId}`,r,{headers:this.headers},n),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Oe(r))return{data:null,error:r};throw r}})}listV2(e,s){return G(this,void 0,void 0,function*(){try{const n=Object.assign({},e);return{data:yield wt(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,n,{headers:this.headers},s),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Oe(n))return{data:null,error:n};throw n}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const s=[];return e.width&&s.push(`width=${e.width}`),e.height&&s.push(`height=${e.height}`),e.resize&&s.push(`resize=${e.resize}`),e.format&&s.push(`format=${e.format}`),e.quality&&s.push(`quality=${e.quality}`),s.join("&")}}const lu="2.86.0",cu={"X-Client-Info":`storage-js/${lu}`};class Gp{constructor(e,s={},n,r){this.shouldThrowOnError=!1;const i=new URL(e);r?.useNewHostname&&/supabase\.(co|in|red)$/.test(i.hostname)&&!i.hostname.includes("storage.supabase.")&&(i.hostname=i.hostname.replace("supabase.","storage.supabase.")),this.url=i.href.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},cu),s),this.fetch=uo(n)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(e){return G(this,void 0,void 0,function*(){try{const s=this.listBucketOptionsToQueryString(e);return{data:yield jn(this.fetch,`${this.url}/bucket${s}`,{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Oe(s))return{data:null,error:s};throw s}})}getBucket(e){return G(this,void 0,void 0,function*(){try{return{data:yield jn(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Oe(s))return{data:null,error:s};throw s}})}createBucket(e){return G(this,arguments,void 0,function*(s,n={public:!1}){try{return{data:yield wt(this.fetch,`${this.url}/bucket`,{id:s,name:s,type:n.type,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Oe(r))return{data:null,error:r};throw r}})}updateBucket(e,s){return G(this,void 0,void 0,function*(){try{return{data:yield Di(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:s.public,file_size_limit:s.fileSizeLimit,allowed_mime_types:s.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Oe(n))return{data:null,error:n};throw n}})}emptyBucket(e){return G(this,void 0,void 0,function*(){try{return{data:yield wt(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Oe(s))return{data:null,error:s};throw s}})}deleteBucket(e){return G(this,void 0,void 0,function*(){try{return{data:yield ho(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Oe(s))return{data:null,error:s};throw s}})}listBucketOptionsToQueryString(e){const s={};return e&&("limit"in e&&(s.limit=String(e.limit)),"offset"in e&&(s.offset=String(e.offset)),e.search&&(s.search=e.search),e.sortColumn&&(s.sortColumn=e.sortColumn),e.sortOrder&&(s.sortOrder=e.sortOrder)),Object.keys(s).length>0?"?"+new URLSearchParams(s).toString():""}}var Nn=class extends Error{constructor(t,e){super(t),this.name="IcebergError",this.status=e.status,this.icebergType=e.icebergType,this.icebergCode=e.icebergCode,this.details=e.details,this.isCommitStateUnknown=e.icebergType==="CommitStateUnknownException"||[500,502,504].includes(e.status)&&e.icebergType?.includes("CommitState")===!0}isNotFound(){return this.status===404}isConflict(){return this.status===409}isAuthenticationTimeout(){return this.status===419}};function Jp(t,e,s){const n=new URL(e,t);if(s)for(const[r,i]of Object.entries(s))i!==void 0&&n.searchParams.set(r,i);return n.toString()}async function Zp(t){return!t||t.type==="none"?{}:t.type==="bearer"?{Authorization:`Bearer ${t.token}`}:t.type==="header"?{[t.name]:t.value}:t.type==="custom"?await t.getHeaders():{}}function Qp(t){const e=t.fetchImpl??globalThis.fetch;return{async request({method:s,path:n,query:r,body:i,headers:o}){const a=Jp(t.baseUrl,n,r),l=await Zp(t.auth),c=await e(a,{method:s,headers:{...i?{"Content-Type":"application/json"}:{},...l,...o},body:i?JSON.stringify(i):void 0}),u=await c.text(),d=(c.headers.get("content-type")||"").includes("application/json"),f=d&&u?JSON.parse(u):u;if(!c.ok){const h=d?f:void 0,v=h?.error;throw new Nn(v?.message??`Request failed with status ${c.status}`,{status:c.status,icebergType:v?.type,icebergCode:v?.code,details:h})}return{status:c.status,headers:c.headers,data:f}}}}function Xn(t){return t.join("")}var Yp=class{constructor(t,e=""){this.client=t,this.prefix=e}async listNamespaces(t){const e=t?{parent:Xn(t.namespace)}:void 0;return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces`,query:e})).data.namespaces.map(n=>({namespace:n}))}async createNamespace(t,e){const s={namespace:t.namespace,properties:e?.properties};return(await this.client.request({method:"POST",path:`${this.prefix}/namespaces`,body:s})).data}async dropNamespace(t){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${Xn(t.namespace)}`})}async loadNamespaceMetadata(t){return{properties:(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Xn(t.namespace)}`})).data.properties}}async namespaceExists(t){try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${Xn(t.namespace)}`}),!0}catch(e){if(e instanceof Nn&&e.status===404)return!1;throw e}}async createNamespaceIfNotExists(t,e){try{return await this.createNamespace(t,e)}catch(s){if(s instanceof Nn&&s.status===409)return;throw s}}};function js(t){return t.join("")}var Xp=class{constructor(t,e="",s){this.client=t,this.prefix=e,this.accessDelegation=s}async listTables(t){return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${js(t.namespace)}/tables`})).data.identifiers}async createTable(t,e){const s={};return this.accessDelegation&&(s["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${js(t.namespace)}/tables`,body:e,headers:s})).data.metadata}async updateTable(t,e){const s=await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${js(t.namespace)}/tables/${t.name}`,body:e});return{"metadata-location":s.data["metadata-location"],metadata:s.data.metadata}}async dropTable(t,e){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${js(t.namespace)}/tables/${t.name}`,query:{purgeRequested:String(e?.purge??!1)}})}async loadTable(t){const e={};return this.accessDelegation&&(e["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${js(t.namespace)}/tables/${t.name}`,headers:e})).data.metadata}async tableExists(t){const e={};this.accessDelegation&&(e["X-Iceberg-Access-Delegation"]=this.accessDelegation);try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${js(t.namespace)}/tables/${t.name}`,headers:e}),!0}catch(s){if(s instanceof Nn&&s.status===404)return!1;throw s}}async createTableIfNotExists(t,e){try{return await this.createTable(t,e)}catch(s){if(s instanceof Nn&&s.status===409)return await this.loadTable({namespace:t.namespace,name:e.name});throw s}}},eg=class{constructor(t){let e="v1";t.catalogName&&(e+=`/${t.catalogName}`);const s=t.baseUrl.endsWith("/")?t.baseUrl:`${t.baseUrl}/`;this.client=Qp({baseUrl:s,auth:t.auth,fetchImpl:t.fetch}),this.accessDelegation=t.accessDelegation?.join(","),this.namespaceOps=new Yp(this.client,e),this.tableOps=new Xp(this.client,e,this.accessDelegation)}async listNamespaces(t){return this.namespaceOps.listNamespaces(t)}async createNamespace(t,e){return this.namespaceOps.createNamespace(t,e)}async dropNamespace(t){await this.namespaceOps.dropNamespace(t)}async loadNamespaceMetadata(t){return this.namespaceOps.loadNamespaceMetadata(t)}async listTables(t){return this.tableOps.listTables(t)}async createTable(t,e){return this.tableOps.createTable(t,e)}async updateTable(t,e){return this.tableOps.updateTable(t,e)}async dropTable(t,e){await this.tableOps.dropTable(t,e)}async loadTable(t){return this.tableOps.loadTable(t)}async namespaceExists(t){return this.namespaceOps.namespaceExists(t)}async tableExists(t){return this.tableOps.tableExists(t)}async createNamespaceIfNotExists(t,e){return this.namespaceOps.createNamespaceIfNotExists(t,e)}async createTableIfNotExists(t,e){return this.tableOps.createTableIfNotExists(t,e)}};class tg{constructor(e,s={},n){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},cu),s),this.fetch=uo(n)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(e){return G(this,void 0,void 0,function*(){try{return{data:yield wt(this.fetch,`${this.url}/bucket`,{name:e},{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Oe(s))return{data:null,error:s};throw s}})}listBuckets(e){return G(this,void 0,void 0,function*(){try{const s=new URLSearchParams;e?.limit!==void 0&&s.set("limit",e.limit.toString()),e?.offset!==void 0&&s.set("offset",e.offset.toString()),e?.sortColumn&&s.set("sortColumn",e.sortColumn),e?.sortOrder&&s.set("sortOrder",e.sortOrder),e?.search&&s.set("search",e.search);const n=s.toString(),r=n?`${this.url}/bucket?${n}`:`${this.url}/bucket`;return{data:yield jn(this.fetch,r,{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Oe(s))return{data:null,error:s};throw s}})}deleteBucket(e){return G(this,void 0,void 0,function*(){try{return{data:yield ho(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Oe(s))return{data:null,error:s};throw s}})}from(e){if(!Mp(e))throw new Mr("Invalid bucket name: File, folder, and bucket names must follow AWS object key naming guidelines and should avoid the use of any other characters.");return new eg({baseUrl:this.url,catalogName:e,auth:{type:"custom",getHeaders:()=>G(this,void 0,void 0,function*(){return this.headers})},fetch:this.fetch})}}const fo={"X-Client-Info":`storage-js/${lu}`,"Content-Type":"application/json"};class uu extends Error{constructor(e){super(e),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}}function ct(t){return typeof t=="object"&&t!==null&&"__isStorageVectorsError"in t}class oi extends uu{constructor(e,s,n){super(e),this.name="StorageVectorsApiError",this.status=s,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class sg extends uu{constructor(e,s){super(e),this.name="StorageVectorsUnknownError",this.originalError=s}}var $a;(function(t){t.InternalError="InternalError",t.S3VectorConflictException="S3VectorConflictException",t.S3VectorNotFoundException="S3VectorNotFoundException",t.S3VectorBucketNotEmpty="S3VectorBucketNotEmpty",t.S3VectorMaxBucketsExceeded="S3VectorMaxBucketsExceeded",t.S3VectorMaxIndexesExceeded="S3VectorMaxIndexesExceeded"})($a||($a={}));const po=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),ng=t=>{if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},Pa=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),rg=(t,e,s)=>G(void 0,void 0,void 0,function*(){if(t&&typeof t=="object"&&"status"in t&&"ok"in t&&typeof t.status=="number"&&!s?.noResolveJson){const r=t.status||500,i=t;if(typeof i.json=="function")i.json().then(o=>{const a=o?.statusCode||o?.code||r+"";e(new oi(Pa(o),r,a))}).catch(()=>{const o=r+"",a=i.statusText||`HTTP ${r} error`;e(new oi(a,r,o))});else{const o=r+"",a=i.statusText||`HTTP ${r} error`;e(new oi(a,r,o))}}else e(new sg(Pa(t),t))}),ig=(t,e,s,n)=>{const r={method:t,headers:e?.headers||{}};return n?(ng(n)?(r.headers=Object.assign({"Content-Type":"application/json"},e?.headers),r.body=JSON.stringify(n)):r.body=n,Object.assign(Object.assign({},r),s)):r};function og(t,e,s,n,r,i){return G(this,void 0,void 0,function*(){return new Promise((o,a)=>{t(s,ig(e,n,r,i)).then(l=>{if(!l.ok)throw l;if(n?.noResolveJson)return l;const c=l.headers.get("content-type");return!c||!c.includes("application/json")?{}:l.json()}).then(l=>o(l)).catch(l=>rg(l,a,n))})})}function ut(t,e,s,n,r){return G(this,void 0,void 0,function*(){return og(t,"POST",e,n,r,s)})}class ag{constructor(e,s={},n){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},fo),s),this.fetch=po(n)}throwOnError(){return this.shouldThrowOnError=!0,this}createIndex(e){return G(this,void 0,void 0,function*(){try{return{data:(yield ut(this.fetch,`${this.url}/CreateIndex`,e,{headers:this.headers}))||{},error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(ct(s))return{data:null,error:s};throw s}})}getIndex(e,s){return G(this,void 0,void 0,function*(){try{return{data:yield ut(this.fetch,`${this.url}/GetIndex`,{vectorBucketName:e,indexName:s},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(ct(n))return{data:null,error:n};throw n}})}listIndexes(e){return G(this,void 0,void 0,function*(){try{return{data:yield ut(this.fetch,`${this.url}/ListIndexes`,e,{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(ct(s))return{data:null,error:s};throw s}})}deleteIndex(e,s){return G(this,void 0,void 0,function*(){try{return{data:(yield ut(this.fetch,`${this.url}/DeleteIndex`,{vectorBucketName:e,indexName:s},{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(ct(n))return{data:null,error:n};throw n}})}}class lg{constructor(e,s={},n){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},fo),s),this.fetch=po(n)}throwOnError(){return this.shouldThrowOnError=!0,this}putVectors(e){return G(this,void 0,void 0,function*(){try{if(e.vectors.length<1||e.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:(yield ut(this.fetch,`${this.url}/PutVectors`,e,{headers:this.headers}))||{},error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(ct(s))return{data:null,error:s};throw s}})}getVectors(e){return G(this,void 0,void 0,function*(){try{return{data:yield ut(this.fetch,`${this.url}/GetVectors`,e,{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(ct(s))return{data:null,error:s};throw s}})}listVectors(e){return G(this,void 0,void 0,function*(){try{if(e.segmentCount!==void 0){if(e.segmentCount<1||e.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(e.segmentIndex!==void 0&&(e.segmentIndex<0||e.segmentIndex>=e.segmentCount))throw new Error(`segmentIndex must be between 0 and ${e.segmentCount-1}`)}return{data:yield ut(this.fetch,`${this.url}/ListVectors`,e,{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(ct(s))return{data:null,error:s};throw s}})}queryVectors(e){return G(this,void 0,void 0,function*(){try{return{data:yield ut(this.fetch,`${this.url}/QueryVectors`,e,{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(ct(s))return{data:null,error:s};throw s}})}deleteVectors(e){return G(this,void 0,void 0,function*(){try{if(e.keys.length<1||e.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:(yield ut(this.fetch,`${this.url}/DeleteVectors`,e,{headers:this.headers}))||{},error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(ct(s))return{data:null,error:s};throw s}})}}class cg{constructor(e,s={},n){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},fo),s),this.fetch=po(n)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(e){return G(this,void 0,void 0,function*(){try{return{data:(yield ut(this.fetch,`${this.url}/CreateVectorBucket`,{vectorBucketName:e},{headers:this.headers}))||{},error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(ct(s))return{data:null,error:s};throw s}})}getBucket(e){return G(this,void 0,void 0,function*(){try{return{data:yield ut(this.fetch,`${this.url}/GetVectorBucket`,{vectorBucketName:e},{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(ct(s))return{data:null,error:s};throw s}})}listBuckets(){return G(this,arguments,void 0,function*(e={}){try{return{data:yield ut(this.fetch,`${this.url}/ListVectorBuckets`,e,{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(ct(s))return{data:null,error:s};throw s}})}deleteBucket(e){return G(this,void 0,void 0,function*(){try{return{data:(yield ut(this.fetch,`${this.url}/DeleteVectorBucket`,{vectorBucketName:e},{headers:this.headers}))||{},error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(ct(s))return{data:null,error:s};throw s}})}}class ug extends cg{constructor(e,s={}){super(e,s.headers||{},s.fetch)}from(e){return new dg(this.url,this.headers,e,this.fetch)}createBucket(e){const s=Object.create(null,{createBucket:{get:()=>super.createBucket}});return G(this,void 0,void 0,function*(){return s.createBucket.call(this,e)})}getBucket(e){const s=Object.create(null,{getBucket:{get:()=>super.getBucket}});return G(this,void 0,void 0,function*(){return s.getBucket.call(this,e)})}listBuckets(){const e=Object.create(null,{listBuckets:{get:()=>super.listBuckets}});return G(this,arguments,void 0,function*(s={}){return e.listBuckets.call(this,s)})}deleteBucket(e){const s=Object.create(null,{deleteBucket:{get:()=>super.deleteBucket}});return G(this,void 0,void 0,function*(){return s.deleteBucket.call(this,e)})}}class dg extends ag{constructor(e,s,n,r){super(e,s,r),this.vectorBucketName=n}createIndex(e){const s=Object.create(null,{createIndex:{get:()=>super.createIndex}});return G(this,void 0,void 0,function*(){return s.createIndex.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName}))})}listIndexes(){const e=Object.create(null,{listIndexes:{get:()=>super.listIndexes}});return G(this,arguments,void 0,function*(s={}){return e.listIndexes.call(this,Object.assign(Object.assign({},s),{vectorBucketName:this.vectorBucketName}))})}getIndex(e){const s=Object.create(null,{getIndex:{get:()=>super.getIndex}});return G(this,void 0,void 0,function*(){return s.getIndex.call(this,this.vectorBucketName,e)})}deleteIndex(e){const s=Object.create(null,{deleteIndex:{get:()=>super.deleteIndex}});return G(this,void 0,void 0,function*(){return s.deleteIndex.call(this,this.vectorBucketName,e)})}index(e){return new hg(this.url,this.headers,this.vectorBucketName,e,this.fetch)}}class hg extends lg{constructor(e,s,n,r,i){super(e,s,i),this.vectorBucketName=n,this.indexName=r}putVectors(e){const s=Object.create(null,{putVectors:{get:()=>super.putVectors}});return G(this,void 0,void 0,function*(){return s.putVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}getVectors(e){const s=Object.create(null,{getVectors:{get:()=>super.getVectors}});return G(this,void 0,void 0,function*(){return s.getVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}listVectors(){const e=Object.create(null,{listVectors:{get:()=>super.listVectors}});return G(this,arguments,void 0,function*(s={}){return e.listVectors.call(this,Object.assign(Object.assign({},s),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}queryVectors(e){const s=Object.create(null,{queryVectors:{get:()=>super.queryVectors}});return G(this,void 0,void 0,function*(){return s.queryVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}deleteVectors(e){const s=Object.create(null,{deleteVectors:{get:()=>super.deleteVectors}});return G(this,void 0,void 0,function*(){return s.deleteVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}}class fg extends Gp{constructor(e,s={},n,r){super(e,s,n,r)}from(e){return new zp(this.url,this.headers,e,this.fetch)}get vectors(){return new ug(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new tg(this.url+"/iceberg",this.headers,this.fetch)}}const pg="2.86.0";let gn="";typeof Deno<"u"?gn="deno":typeof document<"u"?gn="web":typeof navigator<"u"&&navigator.product==="ReactNative"?gn="react-native":gn="node";const gg={"X-Client-Info":`supabase-js-${gn}/${pg}`},vg={headers:gg},mg={schema:"public"},_g={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},yg={},bg=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),wg=()=>Headers,kg=(t,e,s)=>{const n=bg(s),r=wg();return async(i,o)=>{var a;const l=(a=await e())!==null&&a!==void 0?a:t;let c=new r(o?.headers);return c.has("apikey")||c.set("apikey",t),c.has("Authorization")||c.set("Authorization",`Bearer ${l}`),n(i,Object.assign(Object.assign({},o),{headers:c}))}};function Sg(t){return t.endsWith("/")?t:t+"/"}function Eg(t,e){var s,n;const{db:r,auth:i,realtime:o,global:a}=t,{db:l,auth:c,realtime:u,global:d}=e,f={db:Object.assign(Object.assign({},l),r),auth:Object.assign(Object.assign({},c),i),realtime:Object.assign(Object.assign({},u),o),storage:{},global:Object.assign(Object.assign(Object.assign({},d),a),{headers:Object.assign(Object.assign({},(s=d?.headers)!==null&&s!==void 0?s:{}),(n=a?.headers)!==null&&n!==void 0?n:{})}),accessToken:async()=>""};return t.accessToken?f.accessToken=t.accessToken:delete f.accessToken,f}function Ig(t){const e=t?.trim();if(!e)throw new Error("supabaseUrl is required.");if(!e.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(Sg(e))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}const du="2.86.0",qs=30*1e3,Ui=3,ai=Ui*qs,Tg="http://localhost:9999",xg="supabase.auth.token",Ag={"X-Client-Info":`gotrue-js/${du}`},Bi="X-Supabase-Api-Version",hu={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},Og=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,Cg=600*1e3;class Ln extends Error{constructor(e,s,n){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=s,this.code=n}}function Q(t){return typeof t=="object"&&t!==null&&"__isAuthError"in t}class Rg extends Ln{constructor(e,s,n){super(e,s,n),this.name="AuthApiError",this.status=s,this.code=n}}function $g(t){return Q(t)&&t.name==="AuthApiError"}class Es extends Ln{constructor(e,s){super(e),this.name="AuthUnknownError",this.originalError=s}}class us extends Ln{constructor(e,s,n,r){super(e,n,r),this.name=s,this.status=n}}class ot extends us{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function Pg(t){return Q(t)&&t.name==="AuthSessionMissingError"}class Ns extends us{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class er extends us{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class tr extends us{constructor(e,s=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=s}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function jg(t){return Q(t)&&t.name==="AuthImplicitGrantRedirectError"}class ja extends us{constructor(e,s=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=s}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Mi extends us{constructor(e,s){super(e,"AuthRetryableFetchError",s,void 0)}}function li(t){return Q(t)&&t.name==="AuthRetryableFetchError"}class Na extends us{constructor(e,s,n){super(e,"AuthWeakPasswordError",s,"weak_password"),this.reasons=n}}class Fi extends us{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const Sr="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),La=` 	
\r=`.split(""),Ng=(()=>{const t=new Array(128);for(let e=0;e<t.length;e+=1)t[e]=-1;for(let e=0;e<La.length;e+=1)t[La[e].charCodeAt(0)]=-2;for(let e=0;e<Sr.length;e+=1)t[Sr[e].charCodeAt(0)]=e;return t})();function Da(t,e,s){if(t!==null)for(e.queue=e.queue<<8|t,e.queuedBits+=8;e.queuedBits>=6;){const n=e.queue>>e.queuedBits-6&63;s(Sr[n]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const n=e.queue>>e.queuedBits-6&63;s(Sr[n]),e.queuedBits-=6}}function fu(t,e,s){const n=Ng[t];if(n>-1)for(e.queue=e.queue<<6|n,e.queuedBits+=6;e.queuedBits>=8;)s(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(n===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(t)}"`)}}function Ua(t){const e=[],s=o=>{e.push(String.fromCodePoint(o))},n={utf8seq:0,codepoint:0},r={queue:0,queuedBits:0},i=o=>{Ug(o,n,s)};for(let o=0;o<t.length;o+=1)fu(t.charCodeAt(o),r,i);return e.join("")}function Lg(t,e){if(t<=127){e(t);return}else if(t<=2047){e(192|t>>6),e(128|t&63);return}else if(t<=65535){e(224|t>>12),e(128|t>>6&63),e(128|t&63);return}else if(t<=1114111){e(240|t>>18),e(128|t>>12&63),e(128|t>>6&63),e(128|t&63);return}throw new Error(`Unrecognized Unicode codepoint: ${t.toString(16)}`)}function Dg(t,e){for(let s=0;s<t.length;s+=1){let n=t.charCodeAt(s);if(n>55295&&n<=56319){const r=(n-55296)*1024&65535;n=(t.charCodeAt(s+1)-56320&65535|r)+65536,s+=1}Lg(n,e)}}function Ug(t,e,s){if(e.utf8seq===0){if(t<=127){s(t);return}for(let n=1;n<6;n+=1)if((t>>7-n&1)===0){e.utf8seq=n;break}if(e.utf8seq===2)e.codepoint=t&31;else if(e.utf8seq===3)e.codepoint=t&15;else if(e.utf8seq===4)e.codepoint=t&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(t<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|t&63,e.utf8seq-=1,e.utf8seq===0&&s(e.codepoint)}}function Zs(t){const e=[],s={queue:0,queuedBits:0},n=r=>{e.push(r)};for(let r=0;r<t.length;r+=1)fu(t.charCodeAt(r),s,n);return new Uint8Array(e)}function Bg(t){const e=[];return Dg(t,s=>e.push(s)),new Uint8Array(e)}function Ts(t){const e=[],s={queue:0,queuedBits:0},n=r=>{e.push(r)};return t.forEach(r=>Da(r,s,n)),Da(null,s,n),e.join("")}function Mg(t){return Math.round(Date.now()/1e3)+t}function Fg(){return Symbol("auth-callback")}const qe=()=>typeof window<"u"&&typeof document<"u",vs={tested:!1,writable:!1},pu=()=>{if(!qe())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(vs.tested)return vs.writable;const t=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(t,t),globalThis.localStorage.removeItem(t),vs.tested=!0,vs.writable=!0}catch{vs.tested=!0,vs.writable=!1}return vs.writable};function qg(t){const e={},s=new URL(t);if(s.hash&&s.hash[0]==="#")try{new URLSearchParams(s.hash.substring(1)).forEach((r,i)=>{e[i]=r})}catch{}return s.searchParams.forEach((n,r)=>{e[r]=n}),e}const gu=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),Hg=t=>typeof t=="object"&&t!==null&&"status"in t&&"ok"in t&&"json"in t&&typeof t.json=="function",Hs=async(t,e,s)=>{await t.setItem(e,JSON.stringify(s))},ms=async(t,e)=>{const s=await t.getItem(e);if(!s)return null;try{return JSON.parse(s)}catch{return s}},ts=async(t,e)=>{await t.removeItem(e)};class Fr{constructor(){this.promise=new Fr.promiseConstructor((e,s)=>{this.resolve=e,this.reject=s})}}Fr.promiseConstructor=Promise;function ci(t){const e=t.split(".");if(e.length!==3)throw new Fi("Invalid JWT structure");for(let n=0;n<e.length;n++)if(!Og.test(e[n]))throw new Fi("JWT not in base64url format");return{header:JSON.parse(Ua(e[0])),payload:JSON.parse(Ua(e[1])),signature:Zs(e[2]),raw:{header:e[0],payload:e[1]}}}async function Vg(t){return await new Promise(e=>{setTimeout(()=>e(null),t)})}function Kg(t,e){return new Promise((n,r)=>{(async()=>{for(let i=0;i<1/0;i++)try{const o=await t(i);if(!e(i,null,o)){n(o);return}}catch(o){if(!e(i,o)){r(o);return}}})()})}function Wg(t){return("0"+t.toString(16)).substr(-2)}function zg(){const e=new Uint32Array(56);if(typeof crypto>"u"){const s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",n=s.length;let r="";for(let i=0;i<56;i++)r+=s.charAt(Math.floor(Math.random()*n));return r}return crypto.getRandomValues(e),Array.from(e,Wg).join("")}async function Gg(t){const s=new TextEncoder().encode(t),n=await crypto.subtle.digest("SHA-256",s),r=new Uint8Array(n);return Array.from(r).map(i=>String.fromCharCode(i)).join("")}async function Jg(t){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),t;const s=await Gg(t);return btoa(s).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Ls(t,e,s=!1){const n=zg();let r=n;s&&(r+="/PASSWORD_RECOVERY"),await Hs(t,`${e}-code-verifier`,r);const i=await Jg(n);return[i,n===i?"plain":"s256"]}const Zg=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function Qg(t){const e=t.headers.get(Bi);if(!e||!e.match(Zg))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function Yg(t){if(!t)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(t<=e)throw new Error("JWT has expired")}function Xg(t){switch(t){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const ev=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Ds(t){if(!ev.test(t))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function ui(){const t={};return new Proxy(t,{get:(e,s)=>{if(s==="__isUserNotAvailableProxy")return!0;if(typeof s=="symbol"){const n=s.toString();if(n==="Symbol(Symbol.toPrimitive)"||n==="Symbol(Symbol.toStringTag)"||n==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${s}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,s)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${s}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,s)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${s}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function tv(t,e){return new Proxy(t,{get:(s,n,r)=>{if(n==="__isInsecureUserWarningProxy")return!0;if(typeof n=="symbol"){const i=n.toString();if(i==="Symbol(Symbol.toPrimitive)"||i==="Symbol(Symbol.toStringTag)"||i==="Symbol(util.inspect.custom)"||i==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(s,n,r)}return!e.value&&typeof n=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),e.value=!0),Reflect.get(s,n,r)}})}function Ba(t){return JSON.parse(JSON.stringify(t))}const ys=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),sv=[502,503,504];async function Ma(t){var e;if(!Hg(t))throw new Mi(ys(t),0);if(sv.includes(t.status))throw new Mi(ys(t),t.status);let s;try{s=await t.json()}catch(i){throw new Es(ys(i),i)}let n;const r=Qg(t);if(r&&r.getTime()>=hu["2024-01-01"].timestamp&&typeof s=="object"&&s&&typeof s.code=="string"?n=s.code:typeof s=="object"&&s&&typeof s.error_code=="string"&&(n=s.error_code),n){if(n==="weak_password")throw new Na(ys(s),t.status,((e=s.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(n==="session_not_found")throw new ot}else if(typeof s=="object"&&s&&typeof s.weak_password=="object"&&s.weak_password&&Array.isArray(s.weak_password.reasons)&&s.weak_password.reasons.length&&s.weak_password.reasons.reduce((i,o)=>i&&typeof o=="string",!0))throw new Na(ys(s),t.status,s.weak_password.reasons);throw new Rg(ys(s),t.status||500,n)}const nv=(t,e,s,n)=>{const r={method:t,headers:e?.headers||{}};return t==="GET"?r:(r.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e?.headers),r.body=JSON.stringify(n),Object.assign(Object.assign({},r),s))};async function re(t,e,s,n){var r;const i=Object.assign({},n?.headers);i[Bi]||(i[Bi]=hu["2024-01-01"].name),n?.jwt&&(i.Authorization=`Bearer ${n.jwt}`);const o=(r=n?.query)!==null&&r!==void 0?r:{};n?.redirectTo&&(o.redirect_to=n.redirectTo);const a=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",l=await rv(t,e,s+a,{headers:i,noResolveJson:n?.noResolveJson},{},n?.body);return n?.xform?n?.xform(l):{data:Object.assign({},l),error:null}}async function rv(t,e,s,n,r,i){const o=nv(e,n,r,i);let a;try{a=await t(s,Object.assign({},o))}catch(l){throw console.error(l),new Mi(ys(l),0)}if(a.ok||await Ma(a),n?.noResolveJson)return a;try{return await a.json()}catch(l){await Ma(l)}}function bt(t){var e;let s=null;av(t)&&(s=Object.assign({},t),t.expires_at||(s.expires_at=Mg(t.expires_in)));const n=(e=t.user)!==null&&e!==void 0?e:t;return{data:{session:s,user:n},error:null}}function Fa(t){const e=bt(t);return!e.error&&t.weak_password&&typeof t.weak_password=="object"&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.message&&typeof t.weak_password.message=="string"&&t.weak_password.reasons.reduce((s,n)=>s&&typeof n=="string",!0)&&(e.data.weak_password=t.weak_password),e}function as(t){var e;return{data:{user:(e=t.user)!==null&&e!==void 0?e:t},error:null}}function iv(t){return{data:t,error:null}}function ov(t){const{action_link:e,email_otp:s,hashed_token:n,redirect_to:r,verification_type:i}=t,o=nn(t,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),a={action_link:e,email_otp:s,hashed_token:n,redirect_to:r,verification_type:i},l=Object.assign({},o);return{data:{properties:a,user:l},error:null}}function qa(t){return t}function av(t){return t.access_token&&t.refresh_token&&t.expires_in}const di=["global","local","others"];class lv{constructor({url:e="",headers:s={},fetch:n}){this.url=e,this.headers=s,this.fetch=gu(n),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(e,s=di[0]){if(di.indexOf(s)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${di.join(", ")}`);try{return await re(this.fetch,"POST",`${this.url}/logout?scope=${s}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(n){if(Q(n))return{data:null,error:n};throw n}}async inviteUserByEmail(e,s={}){try{return await re(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:s.data},headers:this.headers,redirectTo:s.redirectTo,xform:as})}catch(n){if(Q(n))return{data:{user:null},error:n};throw n}}async generateLink(e){try{const{options:s}=e,n=nn(e,["options"]),r=Object.assign(Object.assign({},n),s);return"newEmail"in n&&(r.new_email=n?.newEmail,delete r.newEmail),await re(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:r,headers:this.headers,xform:ov,redirectTo:s?.redirectTo})}catch(s){if(Q(s))return{data:{properties:null,user:null},error:s};throw s}}async createUser(e){try{return await re(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:as})}catch(s){if(Q(s))return{data:{user:null},error:s};throw s}}async listUsers(e){var s,n,r,i,o,a,l;try{const c={nextPage:null,lastPage:0,total:0},u=await re(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(s=e?.page)===null||s===void 0?void 0:s.toString())!==null&&n!==void 0?n:"",per_page:(i=(r=e?.perPage)===null||r===void 0?void 0:r.toString())!==null&&i!==void 0?i:""},xform:qa});if(u.error)throw u.error;const d=await u.json(),f=(o=u.headers.get("x-total-count"))!==null&&o!==void 0?o:0,h=(l=(a=u.headers.get("link"))===null||a===void 0?void 0:a.split(","))!==null&&l!==void 0?l:[];return h.length>0&&(h.forEach(v=>{const y=parseInt(v.split(";")[0].split("=")[1].substring(0,1)),E=JSON.parse(v.split(";")[1].split("=")[1]);c[`${E}Page`]=y}),c.total=parseInt(f)),{data:Object.assign(Object.assign({},d),c),error:null}}catch(c){if(Q(c))return{data:{users:[]},error:c};throw c}}async getUserById(e){Ds(e);try{return await re(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:as})}catch(s){if(Q(s))return{data:{user:null},error:s};throw s}}async updateUserById(e,s){Ds(e);try{return await re(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:s,headers:this.headers,xform:as})}catch(n){if(Q(n))return{data:{user:null},error:n};throw n}}async deleteUser(e,s=!1){Ds(e);try{return await re(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:s},xform:as})}catch(n){if(Q(n))return{data:{user:null},error:n};throw n}}async _listFactors(e){Ds(e.userId);try{const{data:s,error:n}=await re(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:r=>({data:{factors:r},error:null})});return{data:s,error:n}}catch(s){if(Q(s))return{data:null,error:s};throw s}}async _deleteFactor(e){Ds(e.userId),Ds(e.id);try{return{data:await re(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(s){if(Q(s))return{data:null,error:s};throw s}}async _listOAuthClients(e){var s,n,r,i,o,a,l;try{const c={nextPage:null,lastPage:0,total:0},u=await re(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(s=e?.page)===null||s===void 0?void 0:s.toString())!==null&&n!==void 0?n:"",per_page:(i=(r=e?.perPage)===null||r===void 0?void 0:r.toString())!==null&&i!==void 0?i:""},xform:qa});if(u.error)throw u.error;const d=await u.json(),f=(o=u.headers.get("x-total-count"))!==null&&o!==void 0?o:0,h=(l=(a=u.headers.get("link"))===null||a===void 0?void 0:a.split(","))!==null&&l!==void 0?l:[];return h.length>0&&(h.forEach(v=>{const y=parseInt(v.split(";")[0].split("=")[1].substring(0,1)),E=JSON.parse(v.split(";")[1].split("=")[1]);c[`${E}Page`]=y}),c.total=parseInt(f)),{data:Object.assign(Object.assign({},d),c),error:null}}catch(c){if(Q(c))return{data:{clients:[]},error:c};throw c}}async _createOAuthClient(e){try{return await re(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:e,headers:this.headers,xform:s=>({data:s,error:null})})}catch(s){if(Q(s))return{data:null,error:s};throw s}}async _getOAuthClient(e){try{return await re(this.fetch,"GET",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,xform:s=>({data:s,error:null})})}catch(s){if(Q(s))return{data:null,error:s};throw s}}async _updateOAuthClient(e,s){try{return await re(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${e}`,{body:s,headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(Q(n))return{data:null,error:n};throw n}}async _deleteOAuthClient(e){try{return await re(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(s){if(Q(s))return{data:null,error:s};throw s}}async _regenerateOAuthClientSecret(e){try{return await re(this.fetch,"POST",`${this.url}/admin/oauth/clients/${e}/regenerate_secret`,{headers:this.headers,xform:s=>({data:s,error:null})})}catch(s){if(Q(s))return{data:null,error:s};throw s}}}function Ha(t={}){return{getItem:e=>t[e]||null,setItem:(e,s)=>{t[e]=s},removeItem:e=>{delete t[e]}}}const Us={debug:!!(globalThis&&pu()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class vu extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class cv extends vu{}async function uv(t,e,s){Us.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",t,e);const n=new globalThis.AbortController;return e>0&&setTimeout(()=>{n.abort(),Us.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",t)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(t,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:n.signal},async r=>{if(r){Us.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",t,r.name);try{return await s()}finally{Us.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",t,r.name)}}else{if(e===0)throw Us.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",t),new cv(`Acquiring an exclusive Navigator LockManager lock "${t}" immediately failed`);if(Us.debug)try{const i=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(i,null,"  "))}catch(i){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",i)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await s()}}))}function dv(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function mu(t){if(!/^0x[a-fA-F0-9]{40}$/.test(t))throw new Error(`@supabase/auth-js: Address "${t}" is invalid.`);return t.toLowerCase()}function hv(t){return parseInt(t,16)}function fv(t){const e=new TextEncoder().encode(t);return"0x"+Array.from(e,n=>n.toString(16).padStart(2,"0")).join("")}function pv(t){var e;const{chainId:s,domain:n,expirationTime:r,issuedAt:i=new Date,nonce:o,notBefore:a,requestId:l,resources:c,scheme:u,uri:d,version:f}=t;{if(!Number.isInteger(s))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${s}`);if(!n)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(o&&o.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${o}`);if(!d)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(f!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${f}`);if(!((e=t.statement)===null||e===void 0)&&e.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${t.statement}`)}const h=mu(t.address),v=u?`${u}://${n}`:n,y=t.statement?`${t.statement}
`:"",E=`${v} wants you to sign in with your Ethereum account:
${h}

${y}`;let S=`URI: ${d}
Version: ${f}
Chain ID: ${s}${o?`
Nonce: ${o}`:""}
Issued At: ${i.toISOString()}`;if(r&&(S+=`
Expiration Time: ${r.toISOString()}`),a&&(S+=`
Not Before: ${a.toISOString()}`),l&&(S+=`
Request ID: ${l}`),c){let m=`
Resources:`;for(const g of c){if(!g||typeof g!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${g}`);m+=`
- ${g}`}S+=m}return`${E}
${S}`}class je extends Error{constructor({message:e,code:s,cause:n,name:r}){var i;super(e,{cause:n}),this.__isWebAuthnError=!0,this.name=(i=r??(n instanceof Error?n.name:void 0))!==null&&i!==void 0?i:"Unknown Error",this.code=s}}class Er extends je{constructor(e,s){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:s,message:e}),this.name="WebAuthnUnknownError",this.originalError=s}}function gv({error:t,options:e}){var s,n,r;const{publicKey:i}=e;if(!i)throw Error("options was missing required publicKey property");if(t.name==="AbortError"){if(e.signal instanceof AbortSignal)return new je({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:t})}else if(t.name==="ConstraintError"){if(((s=i.authenticatorSelection)===null||s===void 0?void 0:s.requireResidentKey)===!0)return new je({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:t});if(e.mediation==="conditional"&&((n=i.authenticatorSelection)===null||n===void 0?void 0:n.userVerification)==="required")return new je({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:t});if(((r=i.authenticatorSelection)===null||r===void 0?void 0:r.userVerification)==="required")return new je({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:t})}else{if(t.name==="InvalidStateError")return new je({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:t});if(t.name==="NotAllowedError")return new je({message:t.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t});if(t.name==="NotSupportedError")return i.pubKeyCredParams.filter(a=>a.type==="public-key").length===0?new je({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:t}):new je({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:t});if(t.name==="SecurityError"){const o=window.location.hostname;if(_u(o)){if(i.rp.id!==o)return new je({message:`The RP ID "${i.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:t})}else return new je({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:t})}else if(t.name==="TypeError"){if(i.user.id.byteLength<1||i.user.id.byteLength>64)return new je({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:t})}else if(t.name==="UnknownError")return new je({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:t})}return new je({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t})}function vv({error:t,options:e}){const{publicKey:s}=e;if(!s)throw Error("options was missing required publicKey property");if(t.name==="AbortError"){if(e.signal instanceof AbortSignal)return new je({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:t})}else{if(t.name==="NotAllowedError")return new je({message:t.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t});if(t.name==="SecurityError"){const n=window.location.hostname;if(_u(n)){if(s.rpId!==n)return new je({message:`The RP ID "${s.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:t})}else return new je({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:t})}else if(t.name==="UnknownError")return new je({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:t})}return new je({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t})}class mv{createNewAbortSignal(){if(this.controller){const s=new Error("Cancelling existing WebAuthn API call for new one");s.name="AbortError",this.controller.abort(s)}const e=new AbortController;return this.controller=e,e.signal}cancelCeremony(){if(this.controller){const e=new Error("Manually cancelling existing WebAuthn API call");e.name="AbortError",this.controller.abort(e),this.controller=void 0}}}const _v=new mv;function yv(t){if(!t)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(t);const{challenge:e,user:s,excludeCredentials:n}=t,r=nn(t,["challenge","user","excludeCredentials"]),i=Zs(e).buffer,o=Object.assign(Object.assign({},s),{id:Zs(s.id).buffer}),a=Object.assign(Object.assign({},r),{challenge:i,user:o});if(n&&n.length>0){a.excludeCredentials=new Array(n.length);for(let l=0;l<n.length;l++){const c=n[l];a.excludeCredentials[l]=Object.assign(Object.assign({},c),{id:Zs(c.id).buffer,type:c.type||"public-key",transports:c.transports})}}return a}function bv(t){if(!t)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(t);const{challenge:e,allowCredentials:s}=t,n=nn(t,["challenge","allowCredentials"]),r=Zs(e).buffer,i=Object.assign(Object.assign({},n),{challenge:r});if(s&&s.length>0){i.allowCredentials=new Array(s.length);for(let o=0;o<s.length;o++){const a=s[o];i.allowCredentials[o]=Object.assign(Object.assign({},a),{id:Zs(a.id).buffer,type:a.type||"public-key",transports:a.transports})}}return i}function wv(t){var e;if("toJSON"in t&&typeof t.toJSON=="function")return t.toJSON();const s=t;return{id:t.id,rawId:t.id,response:{attestationObject:Ts(new Uint8Array(t.response.attestationObject)),clientDataJSON:Ts(new Uint8Array(t.response.clientDataJSON))},type:"public-key",clientExtensionResults:t.getClientExtensionResults(),authenticatorAttachment:(e=s.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function kv(t){var e;if("toJSON"in t&&typeof t.toJSON=="function")return t.toJSON();const s=t,n=t.getClientExtensionResults(),r=t.response;return{id:t.id,rawId:t.id,response:{authenticatorData:Ts(new Uint8Array(r.authenticatorData)),clientDataJSON:Ts(new Uint8Array(r.clientDataJSON)),signature:Ts(new Uint8Array(r.signature)),userHandle:r.userHandle?Ts(new Uint8Array(r.userHandle)):void 0},type:"public-key",clientExtensionResults:n,authenticatorAttachment:(e=s.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function _u(t){return t==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(t)}function Va(){var t,e;return!!(qe()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((t=navigator?.credentials)===null||t===void 0?void 0:t.create)=="function"&&typeof((e=navigator?.credentials)===null||e===void 0?void 0:e.get)=="function")}async function Sv(t){try{const e=await navigator.credentials.create(t);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new Er("Browser returned unexpected credential type",e)}:{data:null,error:new Er("Empty credential response",e)}}catch(e){return{data:null,error:gv({error:e,options:t})}}}async function Ev(t){try{const e=await navigator.credentials.get(t);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new Er("Browser returned unexpected credential type",e)}:{data:null,error:new Er("Empty credential response",e)}}catch(e){return{data:null,error:vv({error:e,options:t})}}}const Iv={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},Tv={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function Ir(...t){const e=r=>r!==null&&typeof r=="object"&&!Array.isArray(r),s=r=>r instanceof ArrayBuffer||ArrayBuffer.isView(r),n={};for(const r of t)if(r)for(const i in r){const o=r[i];if(o!==void 0)if(Array.isArray(o))n[i]=o;else if(s(o))n[i]=o;else if(e(o)){const a=n[i];e(a)?n[i]=Ir(a,o):n[i]=Ir(o)}else n[i]=o}return n}function xv(t,e){return Ir(Iv,t,e||{})}function Av(t,e){return Ir(Tv,t,e||{})}class Ov{constructor(e){this.client=e,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(e){return this.client.mfa.enroll(Object.assign(Object.assign({},e),{factorType:"webauthn"}))}async _challenge({factorId:e,webauthn:s,friendlyName:n,signal:r},i){try{const{data:o,error:a}=await this.client.mfa.challenge({factorId:e,webauthn:s});if(!o)return{data:null,error:a};const l=r??_v.createNewAbortSignal();if(o.webauthn.type==="create"){const{user:c}=o.webauthn.credential_options.publicKey;c.name||(c.name=`${c.id}:${n}`),c.displayName||(c.displayName=c.name)}switch(o.webauthn.type){case"create":{const c=xv(o.webauthn.credential_options.publicKey,i?.create),{data:u,error:d}=await Sv({publicKey:c,signal:l});return u?{data:{factorId:e,challengeId:o.id,webauthn:{type:o.webauthn.type,credential_response:u}},error:null}:{data:null,error:d}}case"request":{const c=Av(o.webauthn.credential_options.publicKey,i?.request),{data:u,error:d}=await Ev(Object.assign(Object.assign({},o.webauthn.credential_options),{publicKey:c,signal:l}));return u?{data:{factorId:e,challengeId:o.id,webauthn:{type:o.webauthn.type,credential_response:u}},error:null}:{data:null,error:d}}}}catch(o){return Q(o)?{data:null,error:o}:{data:null,error:new Es("Unexpected error in challenge",o)}}}async _verify({challengeId:e,factorId:s,webauthn:n}){return this.client.mfa.verify({factorId:s,challengeId:e,webauthn:n})}async _authenticate({factorId:e,webauthn:{rpId:s=typeof window<"u"?window.location.hostname:void 0,rpOrigins:n=typeof window<"u"?[window.location.origin]:void 0,signal:r}={}},i){if(!s)return{data:null,error:new Ln("rpId is required for WebAuthn authentication")};try{if(!Va())return{data:null,error:new Es("Browser does not support WebAuthn",null)};const{data:o,error:a}=await this.challenge({factorId:e,webauthn:{rpId:s,rpOrigins:n},signal:r},{request:i});if(!o)return{data:null,error:a};const{webauthn:l}=o;return this._verify({factorId:e,challengeId:o.challengeId,webauthn:{type:l.type,rpId:s,rpOrigins:n,credential_response:l.credential_response}})}catch(o){return Q(o)?{data:null,error:o}:{data:null,error:new Es("Unexpected error in authenticate",o)}}}async _register({friendlyName:e,webauthn:{rpId:s=typeof window<"u"?window.location.hostname:void 0,rpOrigins:n=typeof window<"u"?[window.location.origin]:void 0,signal:r}={}},i){if(!s)return{data:null,error:new Ln("rpId is required for WebAuthn registration")};try{if(!Va())return{data:null,error:new Es("Browser does not support WebAuthn",null)};const{data:o,error:a}=await this._enroll({friendlyName:e});if(!o)return await this.client.mfa.listFactors().then(u=>{var d;return(d=u.data)===null||d===void 0?void 0:d.all.find(f=>f.factor_type==="webauthn"&&f.friendly_name===e&&f.status!=="unverified")}).then(u=>u?this.client.mfa.unenroll({factorId:u?.id}):void 0),{data:null,error:a};const{data:l,error:c}=await this._challenge({factorId:o.id,friendlyName:o.friendly_name,webauthn:{rpId:s,rpOrigins:n},signal:r},{create:i});return l?this._verify({factorId:o.id,challengeId:l.challengeId,webauthn:{rpId:s,rpOrigins:n,type:l.webauthn.type,credential_response:l.webauthn.credential_response}}):{data:null,error:c}}catch(o){return Q(o)?{data:null,error:o}:{data:null,error:new Es("Unexpected error in register",o)}}}}dv();const Cv={url:Tg,storageKey:xg,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:Ag,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1};async function Ka(t,e,s){return await s()}const Bs={};class Dn{get jwks(){var e,s;return(s=(e=Bs[this.storageKey])===null||e===void 0?void 0:e.jwks)!==null&&s!==void 0?s:{keys:[]}}set jwks(e){Bs[this.storageKey]=Object.assign(Object.assign({},Bs[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,s;return(s=(e=Bs[this.storageKey])===null||e===void 0?void 0:e.cachedAt)!==null&&s!==void 0?s:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){Bs[this.storageKey]=Object.assign(Object.assign({},Bs[this.storageKey]),{cachedAt:e})}constructor(e){var s,n,r;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const i=Object.assign(Object.assign({},Cv),e);if(this.storageKey=i.storageKey,this.instanceID=(s=Dn.nextInstanceID[this.storageKey])!==null&&s!==void 0?s:0,Dn.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!i.debug,typeof i.debug=="function"&&(this.logger=i.debug),this.instanceID>0&&qe()){const o=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(o),this.logDebugMessages&&console.trace(o)}if(this.persistSession=i.persistSession,this.autoRefreshToken=i.autoRefreshToken,this.admin=new lv({url:i.url,headers:i.headers,fetch:i.fetch}),this.url=i.url,this.headers=i.headers,this.fetch=gu(i.fetch),this.lock=i.lock||Ka,this.detectSessionInUrl=i.detectSessionInUrl,this.flowType=i.flowType,this.hasCustomAuthorizationHeader=i.hasCustomAuthorizationHeader,this.throwOnError=i.throwOnError,i.lock?this.lock=i.lock:qe()&&(!((n=globalThis?.navigator)===null||n===void 0)&&n.locks)?this.lock=uv:this.lock=Ka,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new Ov(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(i.storage?this.storage=i.storage:pu()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=Ha(this.memoryStorage)),i.userStorage&&(this.userStorage=i.userStorage)):(this.memoryStorage={},this.storage=Ha(this.memoryStorage)),qe()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(o){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",o)}(r=this.broadcastChannel)===null||r===void 0||r.addEventListener("message",async o=>{this._debug("received broadcast notification from other tab or client",o),await this._notifyAllSubscribers(o.data.event,o.data.session,!1)})}this.initialize()}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(e){if(this.throwOnError&&e&&e.error)throw e.error;return e}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${du}) ${new Date().toISOString()}`}_debug(...e){return this.logDebugMessages&&this.logger(this._logPrefix(),...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{let s={},n="none";if(qe()&&(s=qg(window.location.href),this._isImplicitGrantCallback(s)?n="implicit":await this._isPKCECallback(s)&&(n="pkce")),qe()&&this.detectSessionInUrl&&n!=="none"){const{data:r,error:i}=await this._getSessionFromURL(s,n);if(i){if(this._debug("#_initialize()","error detecting session from URL",i),jg(i)){const l=(e=i.details)===null||e===void 0?void 0:e.code;if(l==="identity_already_exists"||l==="identity_not_found"||l==="single_identity_not_deletable")return{error:i}}return await this._removeSession(),{error:i}}const{session:o,redirectType:a}=r;return this._debug("#_initialize()","detected session in URL",o,"redirect type",a),await this._saveSession(o),setTimeout(async()=>{a==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",o):await this._notifyAllSubscribers("SIGNED_IN",o)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(s){return Q(s)?this._returnResult({error:s}):this._returnResult({error:new Es("Unexpected error during initialization",s)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var s,n,r;try{const i=await re(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(n=(s=e?.options)===null||s===void 0?void 0:s.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:(r=e?.options)===null||r===void 0?void 0:r.captchaToken}},xform:bt}),{data:o,error:a}=i;if(a||!o)return this._returnResult({data:{user:null,session:null},error:a});const l=o.session,c=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",l)),this._returnResult({data:{user:c,session:l},error:null})}catch(i){if(Q(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async signUp(e){var s,n,r;try{let i;if("email"in e){const{email:u,password:d,options:f}=e;let h=null,v=null;this.flowType==="pkce"&&([h,v]=await Ls(this.storage,this.storageKey)),i=await re(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:f?.emailRedirectTo,body:{email:u,password:d,data:(s=f?.data)!==null&&s!==void 0?s:{},gotrue_meta_security:{captcha_token:f?.captchaToken},code_challenge:h,code_challenge_method:v},xform:bt})}else if("phone"in e){const{phone:u,password:d,options:f}=e;i=await re(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:u,password:d,data:(n=f?.data)!==null&&n!==void 0?n:{},channel:(r=f?.channel)!==null&&r!==void 0?r:"sms",gotrue_meta_security:{captcha_token:f?.captchaToken}},xform:bt})}else throw new er("You must provide either an email or phone number and a password");const{data:o,error:a}=i;if(a||!o)return this._returnResult({data:{user:null,session:null},error:a});const l=o.session,c=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",l)),this._returnResult({data:{user:c,session:l},error:null})}catch(i){if(Q(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async signInWithPassword(e){try{let s;if("email"in e){const{email:i,password:o,options:a}=e;s=await re(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:i,password:o,gotrue_meta_security:{captcha_token:a?.captchaToken}},xform:Fa})}else if("phone"in e){const{phone:i,password:o,options:a}=e;s=await re(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:i,password:o,gotrue_meta_security:{captcha_token:a?.captchaToken}},xform:Fa})}else throw new er("You must provide either an email or phone number and a password");const{data:n,error:r}=s;if(r)return this._returnResult({data:{user:null,session:null},error:r});if(!n||!n.session||!n.user){const i=new Ns;return this._returnResult({data:{user:null,session:null},error:i})}return n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",n.session)),this._returnResult({data:Object.assign({user:n.user,session:n.session},n.weak_password?{weakPassword:n.weak_password}:null),error:r})}catch(s){if(Q(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}}async signInWithOAuth(e){var s,n,r,i;return await this._handleProviderSignIn(e.provider,{redirectTo:(s=e.options)===null||s===void 0?void 0:s.redirectTo,scopes:(n=e.options)===null||n===void 0?void 0:n.scopes,queryParams:(r=e.options)===null||r===void 0?void 0:r.queryParams,skipBrowserRedirect:(i=e.options)===null||i===void 0?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:s}=e;switch(s){case"ethereum":return await this.signInWithEthereum(e);case"solana":return await this.signInWithSolana(e);default:throw new Error(`@supabase/auth-js: Unsupported chain "${s}"`)}}async signInWithEthereum(e){var s,n,r,i,o,a,l,c,u,d,f;let h,v;if("message"in e)h=e.message,v=e.signature;else{const{chain:y,wallet:E,statement:S,options:m}=e;let g;if(qe())if(typeof E=="object")g=E;else{const q=window;if("ethereum"in q&&typeof q.ethereum=="object"&&"request"in q.ethereum&&typeof q.ethereum.request=="function")g=q.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof E!="object"||!m?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");g=E}const k=new URL((s=m?.url)!==null&&s!==void 0?s:window.location.href),A=await g.request({method:"eth_requestAccounts"}).then(q=>q).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!A||A.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const U=mu(A[0]);let z=(n=m?.signInWithEthereum)===null||n===void 0?void 0:n.chainId;if(!z){const q=await g.request({method:"eth_chainId"});z=hv(q)}const Y={domain:k.host,address:U,statement:S,uri:k.href,version:"1",chainId:z,nonce:(r=m?.signInWithEthereum)===null||r===void 0?void 0:r.nonce,issuedAt:(o=(i=m?.signInWithEthereum)===null||i===void 0?void 0:i.issuedAt)!==null&&o!==void 0?o:new Date,expirationTime:(a=m?.signInWithEthereum)===null||a===void 0?void 0:a.expirationTime,notBefore:(l=m?.signInWithEthereum)===null||l===void 0?void 0:l.notBefore,requestId:(c=m?.signInWithEthereum)===null||c===void 0?void 0:c.requestId,resources:(u=m?.signInWithEthereum)===null||u===void 0?void 0:u.resources};h=pv(Y),v=await g.request({method:"personal_sign",params:[fv(h),U]})}try{const{data:y,error:E}=await re(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:h,signature:v},!((d=e.options)===null||d===void 0)&&d.captchaToken?{gotrue_meta_security:{captcha_token:(f=e.options)===null||f===void 0?void 0:f.captchaToken}}:null),xform:bt});if(E)throw E;if(!y||!y.session||!y.user){const S=new Ns;return this._returnResult({data:{user:null,session:null},error:S})}return y.session&&(await this._saveSession(y.session),await this._notifyAllSubscribers("SIGNED_IN",y.session)),this._returnResult({data:Object.assign({},y),error:E})}catch(y){if(Q(y))return this._returnResult({data:{user:null,session:null},error:y});throw y}}async signInWithSolana(e){var s,n,r,i,o,a,l,c,u,d,f,h;let v,y;if("message"in e)v=e.message,y=e.signature;else{const{chain:E,wallet:S,statement:m,options:g}=e;let k;if(qe())if(typeof S=="object")k=S;else{const U=window;if("solana"in U&&typeof U.solana=="object"&&("signIn"in U.solana&&typeof U.solana.signIn=="function"||"signMessage"in U.solana&&typeof U.solana.signMessage=="function"))k=U.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof S!="object"||!g?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");k=S}const A=new URL((s=g?.url)!==null&&s!==void 0?s:window.location.href);if("signIn"in k&&k.signIn){const U=await k.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},g?.signInWithSolana),{version:"1",domain:A.host,uri:A.href}),m?{statement:m}:null));let z;if(Array.isArray(U)&&U[0]&&typeof U[0]=="object")z=U[0];else if(U&&typeof U=="object"&&"signedMessage"in U&&"signature"in U)z=U;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in z&&"signature"in z&&(typeof z.signedMessage=="string"||z.signedMessage instanceof Uint8Array)&&z.signature instanceof Uint8Array)v=typeof z.signedMessage=="string"?z.signedMessage:new TextDecoder().decode(z.signedMessage),y=z.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in k)||typeof k.signMessage!="function"||!("publicKey"in k)||typeof k!="object"||!k.publicKey||!("toBase58"in k.publicKey)||typeof k.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");v=[`${A.host} wants you to sign in with your Solana account:`,k.publicKey.toBase58(),...m?["",m,""]:[""],"Version: 1",`URI: ${A.href}`,`Issued At: ${(r=(n=g?.signInWithSolana)===null||n===void 0?void 0:n.issuedAt)!==null&&r!==void 0?r:new Date().toISOString()}`,...!((i=g?.signInWithSolana)===null||i===void 0)&&i.notBefore?[`Not Before: ${g.signInWithSolana.notBefore}`]:[],...!((o=g?.signInWithSolana)===null||o===void 0)&&o.expirationTime?[`Expiration Time: ${g.signInWithSolana.expirationTime}`]:[],...!((a=g?.signInWithSolana)===null||a===void 0)&&a.chainId?[`Chain ID: ${g.signInWithSolana.chainId}`]:[],...!((l=g?.signInWithSolana)===null||l===void 0)&&l.nonce?[`Nonce: ${g.signInWithSolana.nonce}`]:[],...!((c=g?.signInWithSolana)===null||c===void 0)&&c.requestId?[`Request ID: ${g.signInWithSolana.requestId}`]:[],...!((d=(u=g?.signInWithSolana)===null||u===void 0?void 0:u.resources)===null||d===void 0)&&d.length?["Resources",...g.signInWithSolana.resources.map(z=>`- ${z}`)]:[]].join(`
`);const U=await k.signMessage(new TextEncoder().encode(v),"utf8");if(!U||!(U instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");y=U}}try{const{data:E,error:S}=await re(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:v,signature:Ts(y)},!((f=e.options)===null||f===void 0)&&f.captchaToken?{gotrue_meta_security:{captcha_token:(h=e.options)===null||h===void 0?void 0:h.captchaToken}}:null),xform:bt});if(S)throw S;if(!E||!E.session||!E.user){const m=new Ns;return this._returnResult({data:{user:null,session:null},error:m})}return E.session&&(await this._saveSession(E.session),await this._notifyAllSubscribers("SIGNED_IN",E.session)),this._returnResult({data:Object.assign({},E),error:S})}catch(E){if(Q(E))return this._returnResult({data:{user:null,session:null},error:E});throw E}}async _exchangeCodeForSession(e){const s=await ms(this.storage,`${this.storageKey}-code-verifier`),[n,r]=(s??"").split("/");try{const{data:i,error:o}=await re(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:n},xform:bt});if(await ts(this.storage,`${this.storageKey}-code-verifier`),o)throw o;if(!i||!i.session||!i.user){const a=new Ns;return this._returnResult({data:{user:null,session:null,redirectType:null},error:a})}return i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),this._returnResult({data:Object.assign(Object.assign({},i),{redirectType:r??null}),error:o})}catch(i){if(Q(i))return this._returnResult({data:{user:null,session:null,redirectType:null},error:i});throw i}}async signInWithIdToken(e){try{const{options:s,provider:n,token:r,access_token:i,nonce:o}=e,a=await re(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:n,id_token:r,access_token:i,nonce:o,gotrue_meta_security:{captcha_token:s?.captchaToken}},xform:bt}),{data:l,error:c}=a;if(c)return this._returnResult({data:{user:null,session:null},error:c});if(!l||!l.session||!l.user){const u=new Ns;return this._returnResult({data:{user:null,session:null},error:u})}return l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",l.session)),this._returnResult({data:l,error:c})}catch(s){if(Q(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}}async signInWithOtp(e){var s,n,r,i,o;try{if("email"in e){const{email:a,options:l}=e;let c=null,u=null;this.flowType==="pkce"&&([c,u]=await Ls(this.storage,this.storageKey));const{error:d}=await re(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:a,data:(s=l?.data)!==null&&s!==void 0?s:{},create_user:(n=l?.shouldCreateUser)!==null&&n!==void 0?n:!0,gotrue_meta_security:{captcha_token:l?.captchaToken},code_challenge:c,code_challenge_method:u},redirectTo:l?.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:d})}if("phone"in e){const{phone:a,options:l}=e,{data:c,error:u}=await re(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:a,data:(r=l?.data)!==null&&r!==void 0?r:{},create_user:(i=l?.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:l?.captchaToken},channel:(o=l?.channel)!==null&&o!==void 0?o:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:c?.message_id},error:u})}throw new er("You must provide either an email or phone number.")}catch(a){if(Q(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}}async verifyOtp(e){var s,n;try{let r,i;"options"in e&&(r=(s=e.options)===null||s===void 0?void 0:s.redirectTo,i=(n=e.options)===null||n===void 0?void 0:n.captchaToken);const{data:o,error:a}=await re(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:i}}),redirectTo:r,xform:bt});if(a)throw a;if(!o)throw new Error("An error occurred on token verification.");const l=o.session,c=o.user;return l?.access_token&&(await this._saveSession(l),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",l)),this._returnResult({data:{user:c,session:l},error:null})}catch(r){if(Q(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async signInWithSSO(e){var s,n,r,i,o;try{let a=null,l=null;this.flowType==="pkce"&&([a,l]=await Ls(this.storage,this.storageKey));const c=await re(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(n=(s=e.options)===null||s===void 0?void 0:s.redirectTo)!==null&&n!==void 0?n:void 0}),!((r=e?.options)===null||r===void 0)&&r.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:a,code_challenge_method:l}),headers:this.headers,xform:iv});return!((i=c.data)===null||i===void 0)&&i.url&&qe()&&!(!((o=e.options)===null||o===void 0)&&o.skipBrowserRedirect)&&window.location.assign(c.data.url),this._returnResult(c)}catch(a){if(Q(a))return this._returnResult({data:null,error:a});throw a}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:s},error:n}=e;if(n)throw n;if(!s)throw new ot;const{error:r}=await re(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:s.access_token});return this._returnResult({data:{user:null,session:null},error:r})})}catch(e){if(Q(e))return this._returnResult({data:{user:null,session:null},error:e});throw e}}async resend(e){try{const s=`${this.url}/resend`;if("email"in e){const{email:n,type:r,options:i}=e,{error:o}=await re(this.fetch,"POST",s,{headers:this.headers,body:{email:n,type:r,gotrue_meta_security:{captcha_token:i?.captchaToken}},redirectTo:i?.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:o})}else if("phone"in e){const{phone:n,type:r,options:i}=e,{data:o,error:a}=await re(this.fetch,"POST",s,{headers:this.headers,body:{phone:n,type:r,gotrue_meta_security:{captcha_token:i?.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:o?.message_id},error:a})}throw new er("You must provide either an email or phone number and a type")}catch(s){if(Q(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async s=>s))}async _acquireLock(e,s){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const n=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),r=(async()=>(await n,await s()))();return this.pendingInLock.push((async()=>{try{await r}catch{}})()),r}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const n=s();for(this.pendingInLock.push((async()=>{try{await n}catch{}})()),await n;this.pendingInLock.length;){const r=[...this.pendingInLock];await Promise.all(r),this.pendingInLock.splice(0,r.length)}return await n}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const s=await this.__loadSession();return await e(s)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const s=await ms(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",s),s!==null&&(this._isValidSession(s)?e=s:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const n=e.expires_at?e.expires_at*1e3-Date.now()<ai:!1;if(this._debug("#__loadSession()",`session has${n?"":" not"} expired`,"expires_at",e.expires_at),!n){if(this.userStorage){const o=await ms(this.userStorage,this.storageKey+"-user");o?.user?e.user=o.user:e.user=ui()}if(this.storage.isServer&&e.user&&!e.user.__isUserNotAvailableProxy){const o={value:this.suppressGetSessionWarning};e.user=tv(e.user,o),o.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:e},error:null}}const{data:r,error:i}=await this._callRefreshToken(e.refresh_token);return i?this._returnResult({data:{session:null},error:i}):this._returnResult({data:{session:r},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await re(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:as}):await this._useSession(async s=>{var n,r,i;const{data:o,error:a}=s;if(a)throw a;return!(!((n=o.session)===null||n===void 0)&&n.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new ot}:await re(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(i=(r=o.session)===null||r===void 0?void 0:r.access_token)!==null&&i!==void 0?i:void 0,xform:as})})}catch(s){if(Q(s))return Pg(s)&&(await this._removeSession(),await ts(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:s});throw s}}async updateUser(e,s={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,s))}async _updateUser(e,s={}){try{return await this._useSession(async n=>{const{data:r,error:i}=n;if(i)throw i;if(!r.session)throw new ot;const o=r.session;let a=null,l=null;this.flowType==="pkce"&&e.email!=null&&([a,l]=await Ls(this.storage,this.storageKey));const{data:c,error:u}=await re(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:s?.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:a,code_challenge_method:l}),jwt:o.access_token,xform:as});if(u)throw u;return o.user=c.user,await this._saveSession(o),await this._notifyAllSubscribers("USER_UPDATED",o),this._returnResult({data:{user:o.user},error:null})})}catch(n){if(Q(n))return this._returnResult({data:{user:null},error:n});throw n}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new ot;const s=Date.now()/1e3;let n=s,r=!0,i=null;const{payload:o}=ci(e.access_token);if(o.exp&&(n=o.exp,r=n<=s),r){const{data:a,error:l}=await this._callRefreshToken(e.refresh_token);if(l)return this._returnResult({data:{user:null,session:null},error:l});if(!a)return{data:{user:null,session:null},error:null};i=a}else{const{data:a,error:l}=await this._getUser(e.access_token);if(l)throw l;i={access_token:e.access_token,refresh_token:e.refresh_token,user:a.user,token_type:"bearer",expires_in:n-s,expires_at:n},await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)}return this._returnResult({data:{user:i.user,session:i},error:null})}catch(s){if(Q(s))return this._returnResult({data:{session:null,user:null},error:s});throw s}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async s=>{var n;if(!e){const{data:o,error:a}=s;if(a)throw a;e=(n=o.session)!==null&&n!==void 0?n:void 0}if(!e?.refresh_token)throw new ot;const{data:r,error:i}=await this._callRefreshToken(e.refresh_token);return i?this._returnResult({data:{user:null,session:null},error:i}):r?this._returnResult({data:{user:r.user,session:r},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(s){if(Q(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}}async _getSessionFromURL(e,s){try{if(!qe())throw new tr("No browser detected.");if(e.error||e.error_description||e.error_code)throw new tr(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(s){case"implicit":if(this.flowType==="pkce")throw new ja("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new tr("Not a valid implicit grant flow url.");break;default:}if(s==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new ja("No code detected.");const{data:m,error:g}=await this._exchangeCodeForSession(e.code);if(g)throw g;const k=new URL(window.location.href);return k.searchParams.delete("code"),window.history.replaceState(window.history.state,"",k.toString()),{data:{session:m.session,redirectType:null},error:null}}const{provider_token:n,provider_refresh_token:r,access_token:i,refresh_token:o,expires_in:a,expires_at:l,token_type:c}=e;if(!i||!a||!o||!c)throw new tr("No session defined in URL");const u=Math.round(Date.now()/1e3),d=parseInt(a);let f=u+d;l&&(f=parseInt(l));const h=f-u;h*1e3<=qs&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${h}s, should have been closer to ${d}s`);const v=f-d;u-v>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",v,f,u):u-v<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",v,f,u);const{data:y,error:E}=await this._getUser(i);if(E)throw E;const S={provider_token:n,provider_refresh_token:r,access_token:i,expires_in:d,expires_at:f,refresh_token:o,token_type:c,user:y.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:S,redirectType:e.type},error:null})}catch(n){if(Q(n))return this._returnResult({data:{session:null,redirectType:null},error:n});throw n}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const s=await ms(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&s)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async s=>{var n;const{data:r,error:i}=s;if(i)return this._returnResult({error:i});const o=(n=r.session)===null||n===void 0?void 0:n.access_token;if(o){const{error:a}=await this.admin.signOut(o,e);if(a&&!($g(a)&&(a.status===404||a.status===401||a.status===403)))return this._returnResult({error:a})}return e!=="others"&&(await this._removeSession(),await ts(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(e){const s=Fg(),n={id:s,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",s),this.stateChangeEmitters.delete(s)}};return this._debug("#onAuthStateChange()","registered callback with id",s),this.stateChangeEmitters.set(s,n),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(s)})))(),{data:{subscription:n}}}async _emitInitialSession(e){return await this._useSession(async s=>{var n,r;try{const{data:{session:i},error:o}=s;if(o)throw o;await((n=this.stateChangeEmitters.get(e))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",i)),this._debug("INITIAL_SESSION","callback id",e,"session",i)}catch(i){await((r=this.stateChangeEmitters.get(e))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",i),console.error(i)}})}async resetPasswordForEmail(e,s={}){let n=null,r=null;this.flowType==="pkce"&&([n,r]=await Ls(this.storage,this.storageKey,!0));try{return await re(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:n,code_challenge_method:r,gotrue_meta_security:{captcha_token:s.captchaToken}},headers:this.headers,redirectTo:s.redirectTo})}catch(i){if(Q(i))return this._returnResult({data:null,error:i});throw i}}async getUserIdentities(){var e;try{const{data:s,error:n}=await this.getUser();if(n)throw n;return this._returnResult({data:{identities:(e=s.user.identities)!==null&&e!==void 0?e:[]},error:null})}catch(s){if(Q(s))return this._returnResult({data:null,error:s});throw s}}async linkIdentity(e){return"token"in e?this.linkIdentityIdToken(e):this.linkIdentityOAuth(e)}async linkIdentityOAuth(e){var s;try{const{data:n,error:r}=await this._useSession(async i=>{var o,a,l,c,u;const{data:d,error:f}=i;if(f)throw f;const h=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(o=e.options)===null||o===void 0?void 0:o.redirectTo,scopes:(a=e.options)===null||a===void 0?void 0:a.scopes,queryParams:(l=e.options)===null||l===void 0?void 0:l.queryParams,skipBrowserRedirect:!0});return await re(this.fetch,"GET",h,{headers:this.headers,jwt:(u=(c=d.session)===null||c===void 0?void 0:c.access_token)!==null&&u!==void 0?u:void 0})});if(r)throw r;return qe()&&!(!((s=e.options)===null||s===void 0)&&s.skipBrowserRedirect)&&window.location.assign(n?.url),this._returnResult({data:{provider:e.provider,url:n?.url},error:null})}catch(n){if(Q(n))return this._returnResult({data:{provider:e.provider,url:null},error:n});throw n}}async linkIdentityIdToken(e){return await this._useSession(async s=>{var n;try{const{error:r,data:{session:i}}=s;if(r)throw r;const{options:o,provider:a,token:l,access_token:c,nonce:u}=e,d=await re(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(n=i?.access_token)!==null&&n!==void 0?n:void 0,body:{provider:a,id_token:l,access_token:c,nonce:u,link_identity:!0,gotrue_meta_security:{captcha_token:o?.captchaToken}},xform:bt}),{data:f,error:h}=d;return h?this._returnResult({data:{user:null,session:null},error:h}):!f||!f.session||!f.user?this._returnResult({data:{user:null,session:null},error:new Ns}):(f.session&&(await this._saveSession(f.session),await this._notifyAllSubscribers("USER_UPDATED",f.session)),this._returnResult({data:f,error:h}))}catch(r){if(Q(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}})}async unlinkIdentity(e){try{return await this._useSession(async s=>{var n,r;const{data:i,error:o}=s;if(o)throw o;return await re(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(r=(n=i.session)===null||n===void 0?void 0:n.access_token)!==null&&r!==void 0?r:void 0})})}catch(s){if(Q(s))return this._returnResult({data:null,error:s});throw s}}async _refreshAccessToken(e){const s=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(s,"begin");try{const n=Date.now();return await Kg(async r=>(r>0&&await Vg(200*Math.pow(2,r-1)),this._debug(s,"refreshing attempt",r),await re(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:bt})),(r,i)=>{const o=200*Math.pow(2,r);return i&&li(i)&&Date.now()+o-n<qs})}catch(n){if(this._debug(s,"error",n),Q(n))return this._returnResult({data:{session:null,user:null},error:n});throw n}finally{this._debug(s,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,s){const n=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:s.redirectTo,scopes:s.scopes,queryParams:s.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",s,"url",n),qe()&&!s.skipBrowserRedirect&&window.location.assign(n),{data:{provider:e,url:n},error:null}}async _recoverAndRefresh(){var e,s;const n="#_recoverAndRefresh()";this._debug(n,"begin");try{const r=await ms(this.storage,this.storageKey);if(r&&this.userStorage){let o=await ms(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!o&&(o={user:r.user},await Hs(this.userStorage,this.storageKey+"-user",o)),r.user=(e=o?.user)!==null&&e!==void 0?e:ui()}else if(r&&!r.user&&!r.user){const o=await ms(this.storage,this.storageKey+"-user");o&&o?.user?(r.user=o.user,await ts(this.storage,this.storageKey+"-user"),await Hs(this.storage,this.storageKey,r)):r.user=ui()}if(this._debug(n,"session from storage",r),!this._isValidSession(r)){this._debug(n,"session is not valid"),r!==null&&await this._removeSession();return}const i=((s=r.expires_at)!==null&&s!==void 0?s:1/0)*1e3-Date.now()<ai;if(this._debug(n,`session has${i?"":" not"} expired with margin of ${ai}s`),i){if(this.autoRefreshToken&&r.refresh_token){const{error:o}=await this._callRefreshToken(r.refresh_token);o&&(console.error(o),li(o)||(this._debug(n,"refresh failed with a non-retryable error, removing the session",o),await this._removeSession()))}}else if(r.user&&r.user.__isUserNotAvailableProxy===!0)try{const{data:o,error:a}=await this._getUser(r.access_token);!a&&o?.user?(r.user=o.user,await this._saveSession(r),await this._notifyAllSubscribers("SIGNED_IN",r)):this._debug(n,"could not get user data, skipping SIGNED_IN notification")}catch(o){console.error("Error getting user data:",o),this._debug(n,"error getting user data, skipping SIGNED_IN notification",o)}else await this._notifyAllSubscribers("SIGNED_IN",r)}catch(r){this._debug(n,"error",r),console.error(r);return}finally{this._debug(n,"end")}}async _callRefreshToken(e){var s,n;if(!e)throw new ot;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const r=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(r,"begin");try{this.refreshingDeferred=new Fr;const{data:i,error:o}=await this._refreshAccessToken(e);if(o)throw o;if(!i.session)throw new ot;await this._saveSession(i.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",i.session);const a={data:i.session,error:null};return this.refreshingDeferred.resolve(a),a}catch(i){if(this._debug(r,"error",i),Q(i)){const o={data:null,error:i};return li(i)||await this._removeSession(),(s=this.refreshingDeferred)===null||s===void 0||s.resolve(o),o}throw(n=this.refreshingDeferred)===null||n===void 0||n.reject(i),i}finally{this.refreshingDeferred=null,this._debug(r,"end")}}async _notifyAllSubscribers(e,s,n=!0){const r=`#_notifyAllSubscribers(${e})`;this._debug(r,"begin",s,`broadcast = ${n}`);try{this.broadcastChannel&&n&&this.broadcastChannel.postMessage({event:e,session:s});const i=[],o=Array.from(this.stateChangeEmitters.values()).map(async a=>{try{await a.callback(e,s)}catch(l){i.push(l)}});if(await Promise.all(o),i.length>0){for(let a=0;a<i.length;a+=1)console.error(i[a]);throw i[0]}}finally{this._debug(r,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0;const s=Object.assign({},e),n=s.user&&s.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!n&&s.user&&await Hs(this.userStorage,this.storageKey+"-user",{user:s.user});const r=Object.assign({},s);delete r.user;const i=Ba(r);await Hs(this.storage,this.storageKey,i)}else{const r=Ba(s);await Hs(this.storage,this.storageKey,r)}}async _removeSession(){this._debug("#_removeSession()"),await ts(this.storage,this.storageKey),await ts(this.storage,this.storageKey+"-code-verifier"),await ts(this.storage,this.storageKey+"-user"),this.userStorage&&await ts(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&qe()&&window?.removeEventListener&&window.removeEventListener("visibilitychange",e)}catch(s){console.error("removing visibilitychange callback failed",s)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),qs);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async s=>{const{data:{session:n}}=s;if(!n||!n.refresh_token||!n.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const r=Math.floor((n.expires_at*1e3-e)/qs);this._debug("#_autoRefreshTokenTick()",`access token expires in ${r} ticks, a tick lasts ${qs}ms, refresh threshold is ${Ui} ticks`),r<=Ui&&await this._callRefreshToken(n.refresh_token)})}catch(s){console.error("Auto refresh tick failed with error. This is likely a transient error.",s)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof vu)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!qe()||!window?.addEventListener)return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window?.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const s=`#_onVisibilityChanged(${e})`;this._debug(s,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(s,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,s,n){const r=[`provider=${encodeURIComponent(s)}`];if(n?.redirectTo&&r.push(`redirect_to=${encodeURIComponent(n.redirectTo)}`),n?.scopes&&r.push(`scopes=${encodeURIComponent(n.scopes)}`),this.flowType==="pkce"){const[i,o]=await Ls(this.storage,this.storageKey),a=new URLSearchParams({code_challenge:`${encodeURIComponent(i)}`,code_challenge_method:`${encodeURIComponent(o)}`});r.push(a.toString())}if(n?.queryParams){const i=new URLSearchParams(n.queryParams);r.push(i.toString())}return n?.skipBrowserRedirect&&r.push(`skip_http_redirect=${n.skipBrowserRedirect}`),`${e}?${r.join("&")}`}async _unenroll(e){try{return await this._useSession(async s=>{var n;const{data:r,error:i}=s;return i?this._returnResult({data:null,error:i}):await re(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(n=r?.session)===null||n===void 0?void 0:n.access_token})})}catch(s){if(Q(s))return this._returnResult({data:null,error:s});throw s}}async _enroll(e){try{return await this._useSession(async s=>{var n,r;const{data:i,error:o}=s;if(o)return this._returnResult({data:null,error:o});const a=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:e.factorType==="totp"?{issuer:e.issuer}:{}),{data:l,error:c}=await re(this.fetch,"POST",`${this.url}/factors`,{body:a,headers:this.headers,jwt:(n=i?.session)===null||n===void 0?void 0:n.access_token});return c?this._returnResult({data:null,error:c}):(e.factorType==="totp"&&l.type==="totp"&&(!((r=l?.totp)===null||r===void 0)&&r.qr_code)&&(l.totp.qr_code=`data:image/svg+xml;utf-8,${l.totp.qr_code}`),this._returnResult({data:l,error:null}))})}catch(s){if(Q(s))return this._returnResult({data:null,error:s});throw s}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async s=>{var n;const{data:r,error:i}=s;if(i)return this._returnResult({data:null,error:i});const o=Object.assign({challenge_id:e.challengeId},"webauthn"in e?{webauthn:Object.assign(Object.assign({},e.webauthn),{credential_response:e.webauthn.type==="create"?wv(e.webauthn.credential_response):kv(e.webauthn.credential_response)})}:{code:e.code}),{data:a,error:l}=await re(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:o,headers:this.headers,jwt:(n=r?.session)===null||n===void 0?void 0:n.access_token});return l?this._returnResult({data:null,error:l}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+a.expires_in},a)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",a),this._returnResult({data:a,error:l}))})}catch(s){if(Q(s))return this._returnResult({data:null,error:s});throw s}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async s=>{var n;const{data:r,error:i}=s;if(i)return this._returnResult({data:null,error:i});const o=await re(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:e,headers:this.headers,jwt:(n=r?.session)===null||n===void 0?void 0:n.access_token});if(o.error)return o;const{data:a}=o;if(a.type!=="webauthn")return{data:a,error:null};switch(a.webauthn.type){case"create":return{data:Object.assign(Object.assign({},a),{webauthn:Object.assign(Object.assign({},a.webauthn),{credential_options:Object.assign(Object.assign({},a.webauthn.credential_options),{publicKey:yv(a.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},a),{webauthn:Object.assign(Object.assign({},a.webauthn),{credential_options:Object.assign(Object.assign({},a.webauthn.credential_options),{publicKey:bv(a.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(s){if(Q(s))return this._returnResult({data:null,error:s});throw s}})}async _challengeAndVerify(e){const{data:s,error:n}=await this._challenge({factorId:e.factorId});return n?this._returnResult({data:null,error:n}):await this._verify({factorId:e.factorId,challengeId:s.id,code:e.code})}async _listFactors(){var e;const{data:{user:s},error:n}=await this.getUser();if(n)return{data:null,error:n};const r={all:[],phone:[],totp:[],webauthn:[]};for(const i of(e=s?.factors)!==null&&e!==void 0?e:[])r.all.push(i),i.status==="verified"&&r[i.factor_type].push(i);return{data:r,error:null}}async _getAuthenticatorAssuranceLevel(){var e,s;const{data:{session:n},error:r}=await this.getSession();if(r)return this._returnResult({data:null,error:r});if(!n)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:i}=ci(n.access_token);let o=null;i.aal&&(o=i.aal);let a=o;((s=(e=n.user.factors)===null||e===void 0?void 0:e.filter(u=>u.status==="verified"))!==null&&s!==void 0?s:[]).length>0&&(a="aal2");const c=i.amr||[];return{data:{currentLevel:o,nextLevel:a,currentAuthenticationMethods:c},error:null}}async _getAuthorizationDetails(e){try{return await this._useSession(async s=>{const{data:{session:n},error:r}=s;return r?this._returnResult({data:null,error:r}):n?await re(this.fetch,"GET",`${this.url}/oauth/authorizations/${e}`,{headers:this.headers,jwt:n.access_token,xform:i=>({data:i,error:null})}):this._returnResult({data:null,error:new ot})})}catch(s){if(Q(s))return this._returnResult({data:null,error:s});throw s}}async _approveAuthorization(e,s){try{return await this._useSession(async n=>{const{data:{session:r},error:i}=n;if(i)return this._returnResult({data:null,error:i});if(!r)return this._returnResult({data:null,error:new ot});const o=await re(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:r.access_token,body:{action:"approve"},xform:a=>({data:a,error:null})});return o.data&&o.data.redirect_url&&qe()&&!s?.skipBrowserRedirect&&window.location.assign(o.data.redirect_url),o})}catch(n){if(Q(n))return this._returnResult({data:null,error:n});throw n}}async _denyAuthorization(e,s){try{return await this._useSession(async n=>{const{data:{session:r},error:i}=n;if(i)return this._returnResult({data:null,error:i});if(!r)return this._returnResult({data:null,error:new ot});const o=await re(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:r.access_token,body:{action:"deny"},xform:a=>({data:a,error:null})});return o.data&&o.data.redirect_url&&qe()&&!s?.skipBrowserRedirect&&window.location.assign(o.data.redirect_url),o})}catch(n){if(Q(n))return this._returnResult({data:null,error:n});throw n}}async _listOAuthGrants(){try{return await this._useSession(async e=>{const{data:{session:s},error:n}=e;return n?this._returnResult({data:null,error:n}):s?await re(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:s.access_token,xform:r=>({data:r,error:null})}):this._returnResult({data:null,error:new ot})})}catch(e){if(Q(e))return this._returnResult({data:null,error:e});throw e}}async _revokeOAuthGrant(e){try{return await this._useSession(async s=>{const{data:{session:n},error:r}=s;return r?this._returnResult({data:null,error:r}):n?(await re(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:n.access_token,query:{client_id:e.clientId},noResolveJson:!0}),{data:{},error:null}):this._returnResult({data:null,error:new ot})})}catch(s){if(Q(s))return this._returnResult({data:null,error:s});throw s}}async fetchJwk(e,s={keys:[]}){let n=s.keys.find(a=>a.kid===e);if(n)return n;const r=Date.now();if(n=this.jwks.keys.find(a=>a.kid===e),n&&this.jwks_cached_at+Cg>r)return n;const{data:i,error:o}=await re(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(o)throw o;return!i.keys||i.keys.length===0||(this.jwks=i,this.jwks_cached_at=r,n=i.keys.find(a=>a.kid===e),!n)?null:n}async getClaims(e,s={}){try{let n=e;if(!n){const{data:h,error:v}=await this.getSession();if(v||!h.session)return this._returnResult({data:null,error:v});n=h.session.access_token}const{header:r,payload:i,signature:o,raw:{header:a,payload:l}}=ci(n);s?.allowExpired||Yg(i.exp);const c=!r.alg||r.alg.startsWith("HS")||!r.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(r.kid,s?.keys?{keys:s.keys}:s?.jwks);if(!c){const{error:h}=await this.getUser(n);if(h)throw h;return{data:{claims:i,header:r,signature:o},error:null}}const u=Xg(r.alg),d=await crypto.subtle.importKey("jwk",c,u,!0,["verify"]);if(!await crypto.subtle.verify(u,d,o,Bg(`${a}.${l}`)))throw new Fi("Invalid JWT signature");return{data:{claims:i,header:r,signature:o},error:null}}catch(n){if(Q(n))return this._returnResult({data:null,error:n});throw n}}}Dn.nextInstanceID={};const Rv=Dn;class $v extends Rv{constructor(e){super(e)}}class Pv{constructor(e,s,n){var r,i,o;this.supabaseUrl=e,this.supabaseKey=s;const a=Ig(e);if(!s)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",a),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",a),this.storageUrl=new URL("storage/v1",a),this.functionsUrl=new URL("functions/v1",a);const l=`sb-${a.hostname.split(".")[0]}-auth-token`,c={db:mg,realtime:yg,auth:Object.assign(Object.assign({},_g),{storageKey:l}),global:vg},u=Eg(n??{},c);this.storageKey=(r=u.auth.storageKey)!==null&&r!==void 0?r:"",this.headers=(i=u.global.headers)!==null&&i!==void 0?i:{},u.accessToken?(this.accessToken=u.accessToken,this.auth=new Proxy({},{get:(d,f)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(f)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((o=u.auth)!==null&&o!==void 0?o:{},this.headers,u.global.fetch),this.fetch=kg(s,this._getAccessToken.bind(this),u.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},u.realtime)),this.accessToken&&this.accessToken().then(d=>this.realtime.setAuth(d)).catch(d=>console.warn("Failed to set initial Realtime auth token:",d)),this.rest=new yp(new URL("rest/v1",a).href,{headers:this.headers,schema:u.db.schema,fetch:this.fetch}),this.storage=new fg(this.storageUrl.href,this.headers,this.fetch,n?.storage),u.accessToken||this._listenForAuthEvents()}get functions(){return new fp(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,s={},n={head:!1,get:!1,count:void 0}){return this.rest.rpc(e,s,n)}channel(e,s={config:{}}){return this.realtime.channel(e,s)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var e,s;if(this.accessToken)return await this.accessToken();const{data:n}=await this.auth.getSession();return(s=(e=n.session)===null||e===void 0?void 0:e.access_token)!==null&&s!==void 0?s:this.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:s,detectSessionInUrl:n,storage:r,userStorage:i,storageKey:o,flowType:a,lock:l,debug:c,throwOnError:u},d,f){const h={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new $v({url:this.authUrl.href,headers:Object.assign(Object.assign({},h),d),storageKey:o,autoRefreshToken:e,persistSession:s,detectSessionInUrl:n,storage:r,userStorage:i,flowType:a,lock:l,debug:c,throwOnError:u,fetch:f,hasCustomAuthorizationHeader:Object.keys(this.headers).some(v=>v.toLowerCase()==="authorization")})}_initRealtimeClient(e){return new Lp(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e?.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((s,n)=>{this._handleTokenChanged(s,"CLIENT",n?.access_token)})}_handleTokenChanged(e,s,n){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==n?(this.changedAccessToken=n,this.realtime.setAuth(n)):e==="SIGNED_OUT"&&(this.realtime.setAuth(),s=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const jv=(t,e,s)=>new Pv(t,e,s);function Nv(){if(typeof window<"u"||typeof process>"u")return!1;const t=process.version;if(t==null)return!1;const e=t.match(/^v(\d+)\./);return e?parseInt(e[1],10)<=18:!1}Nv()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");console.log("HARDCODE URL TEST");console.log("ENV URL:","https://uhefdohlvhwsfooyzqnm.supabase.co");const yu="https://uhefdohlvhwsfooyzqnm.supabase.co",bu="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InVoZWZkb2hsdmh3c2Zvb3l6cW5tIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjQ1MTY5MzUsImV4cCI6MjA4MDA5MjkzNX0.KV_nnd1bjpFSYJxrkhCl4l-Zkhj0X-g6aw2cFbN6JII";console.log("supabaseUrl =",yu);console.log("supabaseAnonKey =",bu);const B=jv(yu,bu),dn=O(0),hn=O(null),Lv=O(0),Dv=O(null),sr=O([]);function et(){const t=async()=>{const{data:{user:r}}=await B.auth.getUser();if(r){let{data:i}=await B.from("spielerprofile").select("global_score").eq("user_id",r.id).maybeSingle();i?dn.value=i.global_score??0:(await B.from("spielerprofile").insert({user_id:r.id,global_score:0,alter:0,geschlecht:"unknown",internet_affinitaet:0,erkennung_skill:0}),dn.value=0);const{data:o}=await B.from("level_fortschritt").select("level_id").eq("user_id",r.id);o&&(sr.value=o.map(a=>a.level_id))}},e=r=>{const i=Number(r);sr.value.includes(i)||sr.value.push(i)},s=async(r,i)=>{const o=Number(i),a=sr.value.map(Number).includes(o);let l=0;if(r?a?n("Richtig!","neutral"):(l=5,n(`+${l}`,"positive")):a?n("Falsch","neutral"):(l=-5,n(`${l}`,"negative")),!a&&l!==0){dn.value+=l;const{data:{user:u}}=await B.auth.getUser();u&&await B.from("spielerprofile").update({global_score:dn.value}).eq("user_id",u.id)}},n=(r,i)=>{hn.value={text:r,type:i,id:Date.now()},setTimeout(()=>{hn.value&&Date.now()-hn.value.id>=1400&&(hn.value=null)},1500)};return{totalScore:dn,scoreFeedback:hn,currentStreak:Lv,streakFeedback:Dv,markLevelAsCompleted:e,initGameState:t,handleScoreAction:s}}const xe=(t,e)=>{const s=t.__vccOpts||t;for(const[n,r]of e)s[n]=r;return s},Uv={class:"navbar"},Bv={class:"navbar-left"},Mv={key:0,class:"navbar-center"},Fv={class:"value"},qv={class:"navbar-right"},Hv={key:1,class:"dropdown-container"},Vv={key:0,class:"neo-dropdown"},Kv={__name:"navbar",setup(t){const e=Xe(),s=O(null),n=O(!1),r=O(!1),{totalScore:i,scoreFeedback:o,streakFeedback:a,initGameState:l}=et(),c=f=>{f.stopPropagation(),r.value=!r.value},u=()=>{r.value=!1},d=async()=>{await B.auth.signOut(),n.value=!1,r.value=!1,s.value=null,e.push("/")};return Ce(()=>{window.addEventListener("click",u),B.auth.getSession().then(({data:{session:f}})=>{s.value=f?.user||null,s.value&&l()}),B.auth.onAuthStateChange((f,h)=>{s.value=h?.user||null})}),Zt(()=>{window.removeEventListener("click",u)}),(f,h)=>{const v=Cs("router-link");return b(),I("nav",Uv,[p("div",Bv,[ve(v,{to:"/",class:"navbar-logo"},{default:Be(()=>[...h[0]||(h[0]=[p("img",{src:Xh,alt:"Logo",class:"logo-image"},null,-1),p("span",{class:"logo-text"},"Detectino",-1)])]),_:1})]),s.value?(b(),I("div",Mv,[p("div",{class:Ae(["score-pill",{"pill-bounce":x(o)}])},[h[1]||(h[1]=p("span",{class:"icon"},"",-1)),p("span",Fv,R(x(i)),1)],2)])):M("",!0),p("div",qv,[ve(v,{to:"/info",class:"desktop-only navbar-button"},{default:Be(()=>[...h[2]||(h[2]=[we("Info",-1)])]),_:1}),s.value?(b(),I("div",Hv,[p("button",{onClick:Qt(c,["stop"]),class:"navbar-button"},"Men "),r.value?(b(),I("div",Vv,[ve(v,{to:"/leaderboard",onClick:u},{default:Be(()=>[...h[4]||(h[4]=[we("Leaderboard",-1)])]),_:1}),ve(v,{to:"/stats",onClick:u},{default:Be(()=>[...h[5]||(h[5]=[we("Statistiken",-1)])]),_:1}),ve(v,{to:"/profile",onClick:u},{default:Be(()=>[...h[6]||(h[6]=[we("Mein Profil",-1)])]),_:1}),h[7]||(h[7]=p("div",{class:"dropdown-divider"},null,-1)),p("button",{onClick:d},"Abmelden")])):M("",!0)])):(b(),se(v,{key:0,to:"/login",class:"navbar-button"},{default:Be(()=>[...h[3]||(h[3]=[we("Login",-1)])]),_:1}))]),ve(Ys,{name:"global-fly"},{default:Be(()=>[x(o)?(b(),I("div",{key:"score"+x(o).id,class:Ae(["global-score-flyer",x(o).type])},R(x(o).text),3)):M("",!0)]),_:1}),ve(Ys,{name:"streak-fly"},{default:Be(()=>[x(a)?(b(),I("div",{key:"streak"+x(a).id,class:"streak-flyer"},"  "+R(x(a).count)+"er STREAK! ",1)):M("",!0)]),_:1})])}}},Wv=xe(Kv,[["__scopeId","data-v-2e532b93"]]);function Rs(){const t=O(!1);return{fetchRandomRealImages:async(r=10)=>{try{const{data:i,error:o}=await B.rpc("get_random_unsplash",{n:r});if(o)throw o;return i.map(a=>({src:a.url,type:"real",bucket:"Unsplash",credit:{name:a.photographer_name,link:a.photographer_link,downloadLocation:a.download_location}}))}catch(i){return console.error("DB Fehler:",i.message),[]}},runHarvest:async()=>{console.log(" Exhaustive Harvest gestartet...");let r=1;for(;;){console.log(`Lade Seite ${r}...`);try{const{data:i,error:o}=await B.functions.invoke("unsplash-proxy",{body:{count:30,orientation:"portrait",collections:"gjZvv_WF6VQ"}});if(o||!i)break;const a=i.map(d=>({image_id:d.id,url:d.urls.regular,photographer_name:d.user.name,photographer_link:d.user.links.html,download_location:d.links.download_location,collection_id:"gjZvv_WF6VQ"})),{data:l,error:c}=await B.from("unsplash_buffer").upsert(a,{onConflict:"image_id"}).select();if(c)throw c;const{count:u}=await B.from("unsplash_buffer").select("*",{count:"exact",head:!0});if(console.log(`Aktuell in DB: ${u}`),r>20)break;r++,await new Promise(d=>setTimeout(d,500))}catch(i){console.error("Fehler:",i.message);break}}},triggerDownloadPing:async r=>{if(!r)return;fetch(`${r}&client_id=undefined`).catch(()=>{})},loading:t}}const zv={__name:"App",setup(t){const{runHarvest:e}=Rs();return window.harvest=e,window.saveSpecificImage=async()=>{console.log("Speichere Marktplatz-Bild (B61OZ1NgAUY)...");const s={image_id:"B61OZ1NgAUY",url:"https://images.unsplash.com/photo-1558285516-7a873891823a?auto=format&fit=crop&w=1080&q=80",photographer_name:"Sven Brandsma",photographer_link:"https://unsplash.com/@svenbrandsma",download_location:"https://api.unsplash.com/photos/B61OZ1NgAUY/download",collection_id:"gjZvv_WF6VQ"},{error:n}=await B.from("unsplash_buffer").upsert([s],{onConflict:"image_id"});n?console.error("Fehler:",n.message):console.log(" Erfolg! Bild B61OZ1NgAUY ist jetzt in deiner DB gespeichert.")},(s,n)=>{const r=Cs("router-view");return b(),I(de,null,[ve(Wv),ve(r)],64)}}},Gv={},Jv={class:"content-wrapper"},Zv={class:"welcomeCard"};function Qv(t,e){const s=Cs("router-link");return b(),I("div",Jv,[p("div",Zv,[e[1]||(e[1]=p("h1",null,"Wilkommen bei Detectino",-1)),e[2]||(e[2]=p("p",null,"Lerne Ki-generierte Bidler zu erkennen und dich gegen Fake-Flut zu wapnen",-1)),ve(s,{to:"/register",class:"register-btn"},{default:Be(()=>[...e[0]||(e[0]=[we(" Los gehts ",-1)])]),_:1})])])}const Yv=xe(Gv,[["render",Qv]]),Xv={class:"content-wrapper"},em={class:"register-card"},tm={key:0,class:"error-box"},sm={class:"form-group"},nm={class:"form-group"},rm={class:"form-group"},im={class:"form-group"},om={class:"form-group"},am={class:"radio-group"},lm={class:"custom-radio"},cm={class:"custom-radio"},um={class:"custom-radio"},dm={class:"form-group slider-group"},hm={class:"label-wrapper"},fm={class:"value-badge"},pm={class:"form-group slider-group"},gm={class:"label-wrapper"},vm={class:"value-badge"},mm=["disabled"],_m={__name:"Register",setup(t){const e=Xe();Ce(async()=>{const{data:{session:o}}=await B.auth.getSession();o&&e.push("/levels")});const s=O(!1),n=O(""),r=sn({email:"",password:"",username:"",alter:null,geschlecht:"",internet_affinitaet:5,erkennung_skill:5}),i=async()=>{s.value=!0;try{const{data:o,error:a}=await B.auth.signUp({email:r.email,password:r.password});if(a)throw a;if(o.user){const l=r.username.trim()!==""?r.username:r.email.split("@")[0],{error:c}=await B.from("spielerprofile").insert({user_id:o.user.id,username:l,alter:r.alter,geschlecht:r.geschlecht,internet_affinitaet:r.internet_affinitaet,erkennung_skill:r.erkennung_skill});if(c)throw c;e.push("/explain")}}catch(o){n.value=o.message}finally{s.value=!1}};return(o,a)=>(b(),I("div",Xv,[p("div",em,[a[26]||(a[26]=p("h1",null,"Registrierung & Profil",-1)),p("form",{onSubmit:Qt(i,["prevent"]),class:"form-container"},[n.value?(b(),I("div",tm,R(n.value),1)):M("",!0),a[24]||(a[24]=p("div",{class:"section-divider"},"Account Daten",-1)),p("div",sm,[a[9]||(a[9]=p("label",{for:"username"},"Username (Optional):",-1)),lt(p("input",{type:"text",id:"username",class:"brutal-input","onUpdate:modelValue":a[0]||(a[0]=l=>r.username=l),placeholder:"Leer lassen fr E-Mail-Prefix"},null,512),[[is,r.username]])]),p("div",nm,[a[10]||(a[10]=p("label",{for:"email"},"E-Mail Adresse:",-1)),lt(p("input",{type:"email",id:"email",class:"brutal-input","onUpdate:modelValue":a[1]||(a[1]=l=>r.email=l),placeholder:"name@beispiel.de"},null,512),[[is,r.email]])]),p("div",rm,[a[11]||(a[11]=p("label",{for:"password"},"Passwort:",-1)),lt(p("input",{type:"password",id:"password",class:"brutal-input","onUpdate:modelValue":a[2]||(a[2]=l=>r.password=l),placeholder:"******",minlength:"6",required:""},null,512),[[is,r.password]])]),a[25]||(a[25]=p("div",{class:"section-divider"},"ber Dich",-1)),p("div",im,[a[12]||(a[12]=p("label",{for:"alter"},"Dein Alter:",-1)),lt(p("input",{type:"number",id:"alter",class:"brutal-input","onUpdate:modelValue":a[3]||(a[3]=l=>r.alter=l),min:"10",max:"100",placeholder:"z.B. 25",required:""},null,512),[[is,r.alter,void 0,{number:!0}]])]),p("div",om,[a[19]||(a[19]=p("label",null,"Dein Geschlecht:",-1)),p("div",am,[p("label",lm,[lt(p("input",{type:"radio",value:"female","onUpdate:modelValue":a[4]||(a[4]=l=>r.geschlecht=l),required:""},null,512),[[cr,r.geschlecht]]),a[13]||(a[13]=p("span",{class:"checkmark"},null,-1)),a[14]||(a[14]=we(" Weiblich ",-1))]),p("label",cm,[lt(p("input",{type:"radio",value:"male","onUpdate:modelValue":a[5]||(a[5]=l=>r.geschlecht=l)},null,512),[[cr,r.geschlecht]]),a[15]||(a[15]=p("span",{class:"checkmark"},null,-1)),a[16]||(a[16]=we(" Mnnlich ",-1))]),p("label",um,[lt(p("input",{type:"radio",value:"divers","onUpdate:modelValue":a[6]||(a[6]=l=>r.geschlecht=l)},null,512),[[cr,r.geschlecht]]),a[17]||(a[17]=p("span",{class:"checkmark"},null,-1)),a[18]||(a[18]=we(" Divers/Andere ",-1))])])]),p("div",dm,[p("div",hm,[a[20]||(a[20]=p("label",{for:"internet_affinitaet"},"Internet-Affinitt",-1)),p("span",fm,R(r.internet_affinitaet)+" / 10",1)]),lt(p("input",{type:"range",id:"internet_affinitaet","onUpdate:modelValue":a[7]||(a[7]=l=>r.internet_affinitaet=l),min:"0",max:"10",step:"1"},null,512),[[is,r.internet_affinitaet,void 0,{number:!0}]]),a[21]||(a[21]=p("div",{class:"slider-labels"},[p("span",null,"1 (Niedrig)"),p("span",null,"10 (Hoch)")],-1))]),p("div",pm,[p("div",gm,[a[22]||(a[22]=p("label",{for:"erkennung_skill"},"KI-Bilder erkennen",-1)),p("span",vm,R(r.erkennung_skill)+" / 10",1)]),lt(p("input",{type:"range",id:"erkennung_skill","onUpdate:modelValue":a[8]||(a[8]=l=>r.erkennung_skill=l),min:"0",max:"10",step:"1"},null,512),[[is,r.erkennung_skill,void 0,{number:!0}]]),a[23]||(a[23]=p("div",{class:"slider-labels"},[p("span",null,"0 (Schlecht)"),p("span",null,"10 (Perfekt)")],-1))]),p("button",{type:"submit",class:"primary-btn",disabled:s.value},R(s.value?"Ldt...":"Registrieren & Starten"),9,mm)],32)])]))}},ym=xe(_m,[["__scopeId","data-v-e4d819f2"]]),bm={},wm={class:"content-wrapper"},km={class:"welcomeCard"};function Sm(t,e){const s=Cs("router-link");return b(),I("div",wm,[p("div",km,[e[1]||(e[1]=p("h1",null,"ber Detectino",-1)),e[2]||(e[2]=p("p",null,"Dedectino ist ein Serios game welches dir das erkennen von Ki-generierten Bildern didaktisch beibringen soll. Entwickelt wurde das Spiel im Rahmen einer Bachelorarbeit von Nemo Ziener. Alle gesammelten Daten werden ausschliesslich anonym weiterverarbeitet.",-1)),e[3]||(e[3]=p("p",null,"This app uses the Unsplash API but is not endorsed or certified by Unsplash",-1)),ve(s,{to:"/",class:"register-btn"},{default:Be(()=>[...e[0]||(e[0]=[we(" Los gehts ",-1)])]),_:1})])])}const Em=xe(bm,[["render",Sm]]),Im={class:"content-wrapper"},Tm={class:"explain-card"},xm={__name:"Explain",setup(t){return Xe(),(e,s)=>{const n=Cs("router-link");return b(),I("div",Im,[p("div",Tm,[s[1]||(s[1]=lh('<h1 data-v-29217184>Wie es funktioniert</h1><div class="step-container" data-v-29217184><div class="step" data-v-29217184><span class="step-number" data-v-29217184>1</span><p data-v-29217184>Du bekommst gleich verschiedene Bilder angezeigt.</p></div><div class="step" data-v-29217184><span class="step-number" data-v-29217184>2</span><p data-v-29217184>Deine Aufgabe ist es zu entscheiden: <strong data-v-29217184>Echt oder KI?</strong></p></div><div class="step" data-v-29217184><span class="step-number" data-v-29217184>3</span><p data-v-29217184>Nutze den Schieberegler, um deine Sicherheit anzugeben.</p></div></div><div class="info-box" data-v-29217184><span class="icon" data-v-29217184></span><p data-v-29217184>Die Daten werden anonym fr ein Forschungsprojekt gesammelt.</p></div>',3)),ve(n,{to:"/levels",class:"primary-btn"},{default:Be(()=>[...s[0]||(s[0]=[we(" Los geht's ",-1)])]),_:1})])])}}},Am=xe(xm,[["__scopeId","data-v-29217184"]]),Om={class:"content-wrapper"},Cm={class:"login-card"},Rm={key:0,class:"error-box"},$m={class:"form-group"},Pm={class:"form-group"},jm=["disabled"],Nm={class:"footer-link"},Lm={__name:"Login",setup(t){const e=Xe(),s=O(""),n=O(""),r=O(!1),i=O(""),o=async()=>{r.value=!0,i.value="";try{const{error:a}=await B.auth.signInWithPassword({email:s.value,password:n.value});if(a)throw a;e.push("/explain")}catch(a){a.message.includes("Invalid login credentials")?i.value="Falsche E-Mail oder Passwort.":i.value=a.message}finally{r.value=!1}};return(a,l)=>{const c=Cs("router-link");return b(),I("div",Om,[p("div",Cm,[l[6]||(l[6]=p("h1",null,"Login",-1)),p("form",{onSubmit:Qt(o,["prevent"]),class:"form-container"},[i.value?(b(),I("div",Rm,R(i.value),1)):M("",!0),p("div",$m,[l[2]||(l[2]=p("label",{for:"email"},"E-Mail Adresse:",-1)),lt(p("input",{type:"email",id:"email",class:"brutal-input","onUpdate:modelValue":l[0]||(l[0]=u=>s.value=u),placeholder:"name@beispiel.de",required:""},null,512),[[is,s.value]])]),p("div",Pm,[l[3]||(l[3]=p("label",{for:"password"},"Passwort:",-1)),lt(p("input",{type:"password",id:"password",class:"brutal-input","onUpdate:modelValue":l[1]||(l[1]=u=>n.value=u),placeholder:"******",required:""},null,512),[[is,n.value]])]),p("button",{type:"submit",class:"primary-btn",disabled:r.value},R(r.value?"Laden...":"Einloggen"),9,jm),p("div",Nm,[l[5]||(l[5]=we(" Noch kein Konto? ",-1)),ve(c,{to:"/register"},{default:Be(()=>[...l[4]||(l[4]=[we("Hier registrieren",-1)])]),_:1})])],32)])])}}},Dm=xe(Lm,[["__scopeId","data-v-f85d266c"]]),Um={class:"content-wrapper"},Bm={class:"neo-card profile-card"},Mm={key:0,class:"loading-state"},Fm={key:1,class:"profile-inner"},qm={class:"user-header"},Hm={class:"user-meta"},Vm={class:"user-name-title"},Km={class:"email-info"},Wm={key:0,class:"stats-row"},zm={class:"stat-box"},Gm={class:"s-val"},Jm={class:"stat-box"},Zm={class:"s-val"},Qm={class:"stat-box dark"},Ym={class:"s-val"},Xm={class:"profile-actions"},e_={__name:"Profile",setup(t){const e=Xe(),s=O(!0),n=O(null),r=O(""),i=Ne(()=>n.value?.username?n.value.username:r.value?r.value.split("@")[0]:"Detektiv");Ce(async()=>{const{data:{user:a}}=await B.auth.getUser();if(!a){e.push("/login");return}r.value=a.email;const{data:l}=await B.from("spielerprofile").select("*").eq("user_id",a.id).maybeSingle();l&&(n.value=l),s.value=!1});const o=async()=>{await B.auth.signOut(),e.push("/")};return(a,l)=>{const c=Cs("router-link");return b(),I("div",Um,[p("div",Bm,[l[6]||(l[6]=p("h1",{class:"neo-title"},"Dein Profil",-1)),s.value?(b(),I("div",Mm,"Lade Daten...")):(b(),I("div",Fm,[p("div",qm,[p("div",Hm,[l[0]||(l[0]=p("span",{class:"meta-label"},"Angemeldet als",-1)),p("div",Vm,R(i.value),1)])]),p("div",Km,[l[1]||(l[1]=p("span",{class:"label"},"E-Mail:",-1)),we(" "+R(r.value),1)]),n.value?(b(),I("div",Wm,[p("div",zm,[l[2]||(l[2]=p("span",{class:"s-label"},"Alter",-1)),p("span",Gm,R(n.value.alter),1)]),p("div",Jm,[l[3]||(l[3]=p("span",{class:"s-label"},"Internet",-1)),p("span",Zm,R(n.value.internet_affinitaet),1)]),p("div",Qm,[l[4]||(l[4]=p("span",{class:"s-label"},"Skill",-1)),p("span",Ym,R(n.value.erkennung_skill)+"%",1)])])):M("",!0),p("div",Xm,[ve(c,{to:"/stats",class:"neo-btn stats-action-btn"},{default:Be(()=>[...l[5]||(l[5]=[we("  Statistiken einsehen ",-1)])]),_:1}),p("button",{onClick:o,class:"neo-btn logout-action-btn"}," Abmelden ")])]))])])}}},t_=xe(e_,[["__scopeId","data-v-b30d705b"]]),s_={class:"content-wrapper"},n_={class:"roadmap-card"},r_={key:0},i_={key:1,class:"timeline"},o_=["onClick"],a_={class:"circle"},l_={key:0},c_={key:1},u_={key:2},d_={class:"level-title"},h_={__name:"Levels",setup(t){const e=Xe(),s=O(!0),n=O([]),r=[{id:1,title:"Quiz",route:"/test-user-level"},{id:2,title:"Level 2",route:"/level1"},{id:3,title:"Level 3",route:"/level2"},{id:4,title:"Level 4",route:"/level3"},{id:5,title:"Level 5",route:"/level4"},{id:6,title:"Level 6",route:"/level5"},{id:7,title:"Quiz",route:"/etappen-quiz"},{id:8,title:"Level 8",route:"/level8"},{id:9,title:"Finales Quiz",route:"/level9"}];Ce(async()=>{const{data:{user:a}}=await B.auth.getUser();if(!a)return e.push("/login");const{data:l}=await B.from("level_fortschritt").select("level_id").eq("user_id",a.id);l&&(n.value=l.map(c=>Number(c.level_id)),console.log("Deine fertigen Levels:",n.value)),s.value=!1});const i=(a,l)=>{const c=Number(a);c===1||n.value.includes(c-1)?e.push(l):console.log("Level ist noch gesperrt!")},o=a=>{const l=Number(a);return n.value.includes(l)?"completed":l===1||n.value.includes(l-1)?"active":"locked"};return(a,l)=>(b(),I("div",s_,[p("div",n_,[l[1]||(l[1]=p("h1",null,"Deine Reise",-1)),s.value?(b(),I("div",r_,"Lade Map...")):(b(),I("div",i_,[(b(),I(de,null,We(r,c=>p("div",{key:c.id,class:Ae(["level-node",o(c.id)]),onClick:u=>i(c.id,c.route)},[p("div",a_,[n.value.includes(Number(c.id))?(b(),I("span",l_,"")):o(c.id)==="locked"?(b(),I("span",c_,"")):(b(),I("span",u_,R(c.id),1))]),p("span",d_,R(c.title),1)],10,o_)),64)),l[0]||(l[0]=p("div",{class:"line"},null,-1))]))])]))}},f_=xe(h_,[["__scopeId","data-v-70fb2ddd"]]),p_={class:"level-container"},g_={class:"neo-card",style:{"margin-top":"2rem"}},v_={class:"stats-grid"},m_={class:"stat-box"},__={class:"value"},y_={class:"stat-box"},b_={class:"value text-success"},w_={class:"neo-title level-header"},k_={class:"steps-grid"},S_={class:"step-info"},E_={class:"step-number"},I_={class:"image-hint"},T_={class:"comparison-bar"},x_={class:"step-stats-text"},A_={class:"text-success"},O_={class:"text-fail"},C_={__name:"Dashboard",setup(t){const e=O([]);Ce(async()=>{const{data:i,error:o}=await B.from("spiel_aktivitaeten").select("level_id, step_id, is_correct, image_name");i&&(e.value=i)});const s=Ne(()=>e.value.length),n=Ne(()=>{if(e.value.length===0)return 0;const i=e.value.filter(o=>o.is_correct).length;return Math.round(i/e.value.length*100)}),r=Ne(()=>{const i={};e.value.forEach(a=>{i[a.level_id]||(i[a.level_id]={}),i[a.level_id][a.step_id]||(i[a.level_id][a.step_id]={level_id:a.level_id,step_id:a.step_id,image_name:a.image_name,correct:0,wrong:0}),a.is_correct?i[a.level_id][a.step_id].correct++:i[a.level_id][a.step_id].wrong++});const o={};return Object.keys(i).forEach(a=>{const l=Object.values(i[a]).sort((c,u)=>c.step_id-u.step_id);o[a]=l.map(c=>{const u=c.correct+c.wrong;return{...c,percentCorrect:u>0?Math.round(c.correct/u*100):0,percentWrong:u>0?Math.round(c.wrong/u*100):0}})}),o});return(i,o)=>(b(),I("div",p_,[p("div",g_,[o[2]||(o[2]=p("h1",{class:"neo-title"},"Wissenschaftliche Auswertung",-1)),o[3]||(o[3]=p("p",null,"Detaillierte Analyse der Erkennungsrate pro Level und Schritt.",-1)),p("div",v_,[p("div",m_,[o[0]||(o[0]=p("span",{class:"label"},"Gesamt-Antworten: ",-1)),p("span",__,R(s.value),1)]),p("div",y_,[o[1]||(o[1]=p("span",{class:"label"},"Durchschn. Erkennungsquote: ",-1)),p("span",b_,R(n.value)+"%",1)])]),(b(!0),I(de,null,We(r.value,(a,l)=>(b(),I("div",{key:l,class:"level-analysis-section"},[p("h2",w_,"Level "+R(l),1),p("div",k_,[(b(!0),I(de,null,We(a,c=>(b(),I("div",{key:c.step_id,class:"step-card"},[p("div",S_,[p("span",E_,"Schritt "+R(c.step_id),1),p("span",I_,R(c.image_name),1)]),p("div",T_,[p("div",{class:"bar-part correct",style:Ge({width:c.percentCorrect+"%"})},R(c.correct),5),p("div",{class:"bar-part wrong",style:Ge({width:c.percentWrong+"%"})},R(c.wrong),5)]),p("div",x_,[p("span",A_,"Richtig: "+R(c.percentCorrect)+"%",1),p("span",O_,"Falsch: "+R(c.percentWrong)+"%",1)])]))),128))])]))),128))])]))}},R_=xe(C_,[["__scopeId","data-v-acc14dbc"]]),$_={class:"level-container"},P_={class:"neo-card",style:{"margin-top":"2rem"}},j_={class:"leaderboard-table"},N_={class:"rank"},L_={class:"user-id"},D_={class:"score"},U_={__name:"Leaderboard",setup(t){const e=O([]);return Ce(async()=>{const{data:{user:s}}=await B.auth.getUser(),{data:n}=await B.from("level_fortschritt").select(`
      score,
      user_id,
      spielerprofile:user_id ( username )
    `);if(n){const r=n.reduce((i,o)=>{const a=o.user_id,l=o.spielerprofile?.username||"Unbekannt";return i[a]||(i[a]={name:l,totalScore:0,isMe:s?.id===a}),i[a].totalScore+=o.score,i},{});e.value=Object.values(r).sort((i,o)=>o.totalScore-i.totalScore).slice(0,10)}}),(s,n)=>(b(),I("div",$_,[p("div",P_,[n[1]||(n[1]=p("h1",{class:"neo-title"},"Top Detectives",-1)),p("div",j_,[n[0]||(n[0]=p("div",{class:"leader-row header"},[p("span",null,"Rang"),p("span",null,"User"),p("span",null,"Gesamt-Score")],-1)),(b(!0),I(de,null,We(e.value,(r,i)=>(b(),I("div",{key:i,class:Ae(["leader-row",{"is-me":r.isMe}])},[p("span",N_,"#"+R(i+1),1),p("span",L_,R(r.userId.substring(0,8))+"...",1),p("span",D_,R(r.totalScore)+" Pkt.",1)],2))),128))])])]))}},B_=xe(U_,[["__scopeId","data-v-49c21a44"]]),Wa={generic:{loading:"Lade Level Inhalte...",next:"Weiter",verify:"Auflsen",finish:"Level Beenden",understood:"Verstanden"},level1:{step0:{question:"Welches Bild ist KI?",success:"Korrekt! Das ist das KI-Bild."},step1:{title:"Analyse: Mastab, Skalierung & Konsistenz",text:"Hier sehen wir ein typisches Beispiel fr inkonsistente Hintergrnde. Der Mann wirkt echt, aber der Mastab des Labyrinths passt nicht zu seiner Gre. Zudem zeigt der Bereich hinter dem Labyrinth pltzlich eine vllig andere Landschaftsskalierung."},step2:{question:"Sind diese Bilder KI-generiert?",options:{none:"Beide sind echt",both:"Beide sind fake",left:"Nr.1",right:"Nr.2"},feedback:{success:"Perfekt! Beide sind KI-generiert.",fail:"Nicht ganz richtig. Tatschlich sind beide Bilder KI-generiert."}},step3:{title:"Fehleranalyse: Geteilter Hintergrund",text:"Das war knapp! Achte hier auf den Hintergrund: Er wird durch das Objekt im Zentrum (die Person) quasi 'zwei-geteilt'. Links ist der Wald total verwischt, rechts sieht die Struktur ganz anders aus. Ein klassischer KI-Fehler."},step4:{title:"Fehleranalyse: Texturen",text:"Schau dir die Mauer genau an. Sie ist viel zu unscharf dafr, wie nah der Mann an ihr lehnt. Diese Unschrfe sieht nicht wie ein echter 'Bokeh-Effekt' (Tiefenschrfe) einer Kamera aus, sondern einfach matschig und verwischt."},step5:{question:"Bei welchem Bild weist der Hintergrund auf KI-Generierung hin?",success:"Richtig! Der Mann trennt den Hintergrund: Links eine Htte, rechts pltzlich Wald. Das passt nicht zusammen."},step6:{title:"Was fllt dir am Hintergrund auf?",subtitle:"Whle alle passenden Begriffe aus.",terms:{blurred:"Verwischte Texturen",inconsistent:"Inkonsistente Merkmale",unrealistic:"Unrealistische Darstellung",lighting:"Komisches Licht/Schatten"},feedback:"Die Lsung ist: Alles trifft zu! Diese Fehlerarten berschneiden sich oft."},step7:{title:"Level Abschluss",text:"Du hast gelernt, auf den Hintergrund zu achten: Suche nach verwischten Texturen, inkonsistenten Objekten links/rechts und unlogischen Schatten. Diese Fehler verraten die KI oft, auch wenn das Gesicht perfekt aussieht."}},level2:{step0:{question:"Welches Bild ist KI?",success:"Richtig!"},step1:{question:"Was deutet hier am strksten auf KI hin?",options:{skin:"Hauttextur",nose:"Nase",eyes:"Augen",hair:"Haare"},feedback:"Genau! Bei KI-generierten Bildern wirkt Haut oft zu glatt oder 'plastikartig'."},step2:{title:"Analyse: Die Haut",text:"Echte Haut ist matt und pors. KI-Modelle stellen Haut oft zu glatt, zu stark glnzend oder unnatrlich gleichmig dar. Dies ist oft ein besseres Warnsignal als offensichtliche Fehler."},step3:{question:"Welche Bilder wirken KI-generiert? (Mehrfachauswahl)",success:"Sehr gut! Du erkennst den 'Plastik-Look'."},step4:{question:"Was fllt bei diesem Bild auf?",subtitle:"Whle alle zutreffenden Merkmale.",terms:{smooth:"Zu glatte Textur",wrinkles:"Unlogische Falten",eyes:"Blaue Augen",tattoos:"Tattoos"},feedback:"Richtig. Die Haut ist zu glatt fr das Alter, und die Falten verlaufen unlogisch."},step5:{title:"Vergleich: Falten",text:"Bild 1 (KI): Die Falten wirken wie 'aufgemalt' oder verschwinden an unlogischen Stellen. Rechts (Echt): Falten folgen der Muskulatur und haben Tiefe."},step6:{title:"Level Abschluss",text:"Du hast gelernt, auf Hauttexturen zu achten. 'Wachsfiguren-Haut' und unlogische Falten sind starke Indikatoren fr KI-Bilder."}},level3:{step0:{question:"Welches Bild ist KI?",success:"Richtig! Das linke Bild ist KI."},step1:{question:"Warum wirkt dieses Bild unecht?",options:{colors:"Farben & Haut",bg:"Hintergrund",hat:"Kopfbedeckung",eyes:"Augenfarbe"},feedback:"Richtig. Die Farben sind vllig bersttigt, die Haut 'leuchtet' unnatrlich."},step2:{question:"Welche Aussage ist richtig?",options:{all:"Alle KI-Bilder sind bersttigt",indicator:"bersttigung ist ein Indikator fr KI",none:"bersttigung sagt nichts aus"},feedback:"Genau. Nicht alle, aber viele KI-Bilder haben Probleme mit zu intensiven Farben, besonders bei Hauttnen."},step3:{question:"Welches Bild hat einen Farbfehler?",success:"Korrekt! Trkise Haare bei einem Kleinkind sind extrem unwahrscheinlich."},step4:{title:"Kontextfehler",text:"Hufig haben KI-Bilder Farbfehler, die erst im Kontext auffallen. Ein Kind mit perfekt gefrbten, trkisen Haaren ist in der Realitt sehr selten und daher ein Zeichen fr Generierung."},step5:{title:"Was fllt dir hier auf?",subtitle:"Whle alle passenden Merkmale.",terms:{skin:"bersttigte Haut",eyes:"Unrealistische Augen",makeup:"Starke Schminke",smooth:"Zu weiche Haut"},feedback:"Dieses Bild ist ein Paradebeispiel fr den 'Over-Processed' Look von KI und die verflschten Farben welche so in der Realitt nicht vorkommen."},step6:{title:"Analyse:",text:"Rechts siehst du eine Karte. Dort sind die Fehlerbereiche nochmal markiert: Besonders im Gesicht sind die Farben und Texturen zu perfekt und weich."},step7:{question:"Ordne die Fehler zu!",terms:{hair:"Unrealistische Haare",sat:"bersttigung",smooth:"Plastik-Haut"},success:"Perfekt zugeordnet! Du entwickelst einen Blick fr die Details."},step8:{title:"Level Abschluss",text:"Farben sind ein starkes Indiz. Achte auf 'leuchtende' Haut, unlogische Haarfarben im Kontext und den allgemeinen 'Instagram-Filter-Look', den viele KI-Modelle standardmig erzeugen."}},level4:{step0:{question:"Was fllt dir hier auf?",options:{pose:"Unnatrliche Pose",nothing:"Nichts Aufflliges",expression:"Unnatrlicher Gesichtsausdruck",bg:"Falscher Hintergrund"},feedback:"Richtig. Der Ausdruck, besonders der Mundbereich, wirkt verzerrt."},step1:{title:"Analyse: Mimik & Zunge",text:"Ein hufiger Fehler von KI-Modellen sind Gesichtsausdrcke. Bei diesem Beispiel ist die ausgestreckte Zunge anatomisch auffllig. Solche 'Glitches' in der Mimik sind ein starkes Warnsignal."},step2:{question:"Welches Bild ist KI-generiert?",success:"Gut erkannt! Das linke Bild zeigt typische KI-Artefakte."},step3:{title:"Analyse: Details",text:"Wieder ein Aufflliger Gesichtsausdruck, ausserdem achte hier auf die Haare und die Lichtreflexionen. Die Haut wirkt zu glatt (wie wir in Level 2 gelernt haben) und die Faltenwurf der Kleidung sowie die Krperhaltung wirken steif und unlogisch."},step4:{question:"Welches Bild ist KI?",success:"Korrekt! Hier ist wieder ein Bild, das Fehler im Gesichtsausdruck aufweist."},step5:{title:"Level Abschluss",text:"Gesichter sind komplex. Achte auf leere Blicke, asymmetrische Augen, verschmelzende Zhne oder Zungen und Emotionen, die nicht ganz zum Rest des Gesichts passen."}},level5:{step0:{title:"Bildfehler & Logik",text:"Die sicherste Methode, KI-Bilder zu erkennen, ist die Suche nach physikalischen oder logischen Fehlern. KI 'versteht' die Welt nicht, sie rt nur Pixel. Das fhrt oft zu Fehlern, die in der Realitt unmglich wren."},step1:{question:"Welches Bild ist echt?",success:"Richtig! Das Bild ist der Fake."},step2:{title:"Analyse: Details",text:"Achte auf die Knpfe der Jacke (ungleichmig), die Haare (verschmelzen) und besonders die Lampe im Hintergrund, die physikalisch unmglich im Vordergrund hngt."},search_task:"Finde die Fehler! Merke sie dir und klicke auf 'Lsung'.",check_question:"Hast du die markierten Fehler gefunden?",options:{yes:"Ja, alle gefunden",partly:"Einige",no:"Nein, bersehen"},feedback:"bung macht den Meister. Achte auf Details im Hintergrund und an Rndern.",img11:"Achte auf Hintergrund und Kleidung.",img12:"Schau dir die Hnde und die Umgebung genau an.",img48:"Hier stimmt etwas mit der Architektur nicht.",img67:"Achte auf Spiegelungen oder Schatten.",asymmetry:{title:"Symmetrie-Fehler",text:"Ein Klassiker: Brillen, Schmuck oder Kleidung sind oft asymmetrisch. Hier (Bild 63) ist das Brillengestell links und rechts vllig unterschiedlich."},finish:{title:"Level Abschluss",text:"Du hast jetzt den Blick fr 'Glitches'. Wenn etwas physikalisch keinen Sinn ergibt (schwebende Lampen, halbe Brillen), ist es mit hoher Wahrscheinlichkeit KI."}},etappenQuiz:{intro:{title:"Zwischenprfung: Was kannst du schon?",text:"Du hast viel ber Hintergrnde, Haut, Farben und Anatomie gelernt. Jetzt wird es ernst: 10 Bilder. Keine Hilfestellung. Finde die Fakes."},round:"Runde",finish:{title:"Prfung beendet",text_perfect:"Wahnsinn! Du hast ein perfektes Auge entwickelt.",text_good:"Sehr gut! Du hast fast alle erkannt.",text_ok:"Nicht schlecht, aber achte noch mehr auf die Details.",score:"Dein Ergebnis:"}},level7:{step0:{title:"Moderne KIs & Kontext",text:"Moderne Modelle (wie das fiktive 'Gemini Banana Pro', released 26.11.2025) sind technisch fast perfekt. Haut, Licht und Schatten sind kaum noch von Fotos zu unterscheiden. Hier hilft nur noch: Der Kontext."},step1:{question:"Was ist an diesem Bild verdchtig?",options:{quality:"Schlechte Bildqualitt",scene:"Unwahrscheinliches Szenario",lighting:"Falsches Licht",filter:"Zu starker Filter"},feedback:"Richtig. Ein Selfie von Vin Diesel an einer heruntergekommenen Zapfsule mit einem Fremden? Hchst unwahrscheinlich. Der Kontext (Promi + Banalitt) ist der Verrter."},step2:{question:"Welches Bild ist manipulativ?",success:"Genau. Das Bild zielt nur auf eine starke emotionale Reaktion ab. Solche 'Clickbait'-Bilder sind oft generiert."},step3:{title:"Social Media Analyse",text:`Wenn das Bild perfekt aussieht, schau auf den Account! 
1. Wann wurde der Account erstellt? (Viele KI-Bots sind neu).
2. Postet er NUR Bilder? (Videos sind schwerer zu faken).
3. Passen Follower-Zahlen zu den Deals?`},feed:{task:"Finde die 2 Fake-Accounts!",instruction:"Scrolle durch den Feed. Klicke auf die Namen, um das Profil zu prfen. Markiere die Fake-Profile.",btn_check:"berprfen",success:"Super analysiert!",fail:"Nicht ganz. Schau auf das Datum der ersten Posts und die Bio.",analysis_influencer:"Die Influencerin 'Aisha' existiert erst seit Dezember 2025 (nach dem Release des neuen KI-Modells), postet nur Bilder, hat aber schon Brand Deals. Ein klassischer KI-Influencer.",analysis_news:"Der News-Account nutzt hoch-emotionale, generierte Bilder ohne Quellenangabe, um Wut oder Mitleid zu erzeugen."}}},nr=O("de"),za={de:Wa,en:Wa};function ft(){return{t:s=>{const n=s.split(".");let r=za[nr.value];for(const i of n)if(r&&r[i])r=r[i];else return s;return r},currentLang:nr,detectLanguage:()=>{const s=navigator.language.split("-")[0];za[s]?nr.value=s:nr.value="en"}}}const M_={class:"neo-header"},F_={class:"neo-title"},q_={key:0,style:{padding:"3rem","text-align":"center"}},H_={key:1},V_={style:{"text-align":"center","margin-bottom":"1rem"}},K_={class:"neo-pill white"},W_={class:"stack-container"},z_=["src"],G_={key:0,class:"neo-badge top-right"},J_={key:1,class:"neo-badge center wrong"},Z_={key:2,class:"neo-badge center correct"},Q_={class:"controls-area"},Y_=["disabled"],X_={key:1,class:"neo-feedback"},ey={key:0,class:"neo-info-box"},ty=["href"],sy={key:0},ny=["src"],ry={__name:"spotTheFake",props:{aiImage:[String,Object],realImages:Array,realCount:{type:Number,default:3},topic:{type:String,default:"portrait"},collectionId:{type:String,default:null},questionText:String,successText:String,timeLimit:{type:Number,default:20},levelId:{type:Number,default:1}},emits:["completed","mistake"],setup(t,{emit:e}){const s=t,n=e,{t:r}=ft(),{fetchRandomRealImages:i,triggerDownloadPing:o}=Rs(),{handleScoreAction:a}=et(),l=O([]),c=O(0),u=O(null),d=O(!1),f=O(""),h=O(!0),v=O([]),y=O(null),E=O(""),S=O(s.timeLimit),m=O(null),g=O(!1),k=()=>{A(),S.value=s.timeLimit,g.value=!1,m.value=setInterval(()=>{S.value>0?S.value--:U()},1e3)},A=()=>{m.value&&clearInterval(m.value)},U=()=>{A(),g.value=!0,a(!1,s.levelId),f.value="Zeit abgelaufen!"};Zt(()=>A());const z=async()=>{if(!s.aiImage)return;h.value=!0,v.value=[],u.value=null,d.value=!1,c.value=0,A();let ce=typeof s.aiImage=="string"?s.aiImage:s.aiImage.src,le=typeof s.aiImage=="object"&&s.aiImage.bucket||"Fake-Images";const{data:ue}=B.storage.from(le).getPublicUrl(ce),he={src:ue.publicUrl,type:"ai",bucket:le,status:"neutral",name:ce};let fe=[];s.realImages&&s.realImages.length>0?fe=s.realImages.map(Ue=>{let rt=typeof Ue=="string"?Ue:Ue.src,pt=typeof Ue=="object"?Ue.credit:null,Fe=typeof Ue=="object"&&Ue.bucket?Ue.bucket:"Real-Images";if(rt.startsWith("http"))return{src:rt,type:"real",bucket:"Unsplash",status:"neutral",credit:pt};const{data:Yt}=B.storage.from(Fe).getPublicUrl(rt);return{src:Yt.publicUrl,type:"real",bucket:Fe,status:"neutral",name:rt}}):fe=await i(s.realCount),l.value=[he,...fe].sort(()=>.5-Math.random()),h.value=!1,k()};Ce(z),Gs(()=>s.aiImage,z);const Y=()=>{E.value="slide-left",c.value=(c.value+1)%l.value.length},q=()=>{E.value="slide-right",c.value=(c.value-1+l.value.length)%l.value.length},Z=()=>{d.value||(u.value=u.value===c.value?null:c.value)},D=async()=>{if(u.value===null)return;A();const ce=l.value[u.value];if(await B.from("spiel_aktivitaeten").insert({level_id:s.levelId,image_name:ce.name||"unsplash_img",is_correct:ce.type==="ai"}),ce.type==="real")ce.status="wrong",a(!1,s.levelId),n("mistake"),u.value=null;else if(ce.type==="ai"){ce.status="correct",d.value=!0,a(!0,s.levelId);const le=r("generic.correct");f.value=s.successText||(le==="generic.correct"?"Richtig erkannt!":le),v.value=[],l.value.forEach(ue=>{ue.bucket==="Unsplash"&&ue.credit&&(o(ue.credit.downloadLocation),v.value.find(he=>he.name===ue.credit.name)||v.value.push(ue.credit))})}},j=ce=>{y.value=ce,history.pushState({modal:!0},"")},X=()=>{y.value&&history.back()};return(ce,le)=>(b(),I("div",{class:Ae(["neo-card relative-container",{"shake-anim":g.value}])},[p("div",M_,[p("h2",F_,R(t.questionText),1),p("div",{class:Ae(["neo-pill",{critical:S.value<=5}])}," "+R(S.value)+"s",3)]),h.value?(b(),I("div",q_,"Lade Bilder...")):(b(),I("div",H_,[p("div",V_,[p("span",K_,"Bild "+R(c.value+1)+" / "+R(l.value.length),1)]),p("div",W_,[ve(Ys,{name:E.value,mode:"out-in"},{default:Be(()=>[(b(),I("div",{key:c.value,class:Ae(["stack-card",{"is-selected":u.value===c.value,"is-wrong":l.value[c.value].status==="wrong","is-correct":l.value[c.value].status==="correct"}]),onClick:le[0]||(le[0]=ue=>j(l.value[c.value].src))},[p("img",{src:l.value[c.value].src,draggable:"false"},null,8,z_),u.value===c.value?(b(),I("div",G_,"GEWHLT")):M("",!0),l.value[c.value].status==="wrong"?(b(),I("div",J_,"ECHT")):M("",!0),l.value[c.value].status==="correct"?(b(),I("div",Z_,"KI")):M("",!0)],2))]),_:1},8,["name"])]),p("div",Q_,[p("div",{class:"nav-row"},[p("button",{class:"stack-nav-btn",onClick:q},""),p("button",{class:"stack-nav-btn",onClick:Y},"")]),d.value?M("",!0):(b(),I("button",{key:0,class:Ae(["neo-btn-toggle",{active:u.value===c.value}]),onClick:Z},R(u.value===c.value?"Abwhlen":"Dieses Bild whlen"),3))]),d.value?M("",!0):(b(),I("button",{key:0,class:"neo-btn",style:{"margin-top":"1rem"},disabled:u.value===null,onClick:D}," Prfen ",8,Y_)),d.value?(b(),I("div",X_,[p("p",null,R(f.value),1),v.value.length>0?(b(),I("div",ey,[p("small",null,[le[3]||(le[3]=we("Fotos von ",-1)),(b(!0),I(de,null,We(v.value,(ue,he)=>(b(),I("span",{key:ue.name},[p("a",{href:ue.link+"?utm_source=Detectino&utm_medium=referral",target:"_blank"},R(ue.name),9,ty),he<v.value.length-1?(b(),I("span",sy,", ")):M("",!0)]))),128)),le[4]||(le[4]=we(" auf Unsplash",-1))])])):M("",!0),p("button",{class:"neo-btn",onClick:le[1]||(le[1]=ue=>ce.$emit("completed"))},"Weiter")])):M("",!0)])),y.value?(b(),I("div",{key:2,class:"zoom-overlay",onClick:X},[le[5]||(le[5]=p("button",{class:"zoom-close-btn"},"",-1)),p("img",{src:y.value,class:"zoom-content",onClick:le[2]||(le[2]=Qt(()=>{},["stop"]))},null,8,ny)])):M("",!0)],2))}},xt=xe(ry,[["__scopeId","data-v-bacb529c"]]),iy={class:"neo-card"},oy={class:"neo-title"},ay={key:0,class:"images-container"},ly=["src"],cy={class:"text-content"},uy={__name:"analysis",props:["image","title","text","buttonText"],emits:["next"],setup(t,{emit:e}){const s=t,n=Ne(()=>s.image?(Array.isArray(s.image)?s.image:[s.image]).map(i=>{if(!i)return null;let o="",a="Fake-Images";if(typeof i=="string"?o=i:(o=i.src,i.bucket&&(a=i.bucket)),o.startsWith("http")||o.startsWith("blob:"))return o;const{data:l}=B.storage.from(a).getPublicUrl(o);return l.publicUrl}).filter(i=>i!==null):[]);return(r,i)=>(b(),I("div",iy,[p("h2",oy,R(t.title),1),n.value.length>0?(b(),I("div",ay,[(b(!0),I(de,null,We(n.value,(o,a)=>(b(),I("img",{key:a,src:o,alt:"Analyse Bild"},null,8,ly))),128))])):M("",!0),p("div",cy,[p("p",null,R(t.text),1)]),p("button",{class:"neo-btn",onClick:i[0]||(i[0]=o=>r.$emit("next"))},R(t.buttonText||"Weiter"),1)]))}},$e=xe(uy,[["__scopeId","data-v-c7ff3b09"]]),dy={class:"content-wrapper"},hy={key:0,class:"loading-screen"},fy={key:1,class:"level-container"},py={key:1},gy={class:"level-progress-bar"},vy={class:"progress-track"},my={key:2,class:"neo-card result-card",style:{"text-align":"center"}},_y={class:"score-display"},yy={__name:"Quiz-1",setup(t){const e=Xe(),{fetchRandomRealImages:s}=Rs(),{markLevelAsCompleted:n}=et(),r=O(!0),i=O(!1),o=O(!1),a=O(0),l=O(0),c=O([]),u=O(!1),d=O(""),f=Array.from({length:100},(g,k)=>({name:`Image_${String(k+1).padStart(4,"0")}.jpg`,bucket:"Fake-Images-Quiz",source:"standard"})),h=[{name:"Image_0001.png",bucket:"Nanobanana-Images",source:"nanobanana"},{name:"Image_0004.png",bucket:"Nanobanana-Images",source:"nanobanana"},{name:"Image_0005.png",bucket:"Nanobanana-Images",source:"nanobanana"},{name:"Image_0010.png",bucket:"Nanobanana-Images",source:"nanobanana"},{name:"Image_0011.png",bucket:"Nanobanana-Images",source:"nanobanana"}],v=g=>[...g].sort(()=>Math.random()-.5),y=async(g,k)=>{const{data:{user:A}}=await B.auth.getUser();A&&await B.from("spiel_aktivitaeten").insert({user_id:A.id,level_id:1,step_id:a.value,task_type:k.source==="nanobanana"?"spot_fake_nanobanana":"spot_fake_standard",image_name:k.name,is_correct:g,interaction_type:`User: ${d.value}`})},E=g=>Promise.all(g.map(k=>new Promise(A=>{const U=new Image;U.src=k,U.onload=A,U.onerror=A})));Ce(async()=>{const{data:{user:g}}=await B.auth.getUser();if(!g)return e.push("/login");const{data:k}=await B.from("spielerprofile").select("username").eq("user_id",g.id).maybeSingle();d.value=k?.username||g.email.split("@")[0],r.value=!0;const A=v(f).slice(0,5),U=v([...A,...h]),z=await s(30,"portrait","gjZvv_WF6VQ");if(c.value=U.map((Y,q)=>({...Y,realImagesList:z.slice(q*3,q*3+3)})),c.value[0]){const Y=[...c.value[0].realImagesList.map(q=>q.src),B.storage.from(c.value[0].bucket).getPublicUrl(c.value[0].name).data.publicUrl];await E(Y)}r.value=!1});const S=()=>{const g=c.value[a.value];if(y(!u.value,g),u.value||l.value++,u.value=!1,a.value<c.value.length-1){a.value++;const k=c.value[a.value],A=[...k.realImagesList.map(U=>U.src),B.storage.from(k.bucket).getPublicUrl(k.name).data.publicUrl];E(A)}else o.value=!0,m()},m=async()=>{const{data:{user:g}}=await B.auth.getUser();g&&(await B.from("level_fortschritt").upsert({user_id:g.id,level_id:1,score:l.value},{onConflict:"user_id,level_id"}),n(1))};return(g,k)=>(b(),I("div",dy,[r.value?(b(),I("div",hy,[...k[3]||(k[3]=[p("div",{class:"loader-spinner"},null,-1),p("p",null,"Bilder werden synchronisiert...",-1)])])):(b(),I("div",fy,[!i.value&&!o.value?(b(),se($e,{key:0,title:"Das Einstiegs-Quiz",text:"Finde das KI-Bild. In diesem Test mischen wir klassische KI-Bilder mit hochmodernen Generierungen.",buttonText:"Starten",onNext:k[0]||(k[0]=A=>i.value=!0)})):M("",!0),i.value&&!o.value&&c.value[a.value]?(b(),I("div",py,[p("div",gy,[p("span",null,"Runde "+R(a.value+1)+" / 10",1),p("div",vy,[p("div",{class:"progress-fill",style:Ge({width:(a.value+1)/10*100+"%"})},null,4)])]),(b(),se(xt,{key:a.value,aiImage:{src:c.value[a.value].name,bucket:c.value[a.value].bucket},realImages:c.value[a.value].realImagesList,levelId:1,onCompleted:S,onMistake:k[1]||(k[1]=A=>u.value=!0)},null,8,["aiImage","realImages"]))])):M("",!0),o.value?(b(),I("div",my,[k[4]||(k[4]=p("h2",{class:"neo-title"},"Auswertung abgeschlossen",-1)),p("div",_y,R(l.value)+" / 10",1),k[5]||(k[5]=p("p",null,"Deine Daten wurden fr die wissenschaftliche Analyse gespeichert.",-1)),p("button",{class:"neo-btn",onClick:k[2]||(k[2]=A=>x(e).push("/levels"))},"Zurck zur Map")])):M("",!0)]))]))}},by=xe(yy,[["__scopeId","data-v-8a154d32"]]),wy={class:"neo-card"},ky={class:"neo-title"},Sy={class:"neo-grid-2"},Ey=["src"],Iy=["src"],Ty={class:"neo-options-list"},xy=["value","disabled"],Ay=["disabled"],Oy={key:1,class:"neo-feedback"},Cy=["src"],Ry={__name:"multiCheck",props:{imageLeft:String,imageRight:String,correctOption:String,questionText:String,levelId:{type:Number,default:1}},emits:["completed"],setup(t,{emit:e}){const s=t,n=e,{t:r}=ft(),{handleScoreAction:i}=et(),o=O(""),a=O(""),l=O(null),c=O(!1),u=O(null),d=[{id:"none",label:r("level1.step2.options.none")},{id:"both",label:r("level1.step2.options.both")},{id:"left",label:r("level1.step2.options.left")},{id:"right",label:r("level1.step2.options.right")}];Ce(()=>{s.imageLeft&&(o.value=B.storage.from("Fake-Images").getPublicUrl(s.imageLeft).data.publicUrl),s.imageRight&&(a.value=B.storage.from("Fake-Images").getPublicUrl(s.imageRight).data.publicUrl)});const f=()=>{u.value=null};window.addEventListener("popstate",f),Zt(()=>window.removeEventListener("popstate",f));const h=S=>{u.value=S,history.pushState({modal:!0},"")},v=()=>{u.value&&history.back()},y=()=>{c.value=!0;const S=l.value===s.correctOption;i(S,s.levelId)},E=()=>{let S={image71Correct:!1,image21Correct:!1};l.value==="both"?(S.image71Correct=!0,S.image21Correct=!0):l.value==="left"?S.image71Correct=!0:l.value==="right"&&(S.image21Correct=!0),n("completed",S)};return(S,m)=>(b(),I("div",wy,[p("h2",ky,R(t.questionText||x(r)("level1.step2.question")),1),p("div",Sy,[p("div",{class:"neo-img-wrap",onClick:m[0]||(m[0]=g=>h(o.value))},[p("img",{src:o.value},null,8,Ey),m[4]||(m[4]=p("div",{class:"zoom-icon"},"",-1))]),p("div",{class:"neo-img-wrap",onClick:m[1]||(m[1]=g=>h(a.value))},[p("img",{src:a.value},null,8,Iy),m[5]||(m[5]=p("div",{class:"zoom-icon"},"",-1))])]),p("div",Ty,[(b(),I(de,null,We(d,g=>p("label",{key:g.id,class:Ae(["neo-option",{selected:l.value===g.id}])},[lt(p("input",{type:"radio",value:g.id,"onUpdate:modelValue":m[2]||(m[2]=k=>l.value=k),disabled:c.value},null,8,xy),[[cr,l.value]]),we(" "+R(g.label),1)],2)),64))]),c.value?M("",!0):(b(),I("button",{key:0,class:"neo-btn",onClick:y,disabled:!l.value},R(x(r)("generic.verify")),9,Ay)),c.value?(b(),I("div",Oy,[p("p",{class:Ae(l.value===s.correctOption?"text-success":"text-fail")},R(l.value===s.correctOption?x(r)("level1.step2.feedback.success"):x(r)("level1.step2.feedback.fail")),3),p("button",{class:"neo-btn",onClick:E},R(x(r)("generic.next")),1)])):M("",!0),u.value?(b(),I("div",{key:2,class:"zoom-overlay",onClick:v},[m[6]||(m[6]=p("button",{class:"zoom-close-btn"},"",-1)),p("img",{src:u.value,class:"zoom-content",onClick:m[3]||(m[3]=Qt(()=>{},["stop"]))},null,8,Cy)])):M("",!0)]))}},$y=xe(Ry,[["__scopeId","data-v-95462f97"]]),Py={class:"neo-card"},jy={class:"neo-title"},Ny={class:"subtitle"},Ly={key:0,class:"stack-counter"},Dy=["src"],Uy={key:1,style:{padding:"20px","text-align":"center"}},By={class:"terms-grid"},My=["onClick"],Fy={key:0},qy={key:2,class:"neo-feedback"},Hy=["src"],Vy={__name:"conceptTagging",props:{images:Array,bucket:{type:String,default:"Fake-Images"},terms:Array,correctIds:Array,question:String,subtitle:String,feedbackText:String,levelId:{type:Number,default:1}},emits:["completed"],setup(t,{emit:e}){const s=t,{t:n}=ft(),{handleScoreAction:r}=et(),i=O([]),o=O(!1),a=O(null),l=O(0),c=O(""),u=Ne(()=>s.images?s.images.map(D=>{let j="",X=s.bucket;if(typeof D=="string"?j=D:D&&typeof D=="object"&&(j=D.src,D.bucket&&(X=D.bucket)),!j)return null;const{data:ce}=B.storage.from(X).getPublicUrl(j);return ce.publicUrl}).filter(D=>D!==null):[]),d=()=>{c.value="slide-left",l.value<u.value.length-1?l.value++:l.value=0},f=()=>{c.value="slide-right",l.value>0?l.value--:l.value=u.value.length-1};let h=0,v=!1;const y=D=>{h=D.changedTouches[0].screenX},E=D=>k(D.changedTouches[0].screenX),S=D=>{h=D.clientX,v=!0},m=D=>{v&&(v=!1,k(D.clientX))},g=()=>{v=!1},k=D=>{h-D>50&&d(),D-h>50&&f()},A=()=>{a.value=null};Ce(()=>window.addEventListener("popstate",A)),Zt(()=>window.removeEventListener("popstate",A));const U=D=>{a.value=D,history.pushState({modal:!0},"")},z=()=>{a.value&&history.back()},Y=D=>{o.value||(i.value.includes(D)?i.value=i.value.filter(j=>j!==D):i.value.push(D))},q=()=>{o.value=!0,r(!0,s.levelId)},Z=D=>s.correctIds.includes(D);return(D,j)=>(b(),I("div",Py,[p("h2",jy,R(t.question),1),p("p",Ny,R(t.subtitle),1),u.value.length>0?(b(),I("div",Ly," Bild "+R(l.value+1)+" von "+R(u.value.length),1)):M("",!0),p("div",{class:"stack-container",onTouchstart:y,onTouchend:E,onMousedown:S,onMouseup:m,onMouseleave:g},[ve(Ys,{name:c.value,mode:"out-in"},{default:Be(()=>[u.value.length>0?(b(),I("div",{key:l.value,class:"stack-card",onClick:j[0]||(j[0]=X=>U(u.value[l.value]))},[p("img",{src:u.value[l.value],draggable:"false"},null,8,Dy),j[3]||(j[3]=p("div",{class:"zoom-hint"},"",-1))])):(b(),I("div",Uy,"Bild nicht gefunden"))]),_:1},8,["name"])],32),p("div",{class:"stack-controls"},[p("button",{class:"stack-nav-btn",onClick:f},""),p("button",{class:"stack-nav-btn",onClick:d},"")]),p("div",By,[(b(!0),I(de,null,We(t.terms,X=>(b(),I("div",{key:X.id,class:Ae(["term-btn",{selected:i.value.includes(X.id),"is-correct":o.value&&Z(X.id),"is-wrong":o.value&&i.value.includes(X.id)&&!Z(X.id)}]),onClick:ce=>Y(X.id)},[we(R(X.text)+" ",1),o.value&&Z(X.id)?(b(),I("span",Fy,"")):M("",!0)],10,My))),128))]),o.value?M("",!0):(b(),I("button",{key:1,class:"neo-btn",style:{"margin-top":"1.5rem"},onClick:q},R(x(n)("generic.verify")),1)),o.value?(b(),I("div",qy,[p("p",null,R(t.feedbackText),1),p("button",{class:"neo-btn",onClick:j[1]||(j[1]=X=>D.$emit("completed"))},R(x(n)("generic.next")),1)])):M("",!0),a.value?(b(),I("div",{key:3,class:"zoom-overlay",onClick:z},[j[4]||(j[4]=p("button",{class:"zoom-close-btn"},"",-1)),p("img",{src:a.value,class:"zoom-content",onClick:j[2]||(j[2]=Qt(()=>{},["stop"]))},null,8,Hy)])):M("",!0)]))}},go=xe(Vy,[["__scopeId","data-v-1d37cc17"]]),Ky={class:"content-wrapper"},Wy={key:0,class:"loading-screen"},zy={key:1,class:"level-container"},Gy={key:0,class:"level-progress-bar"},Jy={class:"progress-track"},Zy={key:2,class:"neo-card result-card",style:{"text-align":"center"}},Ga=8,Qy={__name:"Background",setup(t){const e=Xe(),{t:s,detectLanguage:n}=ft(),{handleScoreAction:r,markLevelAsCompleted:i}=et();n();const o=O(0),a=O(!1),l=O(!1),c=O(""),u=sn({image71:!1,image21:!1}),d=async m=>{const{data:{user:g}}=await B.auth.getUser();if(g)try{await B.from("spiel_aktivitaeten").insert({user_id:g.id,level_id:2,step_id:o.value,task_type:m.taskType,is_correct:m.isCorrect,image_name:m.imageName||c.value})}catch(k){console.error("Log error:",k)}};Ce(async()=>{const{data:{user:m}}=await B.auth.getUser();if(!m)return e.push("/login");const{data:g}=await B.from("spielerprofile").select("username").eq("user_id",m.id).single();c.value=g?.username||m.email.split("@")[0],a.value=!0});const f=()=>{o.value++,window.scrollTo(0,0)},h=m=>{d({taskType:"spot_fake",imageName:m,isCorrect:!0}),f()},v=m=>{const g=m.image71Correct&&m.image21Correct;r(g,2),d({taskType:"multi_check",isCorrect:g}),u.image71=!m.image71Correct,u.image21=!m.image21Correct,u.image71?o.value=3:u.image21?o.value=4:o.value=5,window.scrollTo(0,0)},y=()=>{r(!0,2),f()},E=async()=>{const{data:{user:m}}=await B.auth.getUser();m&&(await B.from("level_fortschritt").upsert({user_id:m.id,level_id:2,score:100},{onConflict:"user_id,level_id"}),i(2)),l.value=!0},S=()=>e.push("/levels");return(m,g)=>(b(),I("div",Ky,[a.value?(b(),I("div",zy,[l.value?M("",!0):(b(),I("div",Gy,[p("span",null,"Hintergrnde: Schritt "+R(o.value+1)+" / "+R(Ga),1),p("div",Jy,[p("div",{class:"progress-fill",style:Ge({width:(o.value+1)/Ga*100+"%"})},null,4)])])),l.value?M("",!0):(b(),I(de,{key:1},[o.value===0?(b(),se(xt,{key:0,levelId:2,aiImage:"Image_0024.jpg",realCount:3,questionText:x(s)("level1.step0.question"),onCompleted:h},null,8,["questionText"])):o.value===1?(b(),se($e,{key:1,image:"Image_0024.jpg",title:x(s)("level1.step1.title"),text:x(s)("level1.step1.text"),onNext:f},null,8,["title","text"])):o.value===2?(b(),se($y,{key:2,imageLeft:"Image_0071.jpg",imageRight:"Image_0021.jpg",correctOption:"both",levelId:2,onCompleted:v})):o.value===6?(b(),se(go,{key:3,images:["Image_0014.jpg","Image_0055.jpg","Image_0035.jpg"],levelId:2,onCompleted:y})):o.value===7?(b(),se($e,{key:4,title:x(s)("level1.step7.title"),buttonText:"Abschlieen",onNext:E},null,8,["title"])):M("",!0)],64)),l.value?(b(),I("div",Zy,[g[0]||(g[0]=p("h2",{class:"neo-title"},"Level abgeschlossen!",-1)),g[1]||(g[1]=p("p",null,"Du hast gelernt, wie Hintergrnde KI verraten knnen.",-1)),p("button",{class:"neo-btn",onClick:S},"Zurck zur Map")])):M("",!0)])):(b(),I("div",Wy,R(x(s)("generic.loading")),1))]))}},Yy={class:"card-header"},Xy={class:"neo-title"},eb={key:0},tb={key:0,class:"stack-counter"},sb={class:"stack-container"},nb=["src"],rb={key:1,class:"stack-controls"},ib={class:"options-stack"},ob=["onClick"],ab=["disabled"],lb={key:2,class:"neo-feedback"},cb={key:0,class:"text-neutral"},ub={key:1,class:"text-success"},db={key:2,class:"text-fail"},hb=["src"],fb={__name:"singleChoice",props:{image:[String,Object,Array],question:String,options:Array,correctId:String,feedbackText:String,levelId:{type:Number,default:1},timeLimit:{type:Number,default:20},isSurvey:{type:Boolean,default:!1}},emits:["completed","mistake"],setup(t,{emit:e}){const s=t,n=e,{t:r}=ft(),{handleScoreAction:i}=et(),o=Ne(()=>s.image?(Array.isArray(s.image)?s.image:[s.image]).map(Z=>{if(!Z)return null;let D=typeof Z=="string"?Z:Z.src,j=typeof Z=="object"&&Z.bucket||"Fake-Images";if(D.startsWith("http"))return D;const{data:X}=B.storage.from(j).getPublicUrl(D);return X.publicUrl}).filter(Z=>Z!==null):[]),a=O(null),l=O(!1),c=O(!1),u=O(0),d=O(""),f=O(null),h=O(s.timeLimit),v=O(null),y=O(!1),E=()=>{s.isSurvey||(S(),h.value=s.timeLimit,y.value=!1,v.value=setInterval(()=>{h.value>0?h.value--:m()},1e3))},S=()=>{v.value&&clearInterval(v.value)},m=()=>{S(),y.value=!0,i(!1,s.levelId)};Ce(()=>{s.isSurvey||E(),window.addEventListener("popstate",U)}),Zt(()=>{S(),window.removeEventListener("popstate",U)});const g=()=>{if(S(),l.value=!0,s.isSurvey){c.value=!0;return}c.value=a.value===s.correctId,i(c.value,s.levelId),c.value||n("mistake")},k=q=>{f.value=q,history.pushState({modal:!0},"")},A=()=>{f.value&&history.back()},U=()=>{f.value=null},z=()=>{d.value="slide-left",u.value=(u.value+1)%o.value.length},Y=()=>{d.value="slide-right",u.value=(u.value-1+o.value.length)%o.value.length};return(q,Z)=>(b(),I("div",{class:Ae(["neo-card",{"shake-anim":y.value}])},[p("div",Yy,[p("h2",Xy,R(t.question),1),t.isSurvey?M("",!0):(b(),I("div",{key:0,class:Ae(["timer-badge",{critical:h.value<=5}])},"  "+R(h.value)+"s ",3))]),o.value.length>0?(b(),I("div",eb,[o.value.length>1?(b(),I("div",tb,"Bild "+R(u.value+1)+" / "+R(o.value.length),1)):M("",!0),p("div",sb,[ve(Ys,{name:d.value,mode:"out-in"},{default:Be(()=>[(b(),I("div",{key:u.value,class:"stack-card",onClick:Z[0]||(Z[0]=D=>k(o.value[u.value]))},[p("img",{src:o.value[u.value],draggable:"false"},null,8,nb),Z[3]||(Z[3]=p("div",{class:"zoom-hint"},"",-1))]))]),_:1},8,["name"])]),o.value.length>1?(b(),I("div",rb,[p("button",{class:"stack-nav-btn",onClick:Y},""),p("button",{class:"stack-nav-btn",onClick:z},"")])):M("",!0)])):M("",!0),p("div",ib,[(b(!0),I(de,null,We(t.options,D=>(b(),I("button",{key:D.id,class:Ae(["option-btn",{selected:a.value===D.id,correct:!t.isSurvey&&l.value&&D.id===t.correctId,wrong:!t.isSurvey&&l.value&&a.value===D.id&&a.value!==t.correctId}]),onClick:j=>!l.value&&(a.value=D.id)},R(D.text),11,ob))),128))]),l.value?M("",!0):(b(),I("button",{key:1,class:"neo-btn",onClick:g,disabled:!a.value},R(x(r)("generic.next")),9,ab)),l.value?(b(),I("div",lb,[t.isSurvey?(b(),I("p",cb,"Danke fr deine Einschtzung!")):c.value?(b(),I("p",ub,R(t.feedbackText),1)):(b(),I("p",db,"Nicht ganz richtig.")),p("button",{class:"neo-btn",onClick:Z[1]||(Z[1]=D=>q.$emit("completed",a.value))},R(x(r)("generic.next")),1)])):M("",!0),f.value?(b(),I("div",{key:3,class:"zoom-overlay",onClick:A},[Z[4]||(Z[4]=p("button",{class:"zoom-close-btn"},"",-1)),p("img",{src:f.value,class:"zoom-content",onClick:Z[2]||(Z[2]=Qt(()=>{},["stop"]))},null,8,hb)])):M("",!0)],2))}},jt=xe(fb,[["__scopeId","data-v-8500d8c9"]]),pb={class:"neo-card"},gb={class:"neo-title"},vb={key:0},mb={class:"stack-counter"},_b=["src"],yb={key:0,class:"badge-select"},bb={class:"controls-area"},wb={key:0,class:"error-msg shake-anim"},kb=["disabled"],Sb={key:1,class:"success-view"},Eb={class:"text-success",style:{"font-weight":"bold","font-size":"1.1rem","margin-bottom":"1rem"}},Ib={class:"result-grid"},Tb=["onClick"],xb=["src"],Ab=["src"],Ob={__name:"gridSelect",props:{images:Array,question:String,successText:String,levelId:{type:Number,default:1}},emits:["completed"],setup(t,{emit:e}){const s=t,{t:n}=ft(),{handleScoreAction:r}=et(),i=O([]),o=O(0),a=O([]),l=O(!1),c=O(""),u=O(null),d=O(""),f=O([]);Ce(()=>{i.value=s.images.map(D=>{const{data:j}=B.storage.from(D.bucket).getPublicUrl(D.src);return{...D,url:j.publicUrl}})});const h=()=>{c.value="",d.value="slide-left",o.value<i.value.length-1?o.value++:o.value=0},v=()=>{c.value="",d.value="slide-right",o.value>0?o.value--:o.value=i.value.length-1};let y=0,E=!1;const S=D=>y=D.changedTouches[0].screenX,m=D=>{y-D.changedTouches[0].screenX>50&&h(),D.changedTouches[0].screenX-y>50&&v()},g=D=>{y=D.clientX,E=!0},k=D=>{E&&(E=!1,y-D.clientX>50&&h(),D.clientX-y>50&&v())},A=()=>{E=!1},U=D=>{u.value=D,history.pushState({modal:!0},"")},z=()=>{u.value&&history.back()},Y=()=>{u.value=null};window.addEventListener("popstate",Y),Zt(()=>window.removeEventListener("popstate",Y));const q=()=>{if(l.value)return;const D=o.value;c.value="",a.value.includes(D)?a.value=a.value.filter(j=>j!==D):a.value.push(D)},Z=()=>{const D=i.value.map((le,ue)=>le.type==="ai"?ue:-1).filter(le=>le!==-1),j=[...a.value].sort(),X=[...D].sort();JSON.stringify(j)===JSON.stringify(X)?(r(!0,s.levelId),f.value=i.value.filter(le=>le.type==="ai"),l.value=!0):(r(!1,s.levelId),c.value="Falsch! -5 Punkte. Versuch es nochmal!")};return(D,j)=>(b(),I("div",pb,[p("h2",gb,R(t.question),1),!l.value&&i.value.length>0?(b(),I("div",vb,[p("div",mb,"Bild "+R(o.value+1)+" / "+R(i.value.length),1),p("div",{class:"stack-container",onTouchstart:S,onTouchend:m,onMousedown:g,onMouseup:k,onMouseleave:A},[ve(Ys,{name:d.value,mode:"out-in"},{default:Be(()=>[(b(),I("div",{key:o.value,class:Ae(["stack-card",{"is-selected":a.value.includes(o.value)}]),onClick:j[0]||(j[0]=X=>U(i.value[o.value].url))},[p("img",{src:i.value[o.value].url,draggable:"false"},null,8,_b),a.value.includes(o.value)?(b(),I("div",yb,"AUSGEWHLT")):M("",!0),j[3]||(j[3]=p("div",{class:"zoom-hint"},"",-1))],2))]),_:1},8,["name"])],32),p("div",bb,[p("div",{class:"nav-row"},[p("button",{class:"stack-nav-btn",onClick:v},""),p("button",{class:"stack-nav-btn",onClick:h},"")]),p("button",{class:Ae(["select-btn",{active:a.value.includes(o.value)}]),onClick:q},R(a.value.includes(o.value)?"Auswahl entfernen":"Als KI markieren"),3)]),c.value?(b(),I("div",wb,R(c.value),1)):M("",!0),p("button",{class:"neo-btn",style:{"margin-top":"1rem"},onClick:Z,disabled:a.value.length===0},R(x(n)("generic.verify")),9,kb)])):l.value?(b(),I("div",Sb,[p("p",Eb,R(t.successText),1),p("div",Ib,[(b(!0),I(de,null,We(f.value,X=>(b(),I("div",{key:X.src,class:"result-item",onClick:ce=>U(X.url)},[p("img",{src:X.url},null,8,xb),j[4]||(j[4]=p("div",{class:"zoom-hint"},"",-1))],8,Tb))),128))]),p("button",{class:"neo-btn",onClick:j[1]||(j[1]=X=>D.$emit("completed"))},R(x(n)("generic.next")),1)])):M("",!0),u.value?(b(),I("div",{key:2,class:"zoom-overlay",onClick:z},[j[5]||(j[5]=p("button",{class:"zoom-close-btn"},"",-1)),p("img",{src:u.value,class:"zoom-content",onClick:j[2]||(j[2]=Qt(()=>{},["stop"]))},null,8,Ab)])):M("",!0)]))}},Cb=xe(Ob,[["__scopeId","data-v-b16c88a1"]]),Rb={class:"content-wrapper"},$b={key:0,class:"loading-screen"},Pb={key:1,class:"level-container"},jb={class:"level-progress-bar"},Nb={class:"progress-track"},Lb={key:2,class:"neo-card result-card",style:{"text-align":"center"}},Ja=7,Db={__name:"Skin",setup(t){const e=Xe(),{t:s,detectLanguage:n}=ft(),{markLevelAsCompleted:r}=et();n();const i=O(0),o=O(!1),a=O(!1),l=O(""),c=O([]);Ce(async()=>{try{const{data:{user:h}}=await B.auth.getUser();if(!h)return e.push("/login");const{data:v}=await B.from("spielerprofile").select("username").eq("user_id",h.id).single();l.value=v?.username||h.email.split("@")[0];const{data:y}=await B.storage.from("Real-Images").list();if(y){const S=y.filter(m=>m.name.toLowerCase().match(/\.(jpg|png|jpeg)$/)).map(m=>m.name).sort(()=>.5-Math.random());realImagesStep0.value=S.slice(0,3),c.value=S.slice(3,5)}}catch{console.warn("Storage Error, using fallbacks")}finally{o.value=!0}});const u=()=>{i.value++,window.scrollTo(0,0)},d=async()=>{const{data:{user:h}}=await B.auth.getUser();h&&(await B.from("level_fortschritt").upsert({user_id:h.id,level_id:3,score:100},{onConflict:"user_id,level_id"}),r(3)),a.value=!0},f=()=>e.push("/levels");return(h,v)=>(b(),I("div",Rb,[o.value?(b(),I("div",Pb,[a.value?M("",!0):(b(),I(de,{key:0},[v[1]||(v[1]=p("div",{class:"level-header-title"},"Level 3: Hauttexturen",-1)),p("div",jb,[p("span",null,"Schritt "+R(i.value+1)+" / "+R(Ja),1),p("div",Nb,[p("div",{class:"progress-fill",style:Ge({width:(i.value+1)/Ja*100+"%"})},null,4)])])],64)),a.value?M("",!0):(b(),I(de,{key:1},[i.value===0?(b(),se(xt,{key:0,levelId:3,aiImage:"Image_0020.jpg",questionText:x(s)("level2.step0.question"),successText:x(s)("level2.step0.success"),onCompleted:u},null,8,["questionText","successText"])):i.value===1?(b(),se(jt,{key:1,levelId:3,image:"Image_0020.jpg",question:x(s)("level2.step1.question"),options:[{id:"skin",text:x(s)("level2.step1.options.skin")},{id:"nose",text:x(s)("level2.step1.options.nose")},{id:"eyes",text:x(s)("level2.step1.options.eyes")},{id:"hair",text:x(s)("level2.step1.options.hair")}],correctId:"skin",feedbackText:x(s)("level2.step1.feedback"),onCompleted:u},null,8,["question","options","feedbackText"])):i.value===2?(b(),se($e,{key:2,image:"Image_0020.jpg",title:x(s)("level2.step2.title"),text:x(s)("level2.step2.text"),buttonText:x(s)("generic.next"),onNext:u},null,8,["title","text","buttonText"])):i.value===3?(b(),se(Cb,{key:3,levelId:3,images:[{src:"Image_0082.jpg",type:"ai",bucket:"Fake-Images"},{src:c.value[0]||"Image_0001.jpg",type:"real",bucket:"Real-Images"},{src:"Image_0079.jpg",type:"ai",bucket:"Fake-Images"},{src:c.value[1]||"Image_0002.jpg",type:"real",bucket:"Real-Images"}].sort(()=>.5-Math.random()),question:x(s)("level2.step3.question"),successText:x(s)("level2.step3.success"),onCompleted:u},null,8,["images","question","successText"])):i.value===4?(b(),se(go,{key:4,levelId:3,images:["Image_0053.jpg"],question:x(s)("level2.step4.question"),subtitle:x(s)("level2.step4.subtitle"),terms:[{id:"smooth",text:x(s)("level2.step4.terms.smooth")},{id:"wrinkles",text:x(s)("level2.step4.terms.wrinkles")},{id:"eyes",text:x(s)("level2.step4.terms.eyes")},{id:"tattoos",text:x(s)("level2.step4.terms.tattoos")}],correctIds:["smooth","wrinkles"],feedbackText:x(s)("level2.step4.feedback"),onCompleted:u},null,8,["question","subtitle","terms","feedbackText"])):i.value===5?(b(),se($e,{key:5,image:[{src:"Image_0053.jpg",bucket:"Fake-Images"},{src:"Image_0025.jpg",bucket:"Real-Images"}],title:x(s)("level2.step5.title"),text:x(s)("level2.step5.text"),onNext:u},null,8,["title","text"])):i.value===6?(b(),se($e,{key:6,image:"Image_0020.jpg",title:x(s)("level2.step6.title"),text:x(s)("level2.step6.text"),buttonText:x(s)("generic.finish"),onNext:d},null,8,["title","text","buttonText"])):M("",!0)],64)),a.value?(b(),I("div",Lb,[v[2]||(v[2]=p("h2",{class:"neo-title"},"Level abgeschlossen!",-1)),v[3]||(v[3]=p("p",null,"Hauttexturen sind ein starkes Indiz. Echte Haut ist nie perfekt.",-1)),p("button",{class:"neo-btn",onClick:f},"Zurck zur Map")])):M("",!0)])):(b(),I("div",$b,[v[0]||(v[0]=p("div",{class:"loader-spinner"},null,-1)),p("p",null,R(x(s)("generic.loading")),1)]))]))}},Ub={class:"neo-card"},Bb={class:"neo-title"},Mb={key:0},Fb={key:1},qb={class:"terms-row"},Hb=["onClick","disabled"],Vb={class:"matching-grid"},Kb=["onClick"],Wb=["src"],zb={key:0,class:"zoom-hint"},Gb={key:0,class:"remove-x"},Jb={key:0,class:"secondary-hint"},Zb=["disabled"],Qb={key:2,class:"neo-feedback"},Yb={key:0,class:"text-success"},Xb={key:1,class:"text-fail"},e0=["src"],t0={__name:"imageMatching",props:["items","terms","question","successText","levelId"],emits:["completed","mistake"],setup(t,{emit:e}){const s=t,n=e,{t:r}=ft(),{handleScoreAction:i}=et(),o=O([]),a=O(null),l=O({}),c=O(!1),u=O(!1),d=O(null);Ce(()=>{o.value=s.items.map(g=>{const{data:k}=B.storage.from(g.bucket||"Fake-Images").getPublicUrl(g.src);return{...g,url:k.publicUrl}})});const f=()=>{d.value=null};window.addEventListener("popstate",f),Zt(()=>window.removeEventListener("popstate",f));const h=g=>{d.value=g,history.pushState({modal:!0},"")},v=()=>{d.value&&history.back()},y=g=>{c.value||(a.value===g?a.value=null:a.value=g)},E=g=>{c.value||(a.value?(l.value[g.id]=a.value,a.value=null):h(g.url))},S=g=>{const k=s.terms.find(A=>A.id===g);return k?k.text:""},m=()=>{c.value=!0;const g=o.value.every(k=>l.value[k.id]===k.correctTermId);u.value=g,i(g,s.levelId||1),g||n("mistake","matching_error")};return(g,k)=>(b(),I("div",Ub,[p("h2",Bb,R(t.question),1),p("div",{class:Ae(["instruction-box",{"active-mode":a.value}])},[a.value?(b(),I("span",Fb,[...k[3]||(k[3]=[p("strong",null,"Schritt 2:",-1),we(" Tippe jetzt auf das passende Bild.",-1)])])):(b(),I("span",Mb,[...k[2]||(k[2]=[p("strong",null,"Schritt 1:",-1),we(" Whle einen Begriff oben aus.",-1)])]))],2),p("div",qb,[(b(!0),I(de,null,We(t.terms,A=>(b(),I("button",{key:A.id,class:Ae(["term-pill",{active:a.value===A.id}]),onClick:U=>y(A.id),disabled:c.value},R(A.text),11,Hb))),128))]),p("div",Vb,[(b(!0),I(de,null,We(o.value,A=>(b(),I("div",{key:A.id,class:"match-card",onClick:U=>E(A)},[p("img",{src:A.url},null,8,Wb),!a.value&&!l.value[A.id]?(b(),I("div",zb,"")):M("",!0),l.value[A.id]?(b(),I("div",{key:1,class:Ae(["assigned-label",{valid:c.value&&l.value[A.id]===A.correctTermId,invalid:c.value&&l.value[A.id]!==A.correctTermId}])},[we(R(S(l.value[A.id]))+" ",1),c.value?M("",!0):(b(),I("span",Gb,""))],2)):M("",!0)],8,Kb))),128))]),c.value?M("",!0):(b(),I("p",Jb,"Tippe auf ein Bild ohne Auswahl, um es zu vergrern.")),c.value?M("",!0):(b(),I("button",{key:1,class:"neo-btn",onClick:m,disabled:Object.keys(l.value).length<t.items.length},R(x(r)("generic.verify")),9,Zb)),c.value?(b(),I("div",Qb,[u.value?(b(),I("p",Yb,R(t.successText),1)):(b(),I("p",Xb,"Leider falsch.")),p("button",{class:"neo-btn",onClick:k[0]||(k[0]=A=>g.$emit("completed"))},R(x(r)("generic.next")),1)])):M("",!0),d.value?(b(),I("div",{key:3,class:"zoom-overlay",onClick:v},[k[4]||(k[4]=p("button",{class:"zoom-close-btn"},"",-1)),p("img",{src:d.value,class:"zoom-content",onClick:k[1]||(k[1]=Qt(()=>{},["stop"]))},null,8,e0)])):M("",!0)]))}},s0=xe(t0,[["__scopeId","data-v-0fcb844f"]]),n0={class:"content-wrapper"},r0={key:0,class:"loading-screen"},i0={key:1,class:"level-container"},o0={class:"level-progress-bar"},a0={class:"progress-track"},l0={key:2,class:"neo-card result-card",style:{"text-align":"center"}},Za=9,c0={__name:"Colors",setup(t){const e=Xe(),{t:s,detectLanguage:n}=ft(),{markLevelAsCompleted:r}=et();n();const i=O(0),o=O(!1),a=O(!1),l=O(""),c=O(""),u=O([]);Ce(async()=>{try{const{data:{user:v}}=await B.auth.getUser();if(!v)return e.push("/login");const{data:y}=await B.from("spielerprofile").select("username").eq("user_id",v.id).single();l.value=y?.username||v.email.split("@")[0];const{data:E}=await B.storage.from("Real-Images").list();if(E){const S=E.filter(m=>m.name.toLowerCase().match(/\.(jpg|png|jpeg)$/)).map(m=>m.name);c.value=S.find(m=>m.includes("0026"))||S[0],u.value=S.sort(()=>.5-Math.random()).slice(0,3)}}catch{console.warn("Bilder-Ladefehler, nutze Fallbacks")}finally{o.value=!0}});const d=()=>{i.value++,window.scrollTo(0,0)},f=async()=>{const{data:{user:v}}=await B.auth.getUser();v&&(await B.from("level_fortschritt").upsert({user_id:v.id,level_id:4,score:100},{onConflict:"user_id,level_id"}),r(4)),a.value=!0},h=()=>e.push("/levels");return(v,y)=>(b(),I("div",n0,[o.value?(b(),I("div",i0,[a.value?M("",!0):(b(),I(de,{key:0},[y[1]||(y[1]=p("div",{class:"level-header-title"},"Level 4: Farben & Sttigung",-1)),p("div",o0,[p("span",null,"Schritt "+R(i.value+1)+" / "+R(Za),1),p("div",a0,[p("div",{class:"progress-fill",style:Ge({width:(i.value+1)/Za*100+"%"})},null,4)])])],64)),a.value?M("",!0):(b(),I(de,{key:1},[i.value===0?(b(),se(xt,{key:0,levelId:4,aiImage:{src:"Image_0018.jpg",bucket:"Fake-best-Images"},realImages:[c.value],questionText:x(s)("level3.step0.question"),successText:x(s)("level3.step0.success"),onCompleted:d},null,8,["realImages","questionText","successText"])):i.value===1?(b(),se(jt,{key:1,levelId:4,image:{src:"Image_0018.jpg",bucket:"Fake-best-Images"},question:x(s)("level3.step1.question"),options:[{id:"colors",text:x(s)("level3.step1.options.colors")},{id:"bg",text:x(s)("level3.step1.options.bg")},{id:"eyes",text:x(s)("level3.step1.options.eyes")},{id:"hat",text:x(s)("level3.step1.options.hat")}],correctId:"colors",feedbackText:x(s)("level3.step1.feedback"),onCompleted:d},null,8,["question","options","feedbackText"])):i.value===2?(b(),se(jt,{key:2,levelId:4,question:x(s)("level3.step2.question"),options:[{id:"indicator",text:x(s)("level3.step2.options.indicator")},{id:"all",text:x(s)("level3.step2.options.all")},{id:"none",text:x(s)("level3.step2.options.none")}],correctId:"indicator",feedbackText:x(s)("level3.step2.feedback"),onCompleted:d},null,8,["question","options","feedbackText"])):M("",!0),i.value===3?(b(),se(xt,{key:3,levelId:4,aiImage:{src:"Image_0083.jpg",bucket:"Fake-Images"},questionText:x(s)("level3.step3.question"),successText:x(s)("level3.step3.success"),onCompleted:d},null,8,["questionText","successText"])):i.value===4?(b(),se($e,{key:4,image:"Image_0083.jpg",title:x(s)("level3.step4.title"),text:x(s)("level3.step4.text"),onNext:d},null,8,["title","text"])):i.value===5?(b(),se(go,{key:5,levelId:4,images:["Image_0047.jpg"],question:x(s)("level3.step5.title"),subtitle:x(s)("level3.step5.subtitle"),terms:[{id:"skin",text:x(s)("level3.step5.terms.skin")},{id:"eyes",text:x(s)("level3.step5.terms.eyes")},{id:"makeup",text:x(s)("level3.step5.terms.makeup")},{id:"smooth",text:x(s)("level3.step5.terms.smooth")}],correctIds:["skin","eyes","smooth"],feedbackText:x(s)("level3.step5.feedback"),onCompleted:d},null,8,["question","subtitle","terms","feedbackText"])):i.value===6?(b(),se($e,{key:6,image:[{src:"Image_0047.jpg",bucket:"Fake-Images"},{src:"Heatmap_0047.png",bucket:"Heatmaps"}],title:x(s)("level3.step6.title"),text:x(s)("level3.step6.text"),onNext:d},null,8,["title","text"])):i.value===7?(b(),se(s0,{key:7,levelId:4,question:x(s)("level3.step7.question"),terms:[{id:"hair",text:x(s)("level3.step7.terms.hair")},{id:"smooth",text:x(s)("level3.step7.terms.smooth")},{id:"sat",text:x(s)("level3.step7.terms.sat")}],items:[{id:"img22",src:"Image_0022.jpg",bucket:"Fake-best-Images",correctTermId:"sat"},{id:"img32",src:"Image_0032.jpg",bucket:"Fake-Images",correctTermId:"hair"},{id:"img21",src:"Image_0021.jpg",bucket:"Fake-best-Images",correctTermId:"smooth"}],successText:x(s)("level3.step7.success"),onCompleted:d},null,8,["question","terms","successText"])):i.value===8?(b(),se($e,{key:8,image:{src:"Image_0006.jpg",bucket:"Fake-best-Images"},title:x(s)("level3.step8.title"),text:x(s)("level3.step8.text"),buttonText:"Level abschlieen",onNext:f},null,8,["title","text"])):M("",!0)],64)),a.value?(b(),I("div",l0,[y[2]||(y[2]=p("h2",{class:"neo-title"},"Abgeschlossen!",-1)),p("button",{class:"neo-btn",onClick:h},"Zurck zur Map")])):M("",!0)])):(b(),I("div",r0,[y[0]||(y[0]=p("div",{class:"loader-spinner"},null,-1)),p("p",null,R(x(s)("generic.loading")),1)]))]))}},u0=xe(c0,[["__scopeId","data-v-2ad87426"]]),d0={class:"content-wrapper"},h0={key:0,class:"loading-screen"},f0={key:1,class:"level-container"},p0={class:"level-progress-bar"},g0={class:"progress-track"},v0={key:2,class:"neo-card result-card",style:{"text-align":"center"}},Qa=6,m0={__name:"Expressions",setup(t){const e=Xe(),{t:s,detectLanguage:n}=ft(),{markLevelAsCompleted:r}=et();n();const i=O(0),o=O(!1),a=O(!1),l=O(""),c=O(""),u=O([]);Ce(async()=>{try{const{data:{user:v}}=await B.auth.getUser();if(!v)return e.push("/login");const{data:y}=await B.from("spielerprofile").select("username").eq("user_id",v.id).single();l.value=y?.username||v.email.split("@")[0];const{data:E}=await B.storage.from("Real-Images").list();if(E){const S=E.filter(g=>g.name.toLowerCase().match(/\.(jpg|png|jpeg)$/)).map(g=>g.name);c.value=S.find(g=>g.includes("0027"))||S[0];const m=S.sort(()=>.5-Math.random());u.value=m.filter(g=>g!==c.value).slice(0,3)}}catch{console.warn("Storage-Fehler, nutze Fallbacks")}finally{o.value=!0}});const d=()=>{i.value++,window.scrollTo(0,0)},f=async()=>{const{data:{user:v}}=await B.auth.getUser();v&&(await B.from("level_fortschritt").upsert({user_id:v.id,level_id:5,score:100},{onConflict:"user_id,level_id"}),r(5)),a.value=!0},h=()=>e.push("/levels");return(v,y)=>(b(),I("div",d0,[o.value?(b(),I("div",f0,[a.value?M("",!0):(b(),I(de,{key:0},[y[1]||(y[1]=p("div",{class:"level-header-title"},"Level 5: Gesichtsausdrcke",-1)),p("div",p0,[p("span",null,"Schritt "+R(i.value+1)+" / "+R(Qa),1),p("div",g0,[p("div",{class:"progress-fill",style:Ge({width:(i.value+1)/Qa*100+"%"})},null,4)])])],64)),a.value?M("",!0):(b(),I(de,{key:1},[i.value===0?(b(),se(jt,{key:0,levelId:5,image:{src:"Image_0002.jpg",bucket:"Fake-best-Images"},question:x(s)("level4.step0.question"),options:[{id:"pose",text:x(s)("level4.step0.options.pose")},{id:"nothing",text:x(s)("level4.step0.options.nothing")},{id:"expression",text:x(s)("level4.step0.options.expression")},{id:"bg",text:x(s)("level4.step0.options.bg")}],correctId:"expression",feedbackText:x(s)("level4.step0.feedback"),onCompleted:d},null,8,["question","options","feedbackText"])):i.value===1?(b(),se($e,{key:1,image:[{src:"Image_0002.jpg",bucket:"Fake-best-Images"},{src:"Heatmap_0002.png",bucket:"Heatmaps-best"}],title:x(s)("level4.step1.title"),text:x(s)("level4.step1.text"),onNext:d},null,8,["title","text"])):i.value===2?(b(),se(xt,{key:2,levelId:5,aiImage:{src:"Image_0025.jpg",bucket:"Fake-best-Images"},realImages:[c.value],questionText:x(s)("level4.step2.question"),successText:x(s)("level4.step2.success"),onCompleted:d},null,8,["realImages","questionText","successText"])):i.value===3?(b(),se($e,{key:3,image:[{src:"Image_0025.jpg",bucket:"Fake-best-Images"},{src:"Heatmap_0025.png",bucket:"Heatmaps-best"}],title:x(s)("level4.step3.title"),text:x(s)("level4.step3.text"),onNext:d},null,8,["title","text"])):i.value===4?(b(),se(xt,{key:4,levelId:5,aiImage:"Image_0015.jpg",questionText:x(s)("level4.step4.question"),successText:x(s)("level4.step4.success"),onCompleted:d},null,8,["questionText","successText"])):i.value===5?(b(),se($e,{key:5,image:[{src:"Image_0027.jpg",bucket:"Fake-Images"},{src:"Heatmap_0027.png",bucket:"Heatmaps"}],title:x(s)("level4.step5.title"),text:x(s)("level4.step5.text"),buttonText:"Level abschlieen",onNext:f},null,8,["title","text"])):M("",!0)],64)),a.value?(b(),I("div",v0,[y[2]||(y[2]=p("h2",{class:"neo-title"},"Level abgeschlossen!",-1)),y[3]||(y[3]=p("p",null,"Du erkennst nun sogar subtile Fehler in der Mimik.",-1)),p("button",{class:"neo-btn",onClick:h},"Zurck zur Map")])):M("",!0)])):(b(),I("div",h0,[y[0]||(y[0]=p("div",{class:"loader-spinner"},null,-1)),p("p",null,R(x(s)("generic.loading")),1)]))]))}},_0=xe(m0,[["__scopeId","data-v-8a135ddd"]]),y0={class:"content-wrapper"},b0={key:0,class:"loading-screen"},w0={key:1,class:"level-container"},k0={class:"level-progress-bar"},S0={class:"progress-track"},E0={key:3,class:"search-step-wrapper"},I0={key:0},T0={key:1},x0={key:2,class:"neo-card result-card",style:{"text-align":"center"}},Ya=10,A0={__name:"Anatomy",setup(t){const e=Xe(),{t:s,detectLanguage:n}=ft(),{markLevelAsCompleted:r}=et(),i=O(0),o=O(!1),a=O(!1),l=O([]),c=O(""),u=O(10),d=O(!1);let f=null;const h=()=>e.push("/levels"),v=()=>{u.value=10,d.value=!1,f&&clearInterval(f),f=setInterval(()=>{u.value>0?u.value--:(d.value=!0,clearInterval(f))},1e3)},y=async k=>{const{data:{user:A}}=await B.auth.getUser();if(A)try{await B.from("spiel_aktivitaeten").insert({user_id:A.id,level_id:6,step_id:i.value,task_type:k.taskType||"anatomy_check",image_name:k.imageName||null,is_correct:k.isCorrect??!0,interaction_type:`User: ${c.value}`})}catch(U){console.error("Logging failed",U)}};Ce(async()=>{try{const{data:{user:k}}=await B.auth.getUser();if(!k)return e.push("/login");const{data:A}=await B.from("spielerprofile").select("username").eq("user_id",k.id).single();c.value=A?.username||k.email.split("@")[0];const{data:U}=await B.storage.from("Real-Images").list();if(U){const z=U.filter(Y=>Y.name.toLowerCase().match(/\.(jpg|png|jpeg)$/)).map(Y=>Y.name);l.value=z.sort(()=>.5-Math.random()).slice(0,3)}}catch{console.warn("Storage fallbacks used")}o.value=!0,n()});const E=()=>{i.value++,window.scrollTo(0,0),[3,4,5,6,8].includes(i.value)&&v()},S=k=>{y({taskType:"self_assessment",isCorrect:k==="yes"}),E()},m=async()=>{const{data:{user:k}}=await B.auth.getUser();k&&(await B.from("level_fortschritt").upsert({user_id:k.id,level_id:6,score:100},{onConflict:"user_id,level_id"}),r(6)),a.value=!0},g=(k,A,U="Fake-best-Images")=>{const z=[{src:k,bucket:U}];if(d.value){const Y=U.includes("best")?"Heatmaps-best":"Heatmaps";z.push({src:A,bucket:Y})}return z};return(k,A)=>(b(),I("div",y0,[o.value?(b(),I("div",w0,[a.value?M("",!0):(b(),I(de,{key:0},[A[1]||(A[1]=p("div",{class:"level-header-title"},"Level 6: Bildfehler erkennen",-1)),p("div",k0,[p("span",null,"Schritt "+R(i.value+1)+" / "+R(Ya),1),p("div",S0,[p("div",{class:"progress-fill",style:Ge({width:(i.value+1)/Ya*100+"%"})},null,4)])])],64)),a.value?M("",!0):(b(),I(de,{key:1},[i.value===0?(b(),se($e,{key:0,title:x(s)("level5.step0.title"),text:x(s)("level5.step0.text"),onNext:E},null,8,["title","text"])):i.value===1?(b(),se(xt,{key:1,levelId:6,aiImage:{src:"Image_0004.jpg",bucket:"Fake-Images"},questionText:x(s)("level5.step1.question"),onCompleted:E},null,8,["questionText"])):i.value===2?(b(),se($e,{key:2,image:[{src:"Image_0004.jpg",bucket:"Fake-Images"},{src:"Heatmap_0004.png",bucket:"Heatmaps"}],title:x(s)("level5.step2.title"),text:x(s)("level5.step2.text"),onNext:E},null,8,["title","text"])):[3,4,5,6,8].includes(i.value)?(b(),I("div",E0,[p("div",{class:Ae(["info-status-banner",{unlocked:d.value}])},[d.value?(b(),I("span",T0," Du hast die Lsung freigeschaltet! Swipe zum Vergleichen.")):(b(),I("span",I0," Suche alle Fehler! Lsung kommt in "+R(u.value)+"s",1))],2),i.value===3?(b(),se(jt,{key:0,isSurvey:!0,image:g("Image_0011.jpg","Heatmap_0011.png"),question:x(s)("level5.check_question"),options:[{id:"yes",text:x(s)("level5.options.yes")},{id:"no",text:x(s)("level5.options.no")}],onCompleted:S},null,8,["image","question","options"])):i.value===4?(b(),se(jt,{key:1,isSurvey:!0,image:g("Image_0012.jpg","Heatmap_0012.png"),question:x(s)("level5.check_question"),options:[{id:"yes",text:x(s)("level5.options.yes")},{id:"no",text:x(s)("level5.options.no")}],onCompleted:S},null,8,["image","question","options"])):i.value===5?(b(),se(jt,{key:2,isSurvey:!0,image:g("Image_0048.jpg","Heatmap_0048.png","Fake-Images"),question:x(s)("level5.check_question"),options:[{id:"yes",text:x(s)("level5.options.yes")},{id:"no",text:x(s)("level5.options.no")}],onCompleted:S},null,8,["image","question","options"])):i.value===6?(b(),se(jt,{key:3,isSurvey:!0,image:g("Image_0067.jpg","Heatmap_0067.png","Fake-Images"),question:x(s)("level5.check_question"),options:[{id:"yes",text:x(s)("level5.options.yes")},{id:"no",text:x(s)("level5.options.no")}],onCompleted:S},null,8,["image","question","options"])):i.value===8?(b(),se(jt,{key:4,isSurvey:!0,image:g("Image_0002.jpg","Heatmap_0002.png","Fake-Images"),question:x(s)("level5.check_question"),options:[{id:"yes",text:x(s)("level5.options.yes")},{id:"no",text:x(s)("level5.options.no")}],onCompleted:S},null,8,["image","question","options"])):M("",!0)])):i.value===7?(b(),se($e,{key:4,image:[{src:"Image_0063.jpg",bucket:"Fake-Images"},{src:"Heatmap_0063.png",bucket:"Heatmaps"}],title:x(s)("level5.asymmetry.title"),text:x(s)("level5.asymmetry.text"),onNext:E},null,8,["title","text"])):i.value===9?(b(),se($e,{key:5,image:["Image_0004.jpg","Image_0063.jpg"],title:x(s)("level5.finish.title"),text:x(s)("level5.finish.text"),buttonText:"Level abschlieen",onNext:m},null,8,["title","text"])):M("",!0)],64)),a.value?(b(),I("div",x0,[A[2]||(A[2]=p("h2",{class:"neo-title"},"Abgeschlossen!",-1)),p("button",{class:"neo-btn",onClick:h},"Zurck zur Map")])):M("",!0)])):(b(),I("div",b0,[...A[0]||(A[0]=[p("div",{class:"loader-spinner"},null,-1)])]))]))}},O0=xe(A0,[["__scopeId","data-v-ca5d7038"]]),C0={class:"content-wrapper"},R0={key:0,class:"loading-screen"},$0={key:1,class:"level-container"},P0={key:1},j0={class:"level-progress-bar"},N0={class:"progress-track"},L0={key:2,class:"neo-card result-card"},D0={class:"score-display"},fn=10,U0={__name:"Quiz-2",setup(t){const e=Xe(),{fetchRandomRealImages:s}=Rs(),n=O(!0),r=O(!1),i=O(!1),o=O(0),a=O(0),l=O([]),c=O(!1),u=Array.from({length:100},(m,g)=>({name:`Image_${String(g+1).padStart(4,"0")}.jpg`,bucket:"Fake-Images-Quiz"})),d=m=>[...m].sort(()=>Math.random()-.5),f=m=>{if(!l.value[m])return;const g=l.value[m];[...g.realImagesList.map(A=>A.src),B.storage.from(g.bucket).getPublicUrl(g.name).data.publicUrl].forEach(A=>{const U=new Image;U.src=A})},h=async(m,g="Fake-Images-Quiz")=>{const{data:{user:k}}=await B.auth.getUser();k&&await B.from("gesehene_bilder").upsert({user_id:k.id,image_name:m,bucket_name:g},{onConflict:"user_id,image_name"})};Ce(async()=>{const{data:{user:m}}=await B.auth.getUser();if(!m)return e.push("/login");n.value=!0;const{data:g}=await B.from("gesehene_bilder").select("image_name").eq("user_id",m.id),k=g?.map(Y=>Y.image_name)||[];let A=u.filter(Y=>!k.includes(Y.name));A.length<fn&&(A=u);const U=d(A).slice(0,fn),z=await s(30,"portrait","gjZvv_WF6VQ");l.value=U.map((Y,q)=>({...Y,realImagesList:z.slice(q*3,q*3+3)})),l.value.length>0&&await f(0),n.value=!1,f(1)}),Gs(o,m=>{l.value[m+1]&&f(m+1);const g=l.value[m];g&&h(g.name,g.bucket)});const v=()=>{r.value=!0,l.value[0]&&h(l.value[0].name,l.value[0].bucket)},y=()=>{c.value||a.value++,c.value=!1,o.value<l.value.length-1?o.value++:(i.value=!0,E())},E=async()=>{const{data:{user:m}}=await B.auth.getUser();m&&await B.from("level_fortschritt").upsert({user_id:m.id,level_id:7,score:a.value},{onConflict:"user_id,level_id"})},S=()=>e.push("/levels");return(m,g)=>(b(),I("div",C0,[n.value?(b(),I("div",R0,[...g[1]||(g[1]=[p("div",{class:"loader-container"},[p("div",{class:"loader-spinner"}),p("p",null,"Suche neue Herausforderungen...")],-1)])])):(b(),I("div",$0,[!r.value&&!i.value?(b(),se($e,{key:0,title:"Etappen-Quiz",text:"Hier zeigen wir dir nur Bilder, die du noch nie gesehen hast. Kannst du die KI finden?",buttonText:"Starten",onNext:v})):M("",!0),r.value&&!i.value&&l.value[o.value]?(b(),I("div",P0,[p("div",j0,[p("span",null,"Runde "+R(o.value+1)+" / "+R(fn),1),p("div",N0,[p("div",{class:"progress-fill",style:Ge({width:(o.value+1)/fn*100+"%"})},null,4)])]),(b(),se(xt,{key:o.value,aiImage:{src:l.value[o.value].name,bucket:l.value[o.value].bucket},realImages:l.value[o.value].realImagesList,levelId:7,onCompleted:y,onMistake:g[0]||(g[0]=k=>c.value=!0)},null,8,["aiImage","realImages"]))])):M("",!0),i.value?(b(),I("div",L0,[g[2]||(g[2]=p("h2",{class:"neo-title"},"Ergebnis",-1)),p("div",D0,R(a.value)+" / "+R(fn),1),p("button",{class:"neo-btn",onClick:S},"Abschlieen")])):M("",!0)]))]))}},B0=xe(U0,[["__scopeId","data-v-2da88ad5"]]),M0={class:"feed-wrapper"},F0={class:"neo-card phone-container"},q0={class:"phone-frame"},H0={class:"app-header"},V0={key:1,style:{width:"24px"}},K0={class:"scroll-area"},W0={class:"story-bar"},z0=["onClick"],G0={class:"username"},J0={key:0,class:"ad-tag"},Z0=["onClick"],Q0=["src"],Y0={class:"post-caption"},X0={class:"caption-text"},ew={class:"feed-end"},tw={key:0,class:"scroll-area"},sw={class:"profile-header"},nw={class:"stats"},rw={class:"stat-box"},iw={class:"stat-box"},ow={class:"bio-section"},aw={class:"profile-meta-clues"},lw={key:0,class:"ad-warning"},cw={class:"profile-grid"},uw=["onClick"],dw=["src"],hw={class:"zoom-content"},fw=["src"],pw={class:"game-footer"},gw=["disabled"],vw={key:1,class:"neo-feedback"},mw={key:0,class:"text-success"},_w={key:1,class:"text-fail"},yw={key:2,class:"unsplash-credits"},bw=["href"],ww={__name:"fakeSocialFeed",props:["accounts"],emits:["completed","mistake"],setup(t,{emit:e}){const s=t,n=e,{t:r}=ft(),{triggerDownloadPing:i}=Rs(),o=O("feed"),a=O(null),l=O([]),c=O(!1),u=O(!1),d=O(null),f=O([]),h=S=>S?typeof S=="string"?S:S.src:"",v=Ne(()=>{let S=[];return s.accounts?(s.accounts.forEach(m=>{m.posts.slice(0,2).forEach(g=>{S.push({...m,postImage:g})})}),S.sort(()=>.5-Math.random())):[]}),y=Ne(()=>s.accounts.find(S=>S.id===a.value)),E=()=>{c.value=!0;const S=s.accounts.filter(A=>A.isFake).map(A=>A.id).sort(),m=[...l.value].sort(),g=JSON.stringify(S)===JSON.stringify(m);u.value=g;const k=new Map;s.accounts.forEach(A=>{A.posts.forEach(U=>{U&&U.credit&&(k.set(U.credit.name,U.credit),i(U.credit.downloadLocation))})}),f.value=Array.from(k.values()),g||n("mistake")};return(S,m)=>(b(),I("div",M0,[p("div",F0,[p("div",q0,[p("div",H0,[o.value==="profile"?(b(),I("button",{key:0,onClick:m[0]||(m[0]=g=>o.value="feed"),class:"nav-btn"},"")):(b(),I("div",V0)),m[4]||(m[4]=p("span",{class:"app-name"},"InstaFake",-1)),m[5]||(m[5]=p("div",{style:{width:"24px"}},null,-1))]),lt(p("div",K0,[p("div",W0,[(b(),I(de,null,We(5,g=>p("div",{class:"story-circle",key:g})),64))]),(b(!0),I(de,null,We(v.value,(g,k)=>(b(),I("div",{key:k,class:"post"},[p("div",{class:"post-header",onClick:A=>{a.value=g.id,o.value="profile"}},[p("div",{class:"avatar-circle-small",style:Ge({background:g.avatarColor})},null,4),p("span",G0,R(g.name),1),g.hasAds?(b(),I("span",J0,"Anzeige")):M("",!0)],8,z0),p("div",{class:"image-square",onClick:A=>d.value=h(g.postImage)},[p("img",{src:h(g.postImage)},null,8,Q0)],8,Z0),m[7]||(m[7]=p("div",{class:"post-actions"},[p("span",null,""),we(),p("span",null,""),we(),p("span",null,"")],-1)),p("div",Y0,[p("strong",null,R(g.name),1),m[6]||(m[6]=we()),p("span",X0,R(g.bio.substring(0,30))+"...",1)])]))),128)),p("div",ew,[p("p",null,R(x(r)("level7.feed.instruction")),1)])],512),[[Ch,o.value==="feed"]]),o.value==="profile"&&y.value?(b(),I("div",tw,[p("div",sw,[p("div",{class:"avatar-circle-large",style:Ge({background:y.value.avatarColor})},null,4),p("div",nw,[p("div",rw,[p("strong",null,R(y.value.posts.length),1),m[8]||(m[8]=p("small",null,"Posts",-1))]),p("div",iw,[p("strong",null,R(y.value.followers),1),m[9]||(m[9]=p("small",null,"Follower",-1))])])]),p("div",ow,[p("h3",null,R(y.value.name),1),p("p",null,R(y.value.bio),1),p("div",aw,[p("span",null," Dabei seit "+R(y.value.joined),1),y.value.hasAds?(b(),I("span",lw," Business Account")):M("",!0)])]),p("button",{class:Ae(["mark-btn",{"is-selected":l.value.includes(y.value.id)}]),onClick:m[1]||(m[1]=g=>!c.value&&(l.value.includes(y.value.id)?l.value=l.value.filter(k=>k!==y.value.id):l.value.push(y.value.id)))},R(l.value.includes(y.value.id)?" Markiert":"Als Fake melden"),3),p("div",cw,[(b(!0),I(de,null,We(y.value.posts,(g,k)=>(b(),I("div",{key:k,class:"grid-item",onClick:A=>d.value=h(g)},[p("img",{src:h(g)},null,8,dw)],8,uw))),128))])])):M("",!0),d.value?(b(),I("div",{key:1,class:"zoom-overlay",onClick:m[2]||(m[2]=g=>d.value=null)},[p("div",hw,[p("img",{src:d.value},null,8,fw)])])):M("",!0)]),p("div",pw,[c.value?M("",!0):(b(),I("button",{key:0,class:"neo-btn",onClick:E,disabled:l.value.length===0}," Check ("+R(l.value.length)+") ",9,gw)),c.value?(b(),I("div",vw,[u.value?(b(),I("p",mw,R(x(r)("level7.feed.success")),1)):(b(),I("p",_w,R(x(r)("level7.feed.fail")),1)),f.value.length>0?(b(),I("div",yw,[p("small",null,[m[11]||(m[11]=we("Fotos: ",-1)),(b(!0),I(de,null,We(f.value,g=>(b(),I("span",{key:g.name},[p("a",{href:g.link,target:"_blank"},R(g.name),9,bw),m[10]||(m[10]=we(", ",-1))]))),128)),m[12]||(m[12]=we(" Unsplash",-1))])])):M("",!0),p("button",{class:"neo-btn",onClick:m[3]||(m[3]=g=>S.$emit("completed"))},"Weiter")])):M("",!0)])])]))}},kw=xe(ww,[["__scopeId","data-v-51772247"]]),Sw={class:"content-wrapper"},Ew={key:0,class:"loading-screen"},Iw={key:1,class:"level-container"},Tw={class:"level-progress-bar"},xw={class:"progress-track"},Aw={key:1,class:"neo-card",style:{"text-align":"center"}},Xa=7,mt="Nanobanana-Images",Ow={__name:"Best-Images",setup(t){const e=Xe(),{t:s,detectLanguage:n}=ft(),{fetchRandomRealImages:r}=Rs(),{markLevelAsCompleted:i}=et(),o=O(0),a=O(!1),l=O(!1),c=O([]),u=f=>B.storage.from(mt).getPublicUrl(f).data.publicUrl;Ce(async()=>{try{const{data:{user:f}}=await B.auth.getUser();if(!f)return e.push("/login");const h=await r(3,"squarish"),v=await r(3,"squarish");c.value=[{id:"real1",name:"Tom_Travels",isFake:!1,followers:"1.2k",joined:"Mrz 2019",hasAds:!1,bio:"Exploring the world ",avatarColor:"#4A90E2",posts:h},{id:"real2",name:"Sarah_Art",isFake:!1,followers:"4.8k",joined:"August 2021",hasAds:!1,bio:"Artist & Curator ",avatarColor:"#F5A623",posts:v},{id:"fake_inf",name:"Lara_Life",isFake:!0,followers:"280k",joined:"Dezember 2025",hasAds:!0,bio:"Fashion | Beauty ",avatarColor:"#FF69B4",posts:[{src:u("Image_0014.png"),bucket:mt},{src:u("Image_0009.png"),bucket:mt},{src:u("Image_0008.png"),bucket:mt}]},{id:"fake_inf2",name:"Brenda Hadid",isFake:!0,followers:"950k",joined:"November 2025",hasAds:!1,bio:"Special girl doing special Things",avatarColor:"#8A2BE2",posts:[{src:u("Image_0032.png"),bucket:mt},{src:u("Image_0023.png"),bucket:mt},{src:u("Image_0022.png"),bucket:mt}]},{id:"fake_news",name:"Peter_Behrens",isFake:!0,followers:"15.2k",joined:"November 2025",hasAds:!1,bio:"Uncensored News ",avatarColor:"#333333",posts:[{src:u("Image_0012.png"),bucket:mt},{src:u("Image_0013.png"),bucket:mt}]}].sort(()=>.5-Math.random()),a.value=!0,n()}catch(f){console.error(f)}});const d=async()=>{const{data:{user:f}}=await B.auth.getUser();f&&(await B.from("level_fortschritt").upsert({user_id:f.id,level_id:8,score:100},{onConflict:"user_id,level_id"}),i(8)),l.value=!0};return(f,h)=>(b(),I("div",Sw,[a.value?(b(),I("div",Iw,[l.value?M("",!0):(b(),I(de,{key:0},[h[8]||(h[8]=p("div",{class:"level-header-title"},"Level 8: Moderne KIs",-1)),p("div",Tw,[p("span",null,"Schritt "+R(o.value+1)+" / "+R(Xa),1),p("div",xw,[p("div",{class:"progress-fill",style:Ge({width:(o.value+1)/Xa*100+"%"})},null,4)])]),o.value===0?(b(),se($e,{key:0,title:x(s)("level7.step0.title"),text:x(s)("level7.step0.text"),onNext:h[0]||(h[0]=v=>o.value++)},null,8,["title","text"])):o.value===1?(b(),se(jt,{key:1,levelId:8,image:{src:"Image_0003.png",bucket:mt},question:x(s)("level7.step1.question"),correctId:"scene",options:[{id:"scene",text:x(s)("level7.step1.options.scene")},{id:"quality",text:x(s)("level7.step1.options.quality")},{id:"filter",text:x(s)("level7.step1.options.filter")}],feedbackText:x(s)("level7.step1.feedback"),onCompleted:h[1]||(h[1]=v=>o.value++)},null,8,["image","question","options","feedbackText"])):o.value===2?(b(),se(xt,{key:2,levelId:8,aiImage:{src:"Image_0002.png",bucket:mt},realImages:[{src:"Image_0015.png",bucket:mt}],questionText:x(s)("level7.step2.question"),onCompleted:h[2]||(h[2]=v=>o.value++)},null,8,["aiImage","realImages","questionText"])):o.value===3?(b(),se($e,{key:3,title:x(s)("level7.step3.title"),text:x(s)("level7.step3.text"),onNext:h[3]||(h[3]=v=>o.value++)},null,8,["title","text"])):o.value===4?(b(),se(kw,{key:4,accounts:c.value,onCompleted:h[4]||(h[4]=v=>o.value++)},null,8,["accounts"])):o.value===5?(b(),se($e,{key:5,title:"Analyse",text:"Bots erkennen bedeutet Kontext prfen. Lara_Life hat 280k Follower in einem Monat gewonnen  das ist ein klares Zeichen fr einen Bot.",onNext:h[5]||(h[5]=v=>o.value++)})):o.value===6?(b(),se($e,{key:6,title:"Abschluss",text:"Glckwunsch! Du hast Level 8 beendet.",buttonText:"Spiel beenden",onNext:d})):M("",!0)],64)),l.value?(b(),I("div",Aw,[h[9]||(h[9]=p("h2",{class:"neo-title"},"Abgeschlossen!",-1)),p("button",{class:"neo-btn",onClick:h[6]||(h[6]=v=>x(e).push("/levels"))},"Zurck zur Map")])):M("",!0)])):(b(),I("div",Ew,[...h[7]||(h[7]=[p("div",{class:"loader-spinner"},null,-1)])]))]))}},Cw=xe(Ow,[["__scopeId","data-v-2c716194"]]),Rw={class:"content-wrapper"},$w={key:0,class:"loading-screen"},Pw={key:1,class:"level-container"},jw={key:1},Nw={class:"level-progress-bar"},Lw={class:"progress-track"},Dw={key:2,class:"neo-card result-card",style:{"text-align":"center"}},Uw={class:"score-display"},Bw=10,hi="Nanobanana-Images",Mw={__name:"Quiz-3",setup(t){const e=Xe(),{fetchRandomRealImages:s}=Rs(),{markLevelAsCompleted:n}=et(),r=O(!0),i=O(!1),o=O(!1),a=O(0),l=O(0),c=O([]),u=O(!1),d=O(""),f=["0001","0002","0003","0004","0005","0006","0007","0008","0009","0010","0011","0012","0013","0014","0015","0022","0023","0032"],h=m=>[...m].sort(()=>Math.random()-.5),v=m=>Promise.all(m.map(g=>new Promise(k=>{const A=new Image;A.src=g,A.onload=k,A.onerror=k}))),y=async(m,g)=>{const{data:{user:k}}=await B.auth.getUser();k&&await B.from("spiel_aktivitaeten").insert({user_id:k.id,level_id:9,step_id:a.value,task_type:"spot_fake_nanobanana_final",image_name:g.name,is_correct:m,interaction_type:`User: ${d.value}`})};Ce(async()=>{const{data:{user:m}}=await B.auth.getUser();if(!m)return e.push("/login");const{data:g}=await B.from("spielerprofile").select("username").eq("user_id",m.id).maybeSingle();d.value=g?.username||m.email.split("@")[0],r.value=!0;const A=Array.from({length:34},(Y,q)=>({name:`Image_${String(q+1).padStart(4,"0")}.png`,bucket:hi})).filter(Y=>{const q=Y.name.split("_")[1].split(".")[0];return!f.includes(q)}),U=h(A).slice(0,Bw),z=await s(30);if(c.value=U.map((Y,q)=>({...Y,realImagesList:z.slice(q*3,q*3+3)})),c.value[0]){const Y=[...c.value[0].realImagesList.map(q=>q.src),B.storage.from(hi).getPublicUrl(c.value[0].name).data.publicUrl];await v(Y)}r.value=!1});const E=()=>{const m=c.value[a.value];if(y(!u.value,m),u.value||l.value++,u.value=!1,a.value<c.value.length-1){a.value++;const g=c.value[a.value],k=[...g.realImagesList.map(A=>A.src),B.storage.from(hi).getPublicUrl(g.name).data.publicUrl];v(k)}else o.value=!0,S()},S=async()=>{const{data:{user:m}}=await B.auth.getUser();m&&(await B.from("level_fortschritt").upsert({user_id:m.id,level_id:9,score:l.value},{onConflict:"user_id,level_id"}),n(9))};return(m,g)=>(b(),I("div",Rw,[r.value?(b(),I("div",$w,[...g[3]||(g[3]=[p("div",{class:"loader-spinner"},null,-1),p("p",null,"Lade Abschlussprfung...",-1)])])):(b(),I("div",Pw,[!i.value&&!o.value?(b(),se($e,{key:0,title:"Das Finale",text:"Nur 10 Runden trennen dich vom Ende der Studie. Hier gibt es keine Tipps mehr.",buttonText:"Jetzt starten",onNext:g[0]||(g[0]=k=>i.value=!0)})):M("",!0),i.value&&!o.value&&c.value[a.value]?(b(),I("div",jw,[p("div",Nw,[p("span",null,"Runde "+R(a.value+1)+" / 10",1),p("div",Lw,[p("div",{class:"progress-fill",style:Ge({width:(a.value+1)/10*100+"%"})},null,4)])]),(b(),se(xt,{key:a.value,aiImage:{src:c.value[a.value].name,bucket:c.value[a.value].bucket},realImages:c.value[a.value].realImagesList,levelId:9,onCompleted:E,onMistake:g[1]||(g[1]=k=>u.value=!0)},null,8,["aiImage","realImages"]))])):M("",!0),o.value?(b(),I("div",Dw,[g[4]||(g[4]=p("h2",{class:"neo-title"},"Vielen Dank!",-1)),p("div",Uw,R(l.value)+" / 10",1),p("button",{class:"neo-btn",onClick:g[2]||(g[2]=k=>x(e).push("/levels"))},"Zurck zur Map")])):M("",!0)]))]))}},Fw=xe(Mw,[["__scopeId","data-v-e7eba6c6"]]),qw=[{path:"/",name:"welcome",component:Yv},{path:"/register",name:"register",component:ym},{path:"/login",name:"login",component:Dm},{path:"/info",name:"info",component:Em},{path:"/explain",name:"explain",component:Am},{path:"/profile",name:"profile",component:t_},{path:"/levels",name:"levels",component:f_},{path:"/stats",name:"stats",component:R_},{path:"/leaderboard",name:"leaderboard",component:B_},{path:"/test-user-level",name:"test-user-level",component:by},{path:"/level1",name:"level1",component:Qy},{path:"/level2",name:"level2",component:Db},{path:"/level3",name:"level3",component:u0},{path:"/level4",name:"level4",component:_0},{path:"/level5",name:"level5",component:O0},{path:"/etappen-quiz",name:"etappen-quiz",component:B0},{path:"/level8",name:"level8",component:Cw},{path:"/level9",name:"level9",component:Fw},{path:"/:pathMatch(.*)*",redirect:"/"}],wu=op({history:Uf(),routes:qw});wu.beforeEach(async(t,e,s)=>{const{data:{session:n}}=await B.auth.getSession(),i=["welcome","login","register","info","explain","stats","leaderboard"].includes(t.name);n?i&&!["info","explain","stats","leaderboard"].includes(t.name)?s({name:"levels"}):s():i?s():s({name:"welcome"})});const Hw={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_SUPABASE_ANON_KEY:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InVoZWZkb2hsdmh3c2Zvb3l6cW5tIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjQ1MTY5MzUsImV4cCI6MjA4MDA5MjkzNX0.KV_nnd1bjpFSYJxrkhCl4l-Zkhj0X-g6aw2cFbN6JII",VITE_SUPABASE_URL:"https://uhefdohlvhwsfooyzqnm.supabase.co"};console.log("ALL ENV:",Hw);const ku=Zh(zv);ku.use(wu);ku.mount("#app");
